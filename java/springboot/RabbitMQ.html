<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RabbitMQ讲义 | zhugのブログ</title>
    <meta name="description" content="zhug的博客">
    <link rel="preload stylesheet" href="/assets/style.33cdfe44.css" as="style">
    <script type="module" src="/assets/app.52f37026.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.364d6ed5.js">
  <link rel="modulepreload" href="/assets/chunks/theme.245f2da6.js">
  <link rel="modulepreload" href="/assets/java_springboot_RabbitMQ.md.e8a6fe00.lean.js">
  <link rel="icon" href="/logo.png">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8616af1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8616af1> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-7c10cd25><div class="container" data-v-7c10cd25><div class="title" data-v-7c10cd25><div class="VPNavBarTitle has-sidebar" data-v-7c10cd25 data-v-4d981103><a class="title" href="/" data-v-4d981103><!--[--><!--]--><!----><!--[-->zhugのブログ<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-7c10cd25><div class="curtain" data-v-7c10cd25></div><div class="content-body" data-v-7c10cd25><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-7c10cd25><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-7c10cd25 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->主页<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> CSS和LESS <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/CSS%E5%92%8CLESS/CSS%E5%92%8CCSS3/BFC.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->CSS和CSS3<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/CSS%E5%92%8CLESS/LESS/%E5%8F%98%E9%87%8F.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->LESS<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> JS和TS <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/JS%E5%92%8CTS/ES5/array.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->ES5<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/JS%E5%92%8CTS/ES6/%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->ES6<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/JS%E5%92%8CTS/TypeScript/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->TypeScript<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E7%9F%A5%E8%AF%86%E7%A2%8E%E7%89%87/promise&amp;%E9%80%92%E5%BD%92.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->知识碎片<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 前端框架 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/%E6%A1%86%E6%9E%B6/vue/Antd%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->Vue学习<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/%E6%A1%86%E6%9E%B6/VueRouter/%E7%AE%80%E4%BB%8B.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->VueRouter学习<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/%E6%A1%86%E6%9E%B6/Vuex/%E7%AE%80%E4%BB%8B.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->Vuex学习<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/%E6%A1%86%E6%9E%B6/react/jsx.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->React学习<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/%E6%A1%86%E6%9E%B6/react_router/%E7%AE%80%E4%BB%8B.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->React路由<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 数据结构和算法 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%95%B0%E7%BB%84/%E6%95%B0%E7%BB%84%E5%9F%BA%E7%A1%80.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->数据结构<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->算法<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/HTTP%E5%8D%8F%E8%AE%AE/get%E4%B8%8Epost%E7%9A%84%E5%8C%BA%E5%88%AB.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->HTTP协议<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->设计模式<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 前端工程化 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/modules/webpack/%E5%9F%BA%E7%A1%80/%E7%AE%80%E4%BB%8B.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->webpack<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/modules/node/node%E6%90%AD%E5%BB%BAweb%E6%9C%8D%E5%8A%A1%E5%99%A8.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->node<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/modules/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E5%A4%9A%E9%A1%B5%E9%9D%A2.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->解决方案<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> java <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/java/java/%E6%B3%A8%E8%A7%A3.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->java<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/java/mysql/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->Mysql<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/java/ssm/%E5%A4%A7%E7%BA%B2.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->SSM<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/java/springboot/yaml.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->springboot<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/java/springcloudAlibaba/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A6%82%E5%BF%B5.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->springCloudAlibaba<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> 更多 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/more/%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->学习方法<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/more/%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->友情链接<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/more/%E9%9D%A2%E8%AF%95.html" data-v-2f2cfafc data-v-8f4dc553><!--[-->八股文<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-7c10cd25 data-v-f6a63727><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f6a63727 data-v-87de0873 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-87de0873><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-87de0873><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-7c10cd25 data-v-0394ad82 data-v-d7a53887><!--[--><a class="VPSocialLink" href="https://github.com" aria-label="github" target="_blank" rel="noopener" data-v-d7a53887 data-v-c530cc0a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://www.bilibili.com/" aria-label target="_blank" rel="noopener" data-v-d7a53887 data-v-c530cc0a><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="zhuzhan-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.73252 2.67094C3.33229 2.28484 3.33229 1.64373 3.73252 1.25764C4.11291 0.890684 4.71552 0.890684 5.09591 1.25764L7.21723 3.30403C7.27749 3.36218 7.32869 3.4261 7.37081 3.49407H10.5789C10.6211 3.4261 10.6723 3.36218 10.7325 3.30403L12.8538 1.25764C13.2342 0.890684 13.8368 0.890684 14.2172 1.25764C14.6175 1.64373 14.6175 2.28484 14.2172 2.67094L13.364 3.49407H14C16.2091 3.49407 18 5.28493 18 7.49407V12.9996C18 15.2087 16.2091 16.9996 14 16.9996H4C1.79086 16.9996 0 15.2087 0 12.9996V7.49406C0 5.28492 1.79086 3.49407 4 3.49407H4.58579L3.73252 2.67094ZM4 5.42343C2.89543 5.42343 2 6.31886 2 7.42343V13.0702C2 14.1748 2.89543 15.0702 4 15.0702H14C15.1046 15.0702 16 14.1748 16 13.0702V7.42343C16 6.31886 15.1046 5.42343 14 5.42343H4ZM5 9.31747C5 8.76519 5.44772 8.31747 6 8.31747C6.55228 8.31747 7 8.76519 7 9.31747V10.2115C7 10.7638 6.55228 11.2115 6 11.2115C5.44772 11.2115 5 10.7638 5 10.2115V9.31747ZM12 8.31747C11.4477 8.31747 11 8.76519 11 9.31747V10.2115C11 10.7638 11.4477 11.2115 12 11.2115C12.5523 11.2115 13 10.7638 13 10.2115V9.31747C13 8.76519 12.5523 8.31747 12 8.31747Z" fill="currentColor"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-7c10cd25 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-87de0873 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-87de0873><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-87de0873><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-d7a53887><!--[--><a class="VPSocialLink" href="https://github.com" aria-label="github" target="_blank" rel="noopener" data-v-d7a53887 data-v-c530cc0a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="https://www.bilibili.com/" aria-label target="_blank" rel="noopener" data-v-d7a53887 data-v-c530cc0a><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="zhuzhan-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.73252 2.67094C3.33229 2.28484 3.33229 1.64373 3.73252 1.25764C4.11291 0.890684 4.71552 0.890684 5.09591 1.25764L7.21723 3.30403C7.27749 3.36218 7.32869 3.4261 7.37081 3.49407H10.5789C10.6211 3.4261 10.6723 3.36218 10.7325 3.30403L12.8538 1.25764C13.2342 0.890684 13.8368 0.890684 14.2172 1.25764C14.6175 1.64373 14.6175 2.28484 14.2172 2.67094L13.364 3.49407H14C16.2091 3.49407 18 5.28493 18 7.49407V12.9996C18 15.2087 16.2091 16.9996 14 16.9996H4C1.79086 16.9996 0 15.2087 0 12.9996V7.49406C0 5.28492 1.79086 3.49407 4 3.49407H4.58579L3.73252 2.67094ZM4 5.42343C2.89543 5.42343 2 6.31886 2 7.42343V13.0702C2 14.1748 2.89543 15.0702 4 15.0702H14C15.1046 15.0702 16 14.1748 16 13.0702V7.42343C16 6.31886 15.1046 5.42343 14 5.42343H4ZM5 9.31747C5 8.76519 5.44772 8.31747 6 8.31747C6.55228 8.31747 7 8.76519 7 9.31747V10.2115C7 10.7638 6.55228 11.2115 6 11.2115C5.44772 11.2115 5 10.7638 5 10.2115V9.31747ZM12 8.31747C11.4477 8.31747 11 8.76519 11 9.31747V10.2115C11 10.7638 11.4477 11.2115 12 11.2115C12.5523 11.2115 13 10.7638 13 10.2115V9.31747C13 8.76519 12.5523 8.31747 12 8.31747Z" fill="currentColor"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-7c10cd25 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-b2cf3e0b data-v-392e1bf8><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-392e1bf8><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-392e1bf8><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-392e1bf8>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-392e1bf8 data-v-079b16a8><button data-v-079b16a8>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-b2cf3e0b data-v-af16598e><div class="curtain" data-v-af16598e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-af16598e><span class="visually-hidden" id="sidebar-aria-label" data-v-af16598e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 collapsible has-active" data-v-af16598e data-v-c4656e6d><div class="item" role="button" tabindex="0" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><h2 class="text" data-v-c4656e6d>SpringBoot</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c4656e6d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c4656e6d><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c4656e6d><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/yaml.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>yaml</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/SpringBoot%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>SpringBoot整合第三方</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/SpringBoot%E6%95%B4%E5%90%88Mybatis-Plus.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>SpringBoot整合Mybatis-Plus</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/RestFul.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>RestFul服务</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/jwt.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>JWT跨域认证</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/AOP%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>使用AOP实现自定义注解</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/SpringBoot%E7%BC%93%E5%AD%98.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>SpringBoot缓存</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/SpringBoot%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8%E6%97%B6%E9%A2%84%E5%8A%A0%E8%BD%BD.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>SpringBoot项目启动时预加载</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/fastjson.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>fastjson</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/SpringBoot%E9%9B%86%E6%88%90WebSocket.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>SpringBoot集成WebSocket</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>任务处理</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/Quartz.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Quartz</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/OpenFeign.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>OpenFeign</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/RabbitMQ.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>消息中间件RabbitMQ</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6RocketMQ.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>消息中间件RocketMQ</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/Redis.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Redis</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/%E4%BA%8B%E5%8A%A1.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>事务</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>SpringBoot常用注解</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8%E6%B3%A8%E8%A7%A3.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>配置启动相关注解</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/Spring%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>Spring中常用的知识点</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/SpringBoot%E4%B8%89%E5%A4%A7%E5%99%A8.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>SpringBoot三大器</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/%E5%AE%9A%E4%B9%89%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>定义统一返回结果</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E4%B8%8E%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>自定义异常与全局异常处理</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C%E4%B8%8E%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>参数校验与全局异常处理</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c4656e6d data-v-c4656e6d><div class="item" data-v-c4656e6d><div class="indicator" data-v-c4656e6d></div><a class="VPLink link link" href="/java/springboot/%E9%A1%B9%E7%9B%AE%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html" data-v-c4656e6d data-v-8f4dc553><!--[--><p class="text" data-v-c4656e6d>项目知识点总结</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-sidebar has-aside" data-v-a494bd1d data-v-c4b0d3cf><!--[--><!--]--><div class="container" data-v-c4b0d3cf><div class="aside" data-v-c4b0d3cf><div class="aside-curtain" data-v-c4b0d3cf></div><div class="aside-container" data-v-c4b0d3cf><div class="aside-content" data-v-c4b0d3cf><div class="VPDocAside" data-v-c4b0d3cf data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>大纲</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-9a431c33><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c4b0d3cf><div class="content-container" data-v-c4b0d3cf><!--[--><!--]--><!----><main class="main" data-v-c4b0d3cf><div style="position:relative;" class="vp-doc _java_springboot_RabbitMQ" data-v-c4b0d3cf><div><h1 id="rabbitmq讲义" tabindex="-1">RabbitMQ讲义 <a class="header-anchor" href="#rabbitmq讲义" aria-label="Permalink to &quot;RabbitMQ讲义&quot;">​</a></h1><p><strong>引言：</strong></p><p><strong>中国被世界黑的最惨的一天</strong></p><p>2007年10月30日，北京奥运会门票面向境内公众第二阶段预售正式启动。上午一开始，公众提交申请空前踊跃。上午9时至10时，官方票务网站的浏览量达到了<strong>800万次</strong>，票务呼叫中心热线从9时至10时的呼入量超过了<strong>380万</strong>人次。由于瞬间访问数量过大，技术系统应对不畅，造成很多申购者无法及时提交申请，为此北 京奥组委票务中心对广大公众未能及时、便捷地实现奥运门票预订表示歉意。</p><p><strong>一个神奇的网站</strong></p><p><img src="/assets/image-20221022154557996.6c0a8b9e.png" alt="image-20221022154557996"></p><p><strong>大型翻车现场</strong></p><p><img src="/assets/image-20221022154818993.f6cbfaaa.png" alt="image-20221022154818993"></p><p><strong>问题现象</strong>：</p><p>1、 海量数据</p><p>2、 高并发</p><p>解决方案：其中最为代表解决方案流量削峰-》 使用MQ</p><h2 id="_1、-mq概念" tabindex="-1">1、 MQ概念 <a class="header-anchor" href="#_1、-mq概念" aria-label="Permalink to &quot;1、 MQ概念&quot;">​</a></h2><h3 id="_1-1-mq-介绍" tabindex="-1">1.1 MQ 介绍 <a class="header-anchor" href="#_1-1-mq-介绍" aria-label="Permalink to &quot;1.1 MQ 介绍&quot;">​</a></h3><p><code>MQ</code>（<code>Message Queue</code>）消息队列，是基础数据结构中<code>“先进先出”</code>的一种数据结构。一般用来解决应用解耦，异步消息，流量削峰等问题，实现高性能，高可用，可伸缩和最终一致性架构。</p><h3 id="_1-2-mq应用场景" tabindex="-1">1.2 MQ应用场景 <a class="header-anchor" href="#_1-2-mq应用场景" aria-label="Permalink to &quot;1.2 MQ应用场景&quot;">​</a></h3><p><strong><code>MQ</code>的优势</strong></p><h4 id="_1-2-1异步解耦" tabindex="-1"><strong>1.2.1异步解耦</strong> <a class="header-anchor" href="#_1-2-1异步解耦" aria-label="Permalink to &quot;**1.2.1异步解耦**&quot;">​</a></h4><p>以电商应用为例，应用中有订单系统、库存系统、物流系统、支付系统。用户创建订单后，如果耦合 调用库存系统、物流系统、支付系统，任何一个子系统出了故障，都会造成下单操作异常。当转变成基于消息队列的方式后，系统间调用的问题会减少很多，比如物流系统因为发生故障，需要几分钟来修复。在 这几分钟的时间里，物流系统要处理的内存被缓存在消息队列中，用户的下单操作可以正常完成。当物流 系统恢复后，继续处理订单信息即可，中单用户感受不到物流系统的故障，提升系统的可用性。</p><p><img src="/assets/image-20220915164029514.824cda2b.png" alt="image-20220915164029514"></p><h4 id="_1-2-2-削峰填谷" tabindex="-1"><strong>1.2.2 削峰填谷</strong> <a class="header-anchor" href="#_1-2-2-削峰填谷" aria-label="Permalink to &quot;**1.2.2 削峰填谷**&quot;">​</a></h4><p>举个例子，如果订单系统最多能处理一万次订单，这个处理能力应付正常时段的下单时绰绰有余，正 常时段我们下单一秒后就能返回结果。但是在高峰期，如果有两万次下单操作系统是处理不了的，只能限 制订单超过一万后不允许用户下单。使用消息队列做缓冲，我们可以取消这个限制，把一秒内下的订单分 散成一段时间来处理，这时有些用户可能在下单十几秒后才能收到下单成功的操作，但是比不能下单的体 验要好。</p><p><img src="/assets/image-20220915164557801.872c68fe.png" alt="image-20220915164557801"></p><h4 id="_1-2-3-消息分发" tabindex="-1">1.2.3 消息分发 <a class="header-anchor" href="#_1-2-3-消息分发" aria-label="Permalink to &quot;1.2.3 消息分发&quot;">​</a></h4><p>在实际开发中一个系统的数据有的时候需要分发个不同的系统中， 拿电商举例在双11的时候有很多会场，每一个会场可能都需要用到一个商品的数据，那么我们需要把数据分发到不同的会场中，假设有加了一个会场我们还需要把数据分发给新的会场</p><p><img src="/assets/image-20220915164727329.070fcbd9.png" alt="image-20220915164727329"></p><p><strong><code>MQ</code>的劣势</strong></p><p><img src="/assets/image-20220915165734611.ee182e00.png" alt="image-20220915165734611"></p><p><strong>系统可用性降低</strong></p><p>系统引入的外部依赖越多，系统稳定性越差。一旦<code>MQ</code> 宕机，就会对业务造成影响。如何保证<code>MQ</code>的高可用？</p><p><strong>系统复杂度提高</strong></p><p><code>MQ</code> 的加入大大增加了系统的复杂度，以前系统间是同步的远程调用，现在是通过 MQ 进行异步调用。如何保证消息没有被重复消费？怎么处理消息丢失情况？那么保证消息传递的顺序性？</p><p><strong>一致性问题</strong></p><p><code>A</code> 系统处理完业务，通过 <code>MQ</code> 给<code>B</code>、<code>C</code>、<code>D</code>三个系统发消息数据，如果 <code>B</code> 系统、<code>C</code> 系统处理成功，<code>D </code>系统处理失败。如何保证消息数据处理的一致性？</p><h3 id="_1-3-常见的消息中间件" tabindex="-1">1.3 常见的消息中间件 <a class="header-anchor" href="#_1-3-常见的消息中间件" aria-label="Permalink to &quot;1.3 常见的消息中间件&quot;">​</a></h3><p>目前市场上主流的消息中间件主要有<code>ActivitiMQ</code>、<code>RabbitMQ</code>、<code>RocketMQ、kafka</code></p><p><strong>ActivitiMQ</strong>:<code>ActiveMQ</code>是<code>Apache出品</code>,比较老的一个开源的消息中间件, 是一个完全支持<code>JMS</code>规范的消息中间件.API丰富,以前在中小企业应用广泛</p><p>MQ衡量的指标:服务性能,数据存储,集群架构</p><p><strong>RabbitMQ:</strong> <code>RabbitMQ</code> 是一个由 <code>Erlang</code> 语言开发的 <code>AMQP</code> 的开源实现。</p><p><code>AMQP</code> ：<code>Advanced Message Queue</code>，高级消息队列协议。它是应用层协议的一个开放标准，为面向消息的中间件设计，基于此协议的客户端与消息中间件可传递消息，并不受产品、开发语言等条件的限制。</p><p><code>RabbitMQ</code> 最初起源于金融系统，用于在分布式系统中存储转发消息，在易用性、扩展性、高可用性等方面表现不俗。</p><p>对数据的一致性,稳定性和可靠性要求比较高的场景</p><p><strong>RocketMQ:</strong> <code>RocketMQ</code> 是阿里巴巴在 2012 年开源的分布式消息中间件，目前已经捐赠给 <code>Apache</code> 软件基金会，并于 2017 年 9 月 25 日成为 <code>Apache </code>的顶级项目。作为经历过多次阿里巴巴双十一这种“超级工程”的洗礼并有稳定出色表现的国产中间件，以其高性能、低延时和高可靠等特性近年来已经也被越来越多的国内企业使用。</p><p><strong>Kafka:</strong> <code>Kafka</code>是由<code>Apache</code>软件基金会开发的一个开源流处理平台，由<code>Scala</code>和<code>Java</code>编写。<code>Kafka</code>是一种高吞吐量的分布式发布订阅消息系统，它可以处理消费者规模的网站中的所有动作流数据。 这种动作（网页浏览，搜索和其他用户的行动）是在现代网络上的许多社会功能的一个关键因素。 这些数据通常是由于吞吐量的要求而通过处理日志和日志聚合来解决。 对于像Hadoop一样的日志数据和离线分析系统，但又要求实时处理的限制，这是一个可行的解决方案。<code>Kafka</code>的目的是通过<code>Hadoop</code>的并行加载机制来统一线上和离线的消息处理，也是为了通过集群来提供实时的消息。</p><p><strong>常见消息中间件对比图</strong></p><p><img src="/assets/image-20220915165918406.1a781c84.png" alt="image-20220915165918406"></p><h3 id="_1-4-rabbitmq简介" tabindex="-1">1.4 RabbitMQ简介 <a class="header-anchor" href="#_1-4-rabbitmq简介" aria-label="Permalink to &quot;1.4 RabbitMQ简介&quot;">​</a></h3><p><code>AMQP</code>，即 <code>Advanced Message Queuing Protocol</code>（高级消息队列协议），是一个网络协议，是应用层协议 的一个开放标准，为面向消息的中间件设计。基于此协议的客户端与消息中间件可传递消息，并不受客户端/中 间件不同产品，不同的开发语言等条件的限制。2006年，<code>AMQP</code> 规范发布。类比<code>HTTP</code>。</p><p>2007年，<code>Rabbit</code> 技术公司基于<code> AMQP</code> 标准开发的 <code>RabbitMQ</code> 1.0 发布。<code>RabbitMQ</code> 采用 <code>Erlang</code> 语言开发。<code> Erlang</code> 语言由 <code>Ericson</code> 设计，专门为开发高并发和分布式系统的一种语言，在电信领域使用广泛。</p><h3 id="_1-5-rabbitmq中的核心概念" tabindex="-1">1.5 RabbitMQ中的核心概念 <a class="header-anchor" href="#_1-5-rabbitmq中的核心概念" aria-label="Permalink to &quot;1.5 RabbitMQ中的核心概念&quot;">​</a></h3><p><strong>Broker</strong>：接收和分发消息的应用，<code>RabbitMQ Server</code>就是<code> Message Broker</code></p><p><strong>Virtual host</strong>：出于多租户和安全因素设计的，把 <code>AMQP</code> 的基本组件划分到一个虚拟的分组中，类似于网 络中的 <code>namespace</code> 概念。当多个不同的用户使用同一个 <code>RabbitMQ server</code> 提供的服务时，可以划分出多个<code>vhost</code>，每个用户在自己的 <code>vhost</code> 创建 <code>exchange／queue</code> 等</p><p><strong>Connection</strong>：<code>publisher／consumer</code> 和<code> broker</code> 之间的 <code>TCP</code> 连接</p><p><strong>Channel</strong>：如果每一次访问 <code>RabbitMQ</code> 都建立一个 <code>Connection</code>，在消息量大的时候建立 <code>TCP Connection</code> 的开销将是巨大的，效率也较低。<code>Channel</code> 是在<code> connection</code> 内部建立的逻辑连接，如果应用程序支持多线 程，通常每个<code>thread</code>创建单独的<code> channel</code> 进行通讯，<code>AMQP method</code> 包含了<code>channel id</code> 帮助客户端和 <code>message broker</code> 识别 <code>channel</code>，所以 <code>channel</code> 之间是完全隔离的。<code>Channel</code> 作为轻量级的 <code>Connection</code> 极大减少了操作系统建立 <code>TCP connection</code> 的开销</p><p><strong>Exchange</strong>：<code>message</code> 到达<code> broker</code> 的第一站，根据分发规则，匹配查询表中的 <code>routing key</code>，分发消息到 <code>queue</code> 中去。常用的类型有：<code>direct</code> (point-to-point), <code>topic</code> (publish-subscribe) and <code>fanout</code> (multicast)</p><p><strong>Queue</strong>：消息最终被送到这里等待 <code>consumer</code> 取走</p><p><strong>Binding</strong>：<code>exchange</code> 和 <code>queue</code> 之间的虚拟连接，<code>binding</code> 中可以包含<code> routing key</code>。<code>Binding</code> 信息被保存 到 <code>exchange</code> 中的查询表中，用于<code> message</code> 的分发依据</p><p><strong>RabbitMQ架构图</strong></p><p><img src="/assets/image-20220915170202018.e0cf6b42.png" alt="image-20220915170202018"></p><h2 id="_2、rabbitmq的安装与配置" tabindex="-1">2、RabbitMQ的安装与配置 <a class="header-anchor" href="#_2、rabbitmq的安装与配置" aria-label="Permalink to &quot;2、RabbitMQ的安装与配置&quot;">​</a></h2><p><strong>步骤1 ：下载和运行</strong></p><p><a href="https://www.rabbitmq.com/" target="_blank" rel="noreferrer">https://www.rabbitmq.com/</a></p><p>安装文档参考:<a href="https://www.rabbitmq.com/download.html" target="_blank" rel="noreferrer">https://www.rabbitmq.com/download.html</a></p><p>对于rabbitmq的安装方式有很多种, 我们这里使用通过yum命令的方式进行安装, 因为rabbitmq是使用Erlang语言进行编写的, 所以我们在安装的时候需要先搭建Erlang的一个运行环境</p><p><strong>步骤2 ：安装Erlang</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">我们安装的rabbitmq的版本是3.7的,要求使用的Erlang版本必须是20.3.x的版本,我们可以去github下载对应的Erlang的对应版本https://github.com/rabbitmq/erlang-rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/rabbitmq-erlang.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Erlang</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20.3</span><span style="color:#C3E88D;">.x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># In /etc/yum.repos.d/rabbitmq-erlang.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">rabbitmq-erlang</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">rabbitmq-erlang</span></span>
<span class="line"><span style="color:#A6ACCD;">baseurl</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">https://dl.bintray.com/rabbitmq-erlang/rpm/erlang/20/el/7</span></span>
<span class="line"><span style="color:#A6ACCD;">gpgcheck</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">gpgkey</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">https://dl.bintray.com/rabbitmq/Keys/rabbitmq-release-signing-key.asc</span></span>
<span class="line"><span style="color:#A6ACCD;">repo_gpgcheck</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">enabled</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">安装命令</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">erlang</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>步骤3 ： 安装rabbitmq-server</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">导入对应的验证签名:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">rpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--import</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/rabbitmq/signing-keys/releases/download/2.0/rabbitmq-release-signing-key.asc</span></span>
<span class="line"><span style="color:#FFCB6B;">创建一个rabbitmq的仓库文件:vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repo.d/rabbitmq.repo</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">bintray-rabbitmq-server</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">bintray-rabbitmq-rpm</span></span>
<span class="line"><span style="color:#A6ACCD;">baseurl</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">https://dl.bintray.com/rabbitmq/rpm/rabbitmq-server/v3.7.x/el/7/</span></span>
<span class="line"><span style="color:#A6ACCD;">gpgcheck</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">repo_gpgcheck</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">enabled</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#FFCB6B;">安装命令</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rabbitmq-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>步骤四：开启服务</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">添加rabbitmq-server开机启动</span></span>
<span class="line"><span style="color:#FFCB6B;">chkconfig</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rabbitmq-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">on</span></span>
<span class="line"><span style="color:#FFCB6B;">启动服务:</span></span>
<span class="line"><span style="color:#FFCB6B;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rabbitmq-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span>
<span class="line"><span style="color:#FFCB6B;">停止服务</span></span>
<span class="line"><span style="color:#FFCB6B;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rabbitmq-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span></span>
<span class="line"><span style="color:#FFCB6B;">开启管理页面的插件</span></span>
<span class="line"><span style="color:#FFCB6B;">rabbitmq-plugins</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">enable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rabbitmq_management</span></span>
<span class="line"><span style="color:#FFCB6B;">rabbitmq-plugins</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">查看页面信息</span></span>
<span class="line"><span style="color:#FFCB6B;">rabbitmq-plugins</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">list</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>步骤五：开启guest用户的远程访问</strong></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/rabbitmq/rabbitmq.config</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">{rabbit，</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">{loopback_users，</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;">}</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">}</span><span style="color:#89DDFF;">]</span><span style="color:#FFCB6B;">。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_3、rabbitmq的快速入门" tabindex="-1">3、RabbitMQ的快速入门 <a class="header-anchor" href="#_3、rabbitmq的快速入门" aria-label="Permalink to &quot;3、RabbitMQ的快速入门&quot;">​</a></h2><p><code>RabbitMQ</code>提供了<code>6</code>种工作模式：简单模式，<code>work queues</code>工作队列模式，<code>Publish/Subscribe</code>发布订阅模式，<code>Routing</code>路由模式，<code>Topics</code>主题模式，<code>RPC</code>远程调用模式。（远程调用，不太算 MQ；暂不作介绍）。</p><p>官网： <a href="https://www.rabbitmq.com/getstarted.html" target="_blank" rel="noreferrer">https://www.rabbitmq.com/getstarted.html</a></p><p>入门需求： 利用生产者发送消息到MQ ,消费者消费消息 （<strong>简单模式</strong>）</p><p>操作步骤：</p><ul><li><ol><li>创建生产者工程和消费者工程<code>Helloworld</code></li></ol></li><li><ol start="2"><li>添加依赖</li></ol></li><li><ol start="3"><li>编写生产者</li></ol></li><li><ol start="4"><li>编写消费者</li></ol></li></ul><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-hPlSY" id="tab-ZvSDh36" checked="checked"><label for="tab-ZvSDh36">添加依赖</label><input type="radio" name="group-hPlSY" id="tab-uzeoS9s"><label for="tab-uzeoS9s">编写生产者</label><input type="radio" name="group-hPlSY" id="tab-0orPzHm"><label for="tab-0orPzHm">编写消费者</label></div><div class="blocks"><div class="language-xml active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">com.rabbitmq</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">amqp-client</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">5.6.0</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Send</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> QUEUE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 1. 创建一个连接工厂</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 2. 设置RabbitMQ的IP地址</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">192.168.142.129</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 3. 创建Connection对象</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 4. 创建Channel</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 5.声明队列(设置队列属性)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 第一个参数queue：队列名称</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 第二个参数durable：队列是否持久化</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 第三个参数Exclusive：排他队列，如果一个队列被声明为排他队列，该队列仅对首次声明它的连接可见，并在连接断开时自动删除。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             *     这里需要注意三点：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             *         1. 排他队列是基于连接可见的，同一连接的不同通道是可以同时访问同一个连接创建的排他队列的。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             *         2. &quot;首次&quot;，如果一个连接已经声明了一个排他队列，其他连接是不允许建立同名的排他队列的，这个与普通队列不同。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             *         3. 即使该队列是持久化的，一旦连接关闭或者客户端退出，该排他队列都会被自动删除的。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             *         这种队列适用于只限于一个客户端发送读取消息的应用场景。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 第四个参数Auto-delete：自动删除，如果该队列没有任何订阅的消费者的话，该队列会被自动删除。这种队列适用于临时队列。</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 第五个参数arguments：设置一些额外的参数</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             */</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello World!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 6. 发生消息</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 第一个参数 ：交换机的名称 （案例中没有交换机，故设置为 “”）</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 第二个参数 ：路由key （路由器）。路由器这里设置为队列的名字</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 第三个参数 ：消息属性。 目前消息没有属性，设置为null</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             * 第四个参数 ：消息的内容（使用字节数组）</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">             */</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">发送消息为 ： </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Recv</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> QUEUE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//1. 创建一个工厂</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 2. 设置RabbitMQ的IP地址</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">192.168.142.129</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 3. 创建Connection对象</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 4. 创建Channel</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 5. 设置队列属性</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> [*] 等待消息. 退出请按 CTRL+C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#A6ACCD;"> deliverCallback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">consumerTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> [x] Received &#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * 6. 使用channel去 rabbitMq 中去取消息进行消费</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * 第一个参数 ： 队列的名字</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * 第二个参数 ： 是否自动签收</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * 第三个参数 ： DeliverCallback 。当消息从mq中取出来了，会回调这个方法。 </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         *              消费者消费消息，就是在这个handler 中进行处理</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         * 第四个参数 ：CancelCallback  。 当消息取消了，会回调这个方法</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">         */</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> deliverCallback</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> consumerTag </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div></div></div><h2 id="_4、rabbitmq的常见工作模式" tabindex="-1">4、RabbitMQ的常见工作模式 <a class="header-anchor" href="#_4、rabbitmq的常见工作模式" aria-label="Permalink to &quot;4、RabbitMQ的常见工作模式&quot;">​</a></h2><h3 id="_4-1-work-queues-工作队列模式" tabindex="-1"><strong>4.1 Work queues 工作队列模式</strong> <a class="header-anchor" href="#_4-1-work-queues-工作队列模式" aria-label="Permalink to &quot;**4.1 Work queues 工作队列模式**&quot;">​</a></h3><h4 id="_4-1-1-模式说明" tabindex="-1"><strong>4.1.1 模式说明</strong> <a class="header-anchor" href="#_4-1-1-模式说明" aria-label="Permalink to &quot;**4.1.1 模式说明**&quot;">​</a></h4><p>通过<code>Helloworld</code>工程我们已经能够构建一个简单的消息队列的基本项目，项目中存在几个角色:生产者、消费者、队列，而对于我们真实的开发中 ，对于消息的消费者通常是有多个的。</p><p>比如在实现用户注册功能时，用户注册成功，会给相对应用户发送邮件，同时给用户发送手机短信，告诉用户已成功注册网站或者<code>app</code> 应用，这种功能在大部分项目开发中都比较常见，而对于<code>helloworld</code> 的应用中虽然能够对 消息进行消费，但是有很大问题: 消息消费者只有一个，当消息量非常大时，单个消费者处理消息就会变得很慢，同时给节点也带来很大压力，导致消息堆积越来越多。对于这种情况，<code>RabbitMQ</code> 提供了工作 <strong>工作队列模式</strong>，通过工作队列提供多个消费者，对<code>MQ</code>产生的消息进行消费，提高<code>MQ</code>消息的吞吐率，降低消息的处理时间。处理模型图如下。</p><p><img src="/assets/image-20220915172452377.5aacbf3d.png" alt="image-20220915172452377"></p><h4 id="_4-1-2-实现步骤" tabindex="-1">4.1.2 实现步骤 <a class="header-anchor" href="#_4-1-2-实现步骤" aria-label="Permalink to &quot;4.1.2 实现步骤&quot;">​</a></h4><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-aIlii" id="tab-ZbyXeJB" checked="checked"><label for="tab-ZbyXeJB">生产者</label><input type="radio" name="group-aIlii" id="tab-SIHIzhh"><label for="tab-SIHIzhh">消费者1</label><input type="radio" name="group-aIlii" id="tab-CXj01q2"><label for="tab-CXj01q2">消费者2</label></div><div class="blocks"><div class="language-java active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">MessageProperties</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Send</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> QUEUE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">work_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// 声明消息队列</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//  发生20条消息</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">++)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello rabbitmq</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                    QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                    MessageProperties</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PERSISTENT_TEXT_PLAIN</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                    message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">zhug</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">*</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> QUEUE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">work_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1:等待消息。。。。。</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">         </span><span style="color:#676E95;font-style:italic;">// 自动签收（第二个参数 true）</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DeliverCallback</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handle</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Delivery</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                            Thread</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1000</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">InterruptedException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                            </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RuntimeException</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1：消息内容为：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">()));</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CancelCallback</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handle</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1消息取消 ： </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> s</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">zhug</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">*</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> QUEUE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">work_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#A6ACCD;">         System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2:等待消息。。。。。</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 自动签收（第二个参数 true）</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DeliverCallback</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handle</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Delivery</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                            Thread</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">2000</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">InterruptedException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                            </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RuntimeException</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2：消息内容为：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">()));</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CancelCallback</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handle</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2消息取消 ： </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> s</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div></div></div><h4 id="_4-1-3-简单问题说明" tabindex="-1"><strong>4.1.3 简单问题说明</strong> <a class="header-anchor" href="#_4-1-3-简单问题说明" aria-label="Permalink to &quot;**4.1.3 简单问题说明**&quot;">​</a></h4><p>从结果可以看出消息被平均分配到两个消费方，来对消息进行处理，提高了消息处理效率，创建多个消费者来对消息进行处理。这里<code>RabitMQ</code>采用<strong>轮询</strong>来对消息进行分发时保证了消息被平均分配到每个消费方 。</p><p>但是引入新的问题:真正的生产环境下，对于消息的处理基本不会像我们现在看到的这样，每个消 费方处理的消息数量是平均分配的，比如因为网络原因，机器cpu ，内存等硬问题，消费方处理消息时 同类消息不同机器进行处理时消耗时间也是不一样的，比如<code>1</code>号消费者消费1条消息时1秒，<code>2</code>号消费者消费<code>1</code>条消息是5秒，对于<code>1</code>号消费者比<code>2</code>号消费者处理消息快，那么在分配消息时就应该让<code>1</code>号消费者多收 到消息进行处理，也即是我们通常所说的<strong>能者多劳</strong>,同样<code>Rabbitmq</code>对于这种消息分配模式提供了支持。</p><p>问题： 任务量很大，消息虽然得到了及时的消费，单位时间内消息处理速度加快，提高了吞吐量，可 是不同消费者处理消息的时间不同，导致部分消费者的资源被浪费。</p><p><strong>解决：采用消息公平分发。</strong></p><p>总结：工作队列消息轮询分发消费者收到的消息数量平均分配，单位时间内消息处理速度加快，提高了吞吐量。</p><h4 id="_4-4-工作模式队列-消息公平分发-fair-dispatch" tabindex="-1"><strong>4.4 工作模式队列-消息公平分发(fair dispatch)</strong> <a class="header-anchor" href="#_4-4-工作模式队列-消息公平分发-fair-dispatch" aria-label="Permalink to &quot;**4.4 工作模式队列-消息公平分发(fair dispatch)**&quot;">​</a></h4><p>在案例01中对于<strong>消息分发采用的是默认轮询分发，消息应答采用的自动应答模式</strong>，这是因为当消息进 入队列，<code>RabbitMQ</code>就会分派消息。它不看消费者为应答的数目，只是盲目的将第n条消息发给第n个消费者。</p><p>为了解决这个问题，我们使用 <code>basicQos(prefetchCount = 1)</code> 方法，来限RabbitMQ只发不超过1条的消息给同一个消费者。当消息处理完毕后，有了反馈，才会进行第二次发送。执行模型图如下:</p><p><img src="/assets/image-20220915173803559.0268f1d7.png" alt="image-20220915173803559"></p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-gskA2" id="tab-xJ2oFVm" checked="checked"><label for="tab-xJ2oFVm">生产者</label><input type="radio" name="group-gskA2" id="tab-YY9844b"><label for="tab-YY9844b">消费者1</label><input type="radio" name="group-gskA2" id="tab-Rx9nPEs"><label for="tab-Rx9nPEs">消费者2</label></div><div class="blocks"><div class="language-java active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">MessageProperties</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Send</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> QUEUE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">work_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// 声明消息队列</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//  发生20条消息</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">++)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello rabbitmq</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                    QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                    MessageProperties</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PERSISTENT_TEXT_PLAIN</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                    message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">*</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> QUEUE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">work_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1:等待消息。。。。。</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 预取一个消息</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicQos</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 设置为手动签收(第二个参数 false)</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DeliverCallback</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handle</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Delivery</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                            Thread</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1000</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">InterruptedException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                            </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RuntimeException</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1：消息内容为：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">()));</span></span>
<span class="line"><span style="color:#89DDFF;">                        </span><span style="color:#676E95;font-style:italic;">// 手动签收</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEnvelope</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getDeliveryTag</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CancelCallback</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handle</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1消息取消 ： </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> s</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">*</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> QUEUE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">work_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2:等待消息。。。。。</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 预取一个消息</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicQos</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// 设置为手动签收(第二个参数 false)</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">QUEUE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DeliverCallback</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handle</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Delivery</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                            Thread</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">2000</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">InterruptedException</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                            </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RuntimeException</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2：消息内容为：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">()));</span></span>
<span class="line"><span style="color:#89DDFF;">                        </span><span style="color:#676E95;font-style:italic;">// 手动签收</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEnvelope</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getDeliveryTag</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CancelCallback</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handle</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">s</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2消息取消 ： </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> s</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div></div></div><h3 id="_4-2-pub-sub-订阅模式" tabindex="-1">4.2 <strong>Pub/Sub 订阅模式</strong> <a class="header-anchor" href="#_4-2-pub-sub-订阅模式" aria-label="Permalink to &quot;4.2 **Pub/Sub 订阅模式**&quot;">​</a></h3><h4 id="_4-2-1-模式说明" tabindex="-1"><strong>4.2.1. 模式说明</strong> <a class="header-anchor" href="#_4-2-1-模式说明" aria-label="Permalink to &quot;**4.2.1. 模式说明**&quot;">​</a></h4><p><img src="/assets/image-20220916110732471.bb98fd85.png" alt="image-20220916110732471"></p><p>在订阅模型中，多了一个 <code>Exchange</code> 角色，而且过程略有变化：</p><p><strong>P</strong>：生产者，也就是要发送消息的程序，但是不再发送到队列中，而是发给<code>X</code>（交换机）</p><p><strong>C</strong>：消费者，消息的接收者，会一直等待消息到来</p><p><strong>Queue</strong>：消息队列，接收消息、缓存消息</p><p><strong>Exchange</strong>：交换机（<code>X</code>）。一方面，接收生产者发送的消息。另一方面，知道如何处理消息，例如递交给某个特别队列、</p><p>递交给所有队列、或是将消息丢弃。到底如何操作，取决于<code>Exchange</code>的类型。<code>Exchange</code>有常见以下<code>3</code>种类型：</p><p>➢ <strong>Fanout</strong>：广播，将消息交给所有绑定到交换机的队列</p><p>➢ <strong>Direct</strong>：定向，把消息交给符合指定<code>routing key</code> 的队列</p><p>➢ <strong>Topic</strong>：通配符，把消息交给符合<code>routing pattern</code>（路由模式） 的队列</p><p><strong>Exchange</strong>（交换机）只负责转发消息，不具备存储消息的能力，因此如果没有任何队列与<code> Exchange</code> 绑定，或者没有符合路由规则的队列，那么消息会丢失！</p><h4 id="_4-2-2-实现步骤" tabindex="-1">4.2.2 实现步骤 <a class="header-anchor" href="#_4-2-2-实现步骤" aria-label="Permalink to &quot;4.2.2 实现步骤&quot;">​</a></h4><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-G0Be6" id="tab-YWobkDR" checked="checked"><label for="tab-YWobkDR">生产者</label><input type="radio" name="group-G0Be6" id="tab-HW7Gw0b"><label for="tab-HW7Gw0b">消费者1</label><input type="radio" name="group-G0Be6" id="tab-UNht7pC"><label for="tab-UNht7pC">消费者2</label></div><div class="blocks"><div class="language-java active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EmitLog</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> EXCHANGE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fanout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">info: Hello World!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 生产者发送：  &#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReceiveLogs1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> EXCHANGE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fanout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> queueName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getQueue</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 消费者1 Waiting for messages. To exit press CTRL+C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#A6ACCD;"> deliverCallback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">consumerTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 消费者1 Received &#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> deliverCallback</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> consumerTag </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//  消费者1： &#39;info: Hello World!&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReceiveLogs2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> EXCHANGE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fanout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> queueName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getQueue</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 消费者2 Waiting for messages. To exit press CTRL+C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#A6ACCD;"> deliverCallback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">consumerTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 消费者2 Received &#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> deliverCallback</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> consumerTag </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//  消费者2： &#39;info: Hello World!&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></div></div><h3 id="_4-3-routing-路由模式" tabindex="-1">4.3 Routing 路由模式 <a class="header-anchor" href="#_4-3-routing-路由模式" aria-label="Permalink to &quot;4.3  Routing 路由模式&quot;">​</a></h3><h4 id="_4-3-1-模式说明" tabindex="-1">4.3.1 模式说明 <a class="header-anchor" href="#_4-3-1-模式说明" aria-label="Permalink to &quot;4.3.1 模式说明&quot;">​</a></h4><p>队列与交换机的绑定，不能是任意绑定了，而是要指定一个<code> RoutingKey</code>（路由<code>key</code>）</p><p>消息的发送方在向 <code>Exchange</code> 发送消息时，也必须指定消息的 <code>RoutingKey</code></p><p><code>Exchange</code> 不再把消息交给每一个绑定的队列，而是根据消息的 <code>Routing Key</code> 进行判断，只有队列的 <code>Routingkey</code> 与消息的 <code>Routing key</code> 完全一致，才会接收到消息</p><p><img src="/assets/image-20220916111526729.13a0c99c.png" alt="image-20220916111526729"></p><p><strong>图解</strong>：</p><p>P：生产者，向 <code>Exchange</code> 发送消息，发送消息时，会指定一个<code>routing key</code></p><p>X：<code>Exchange</code>（交换机），接收生产者的消息，然后把消息递交给与 <code>routing key</code> 完全匹配的队列</p><p>C1：消费者，其所在队列指定了需要 <code>routing key</code> 为<code> error</code> 的消息</p><p>C2：消费者，其所在队列指定了需要 <code>routing key</code> 为 <code>info</code>、<code>error</code>、<code>warning</code> 的消息</p><h4 id="_4-3-2-实现步骤" tabindex="-1">4.3.2 实现步骤 <a class="header-anchor" href="#_4-3-2-实现步骤" aria-label="Permalink to &quot;4.3.2 实现步骤&quot;">​</a></h4><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-L-agK" id="tab-YS-wGrt" checked="checked"><label for="tab-YS-wGrt">生产者</label><input type="radio" name="group-L-agK" id="tab-Yb6yPCR"><label for="tab-Yb6yPCR">消费者1</label><input type="radio" name="group-L-agK" id="tab-YR3DUle"><label for="tab-YR3DUle">消费者2</label></div><div class="blocks"><div class="language-java active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">BuiltinExchangeType</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EmitLogDirect</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> EXCHANGE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">direct_logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> BuiltinExchangeType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DIRECT</span><span style="color:#89DDFF;">);</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> severity </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">directMsg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> severity</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 生产者发送： &#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> severity </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;:&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">*</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReceiveLogsDirect1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> EXCHANGE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">direct_logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> BuiltinExchangeType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DIRECT</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> queueName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getQueue</span><span style="color:#89DDFF;">();</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">warning</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 消费者1 Waiting for messages. To exit press CTRL+C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#A6ACCD;"> deliverCallback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">consumerTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 消费者1 Received &#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEnvelope</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getRoutingKey</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;:&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> deliverCallback</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> consumerTag </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">*</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReceiveLogsDirect2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> EXCHANGE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">direct_logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> BuiltinExchangeType</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DIRECT</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> queueName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getQueue</span><span style="color:#89DDFF;">();</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">warning</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 消费者2 Waiting for messages. To exit press CTRL+C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#A6ACCD;"> deliverCallback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">consumerTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> 消费者2 Received &#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEnvelope</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getRoutingKey</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;:&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> deliverCallback</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> consumerTag </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></div></div><h3 id="_4-4-topic-模式" tabindex="-1">4.4 Topic 模式 <a class="header-anchor" href="#_4-4-topic-模式" aria-label="Permalink to &quot;4.4 Topic 模式&quot;">​</a></h3><h4 id="_4-4-1-模式介绍" tabindex="-1">4.4.1 模式介绍 <a class="header-anchor" href="#_4-4-1-模式介绍" aria-label="Permalink to &quot;4.4.1 模式介绍&quot;">​</a></h4><p><strong>Topic</strong> 类型与 <strong>Direct</strong> 相比，都是可以根据 <code>RoutingKey</code> 把消息路由到不同的队列。只不过 <code>Topic</code> 类型</p><p><strong>Exchange</strong> 可以让队列在绑定 <code>Routing key</code> 的时候使用<strong>通配符</strong>！</p><p><strong>Routingkey</strong> 一般都是有一个或多个单词组成，多个单词之间以<code>”.”</code>分割，例如： <code>item.insert </code></p><p><strong>通配符规则</strong>：<code>#</code> 匹配一个或多个词，<code>*</code> 匹配不多不少恰好1个词，例如：<code>item.#</code> 能够匹配 <code>item.insert.abc</code> 或者 <code>item.insert，item.*</code> 只能匹配 <code>item.insert</code></p><p><img src="/assets/image-20220916112757035.7cda5a5f.png" alt="image-20220916112757035"></p><p>图解：</p><p>红色 Queue：绑定的是 <code>usa.#</code> ，因此凡是以<code> usa.</code> 开头的<code> routing key</code> 都会被匹配到</p><p>黄色 Queue：绑定的是 <code>#.news</code> ，因此凡是以 <code>.news</code> 结尾的 <code>routing key</code> 都会被匹配</p><h4 id="_4-4-2-实现步骤" tabindex="-1">4.4.2 实现步骤 <a class="header-anchor" href="#_4-4-2-实现步骤" aria-label="Permalink to &quot;4.4.2 实现步骤&quot;">​</a></h4><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-Fxq4Q" id="tab--QiAICJ" checked="checked"><label for="tab--QiAICJ">生产者</label><input type="radio" name="group-Fxq4Q" id="tab-zr-zEK5"><label for="tab-zr-zEK5">消费者1</label><input type="radio" name="group-Fxq4Q" id="tab-6YBDvII"><label for="tab-6YBDvII">消费者2</label></div><div class="blocks"><div class="language-java active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EmitLogTopic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> EXCHANGE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topic_logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">             </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topic</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> routingKey </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">order.save</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//  String routingKey = &quot;order.save&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topicMsg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicPublish</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> routingKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> message</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBytes</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">生产者发送：&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> routingKey </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;:&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReceiveLogsTopic1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> EXCHANGE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topic_logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topic</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> queueName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getQueue</span><span style="color:#89DDFF;">();</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">order.*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> [消费者1] 等待消息. To exit press CTRL+C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#A6ACCD;"> deliverCallback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">consumerTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> [消费者1] 收到消息 &#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEnvelope</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getRoutingKey</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;:&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> deliverCallback</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> consumerTag </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Connection</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ReceiveLogsTopic2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> EXCHANGE_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topic_logs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">ConnectionFactory</span><span style="color:#A6ACCD;"> factory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConnectionFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setHost</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Connection</span><span style="color:#A6ACCD;"> connection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> factory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">newConnection</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> channel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createChannel</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exchangeDeclare</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topic</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> queueName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueDeclare</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getQueue</span><span style="color:#89DDFF;">();</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">queueBind</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> EXCHANGE_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user.*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> [消费者2] 等待消息. To exit press CTRL+C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">DeliverCallback</span><span style="color:#A6ACCD;"> deliverCallback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">consumerTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBody</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> [消费者2] 收到消息 &#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> delivery</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getEnvelope</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getRoutingKey</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;:&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> message </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicConsume</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">queueName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> deliverCallback</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> consumerTag </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></div></div><h3 id="_4-5-工作模式总结" tabindex="-1">4.5 工作模式总结 <a class="header-anchor" href="#_4-5-工作模式总结" aria-label="Permalink to &quot;4.5 工作模式总结&quot;">​</a></h3><p><strong>1、简单模式 HelloWorld</strong></p><p>只有一个生产者和一个消费者，不需要设置交换机（使用默认的交换机）。</p><p><strong>2、工作队列模式 Work Queue</strong></p><p>一个生产者、多个消费者（竞争关系），不需要设置交换机（使用默认的交换机）。</p><p><strong>3、发布订阅模式 Publish/subscribe</strong></p><p>需要设置类型为 <code>fanout</code> 的交换机 ，并且交换机和队列进行绑定 ，当发送消息到交换机后，交换机会将消息发送到绑定的队列。</p><p><strong>4、路由模式 Routing</strong></p><p>需要设置类型为 <code>direct</code> 的交换机 ，交换机和队列进行绑定 ， 并且指定 <code>routing key</code>，当发送消息到交换机后 ，交换机会根据 <code>routing key</code> 将消息发送到对应的队列。</p><p><strong>5、通配符模式 Topic</strong></p><p>需要设置类型为 <code>topic</code> 的交换机 ，交换机和队列进行绑定 ，并且指定通配符方式的 <code>routing key</code> ，当发送消息到交换机后 ，交换机会根据 <code>routing key</code> 将消息发送到对应的队列。</p><h2 id="_5、-springboot环境集成rabbitmq" tabindex="-1">5、 Springboot环境集成RabbitMQ <a class="header-anchor" href="#_5、-springboot环境集成rabbitmq" aria-label="Permalink to &quot;5、 Springboot环境集成RabbitMQ&quot;">​</a></h2><p>在<code>idea</code>上使用<code>Maven</code>创建一个空项目，然后在该空项目上创建两个<code>module</code> 分别对应生产者和消费者</p><h3 id="_5-1-入门案例-简单模式" tabindex="-1">5.1 入门案例（简单模式） <a class="header-anchor" href="#_5-1-入门案例-简单模式" aria-label="Permalink to &quot;5.1 入门案例（简单模式）&quot;">​</a></h3><p><strong>生产端操作步骤：</strong></p><ol><li><p>创建生产者<code>SpringBoot</code>工程</p></li><li><p>引入<code>start</code>依赖坐标</p></li></ol><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.boot</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-boot-starter-web</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">2.7.17</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.boot</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-boot-starter-amqp</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">2.7.18</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">com.rabbitmq</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">amqp-client</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">5.20.0</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ol><li><p>编写<code>yml</code>配置，基本信息配置</p></li><li><p>定义交换机，队列以及绑定关系的配置类</p></li><li><p>注入<code>RabbitTemplate</code>，调用方法，完成消息发送</p></li></ol><p><strong>生产者</strong></p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">core</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">beans</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">factory</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Autowired</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RestController</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SendController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Autowired</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#A6ACCD;"> rabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/sendMsg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sendMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// convertAndSend 三个参数：交换机名，队列名，消息体</span></span>
<span class="line"><span style="color:#A6ACCD;">        rabbitTemplate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">convertAndSend</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">boot_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">发送成功</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>消费端操作步骤：</strong></p><p><strong>消费端</strong></p><ol><li><p>创建消费者<code>SpringBoot</code>工程</p></li><li><p>引入<code>start</code>依赖坐标</p></li></ol><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.boot</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-boot-starter-amqp</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="3"><li><p>编写<code>yml</code>配置，基本信息配置</p></li><li><p>定义监听类，使用<code>@RabbitListener</code>注解完成队列监听。</p></li></ol><p><strong>消费者</strong></p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">stereotype</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Component</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">queuesToDeclare</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">boot_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">consumer</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">InterruptedException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消息内容为 ：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>浏览器访问<code>http://localhost:8081/sendMsg?msg=hellowbootsss</code> 发送消息，消费者收到消息会打印到控制台。</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>仅仅写生产者，在<code>RabbitMq</code>图形化界面不会出现消息队列。需要写上消费者，<code>RabbitMq</code>图形化界面才会出现消息队列。</p></div><h3 id="_5-2-work-queues模式" tabindex="-1">5.2 Work queues模式 <a class="header-anchor" href="#_5-2-work-queues模式" aria-label="Permalink to &quot;5.2 Work queues模式&quot;">​</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-RE5rC" id="tab-_hL73yb" checked="checked"><label for="tab-_hL73yb">生产者</label><input type="radio" name="group-RE5rC" id="tab-ywFPR0J"><label for="tab-ywFPR0J">消费者1</label><input type="radio" name="group-RE5rC" id="tab-hhrgjWU"><label for="tab-hhrgjWU">消费者2</label><input type="radio" name="group-RE5rC" id="tab-tRZEuEU"><label for="tab-tRZEuEU">消费者配置项</label></div><div class="blocks"><div class="language-java active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">core</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">beans</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">factory</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Autowired</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RestController</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SendController2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Autowired</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#A6ACCD;"> rabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/work</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sendMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">++)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">            rabbitTemplate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">convertAndSend</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">boot_work_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">发送成功</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">support</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">AmqpHeaders</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">stereotype</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Component</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">queuesToDeclare</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">boot_work_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">consumer</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AmqpHeaders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DELIVERY_TAG</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">channel</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">InterruptedException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        Thread</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">2000</span><span style="color:#89DDFF;">);</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1 ： 消息内容为:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deliverTag</span><span style="color:#89DDFF;">,true);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">zhug</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">_02_work</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">support</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">AmqpHeaders</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">stereotype</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Component</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Consumer2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">queuesToDeclare</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">boot_work_queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">consumer</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AmqpHeaders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DELIVERY_TAG</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">channel</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">InterruptedException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        Thread</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1000</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2 ： 消息内容为:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deliverTag</span><span style="color:#89DDFF;">,true);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-properties line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#签收模式配置</span></span>
<span class="line"><span style="color:#F07178;">spring.rabbitmq.listener.simple.acknowledge-mode</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">manual </span><span style="color:#676E95;font-style:italic;">#手动签收模式</span></span>
<span class="line"><span style="color:#F07178;">spring.rabbitmq.listener.simple.prefetch</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">1 </span><span style="color:#676E95;font-style:italic;">#设置队列的预取数量</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div></div><p>浏览器访问<code>http://localhost:8081/work?msg=hellowboot</code> ，会将消息发送到<code>boot_work_queue</code>队列中，然后<code>Consumer1</code>和<code>Consumer2</code>会消费消息。 <code>Consumer2</code>消费能力高，会拿到更多的消息。</p><h3 id="_5-3-pub-sub模式" tabindex="-1"><strong>5.3 Pub/Sub模式</strong> <a class="header-anchor" href="#_5-3-pub-sub模式" aria-label="Permalink to &quot;**5.3 Pub/Sub模式**&quot;">​</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-Mohhu" id="tab-dVNER6Z" checked="checked"><label for="tab-dVNER6Z">生产者</label><input type="radio" name="group-Mohhu" id="tab-pkvazhv"><label for="tab-pkvazhv">消费者1</label><input type="radio" name="group-Mohhu" id="tab--j7Xhu7"><label for="tab--j7Xhu7">消费者2</label></div><div class="blocks"><div class="language-java active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">core</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">beans</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">factory</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Autowired</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RestController</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">PubsunSendController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Autowired</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#A6ACCD;"> rabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/pubsub</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sendMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        rabbitTemplate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">convertAndSend</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pubsubExchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">发送成功</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">support</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">AmqpHeaders</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">stereotype</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Component</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">PubsubConsumer1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">(</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">bindings</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">(</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">exchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pubsubExchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fanout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">)</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">receiveMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AmqpHeaders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DELIVERY_TAG</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">channel</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1 ： </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">support</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">AmqpHeaders</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">stereotype</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Component</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">PubsubConsumer2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">(</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">bindings</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">(</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">exchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pubsubExchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fanout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">)</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">receiveMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AmqpHeaders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DELIVERY_TAG</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">channel</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2 ： </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></div></div><p>浏览器访问<code>http://localhost:8081/pubsub?msg=hello</code>，两个消费者都收到了相同的消息<code>hello</code>,并打印在控制台。</p><h3 id="_5-4-routing模式" tabindex="-1">5.4 Routing模式 <a class="header-anchor" href="#_5-4-routing模式" aria-label="Permalink to &quot;5.4 Routing模式&quot;">​</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-Cn35t" id="tab-FSZreTm" checked="checked"><label for="tab-FSZreTm">生产者</label><input type="radio" name="group-Cn35t" id="tab-TRVLT8d"><label for="tab-TRVLT8d">消费者1</label><input type="radio" name="group-Cn35t" id="tab-1vztwE9"><label for="tab-1vztwE9">消费者2</label></div><div class="blocks"><div class="language-java active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">core</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">beans</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">factory</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Autowired</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RestController</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">RoutingSendController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Autowired</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#A6ACCD;"> rabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/routing</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sendMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        rabbitTemplate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">convertAndSend</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routingExchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">发送成功</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">support</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">AmqpHeaders</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">stereotype</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Component</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">RoutingConsumer1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bindings</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">exchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routingExchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">direct</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">),</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">key</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">warn</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">receiveMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AmqpHeaders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DELIVERY_TAG</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">channel</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1- 消息内容为 ： </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">support</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">AmqpHeaders</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">stereotype</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Component</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">RoutingConsumer2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bindings</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">exchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routingExchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">direct</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">),</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">key</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">receiveMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AmqpHeaders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DELIVERY_TAG</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">channel</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2- 消息内容为 ： </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></div></div><p>浏览器访问<code>http://localhost:8081/routing?msg=hello&amp;key=info</code>,消费者1和消费者2都可以收到消息。 浏览器访问<code>http://localhost:8081/routing?msg=hello&amp;key=warn</code> 只有消费者1收到消息</p><h3 id="_5-5-topic模式" tabindex="-1">5.5 Topic模式 <a class="header-anchor" href="#_5-5-topic模式" aria-label="Permalink to &quot;5.5 Topic模式&quot;">​</a></h3><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-j7O3h" id="tab-DxvpKnd" checked="checked"><label for="tab-DxvpKnd">生产者</label><input type="radio" name="group-j7O3h" id="tab-4jgg6Z2"><label for="tab-4jgg6Z2">消费者1</label><input type="radio" name="group-j7O3h" id="tab-s_KTNJC"><label for="tab-s_KTNJC">消费者2</label></div><div class="blocks"><div class="language-java active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">core</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">beans</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">factory</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Autowired</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">web</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">bind</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RestController</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TopicSendController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Autowired</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">private</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RabbitTemplate</span><span style="color:#A6ACCD;"> rabbitTemplate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">GetMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/topic</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sendMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        rabbitTemplate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">convertAndSend</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topicExchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">发送成功</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">support</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">AmqpHeaders</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">stereotype</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Component</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TopicConsumer1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bindings</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">exchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topicExchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topic</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">),</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">key</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">employee.*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">receiveMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AmqpHeaders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DELIVERY_TAG</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">channel</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者1-消息内容为employee：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">com</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbitmq</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">client</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Channel</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">rabbit</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">amqp</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">support</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">AmqpHeaders</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">messaging</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">annotation</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">org</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">springframework</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">stereotype</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Component</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">java</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">io</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TopicConsumer2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RabbitListener</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">bindings</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">QueueBinding</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Queue</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">exchange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Exchange</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topicExchange</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">topic</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">),</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">key</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user.*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">receiveMsg</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">msg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">AmqpHeaders</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DELIVERY_TAG</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">long</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Channel</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">channel</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">消费者2-消息内容为user：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        channel</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basicAck</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">deliverTag</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></div></div><p>浏览器访问<code>http://localhost:8081/topic?msg=hello&amp;key=employee.save</code>消费者1可以收到消息 浏览器访问<code>http://localhost:8081/topic?msg=hello&amp;key=user.save</code> 消费者2可以收到消息</p><h2 id="_6-、-rabbitmq实战案例" tabindex="-1">6 、 RabbitMQ实战案例 <a class="header-anchor" href="#_6-、-rabbitmq实战案例" aria-label="Permalink to &quot;6 、 RabbitMQ实战案例&quot;">​</a></h2><h3 id="_6-1-案例一-下单加积分" tabindex="-1">6.1 案例一 - 下单加积分 <a class="header-anchor" href="#_6-1-案例一-下单加积分" aria-label="Permalink to &quot;6.1  案例一 - 下单加积分&quot;">​</a></h3><p>需求： 用户进行下单操作 ， 下完单以后要进行加积分操作， 要求下完单以后加积分采用<code>RabbitMQ</code> 进行加积分</p><p><strong>案例分析：</strong></p><p>1 : 下完单以后把数据封装成消息利用生产者发送消息到<code>RabbitMQ</code>中。</p><p>2：在积分服务编写消费者实时监听<code>RabbitMQ</code>队列中消息，监听到取出消息消费加积分。</p><p><strong>没有RabbitMQ之前</strong></p><p><img src="/assets/image-20220916120956235.7163f14a.png" alt="image-20220916120956235"></p><p><strong>有了RabbitMQ以后</strong></p><p><img src="/assets/image-20220916115447924.cb4af869.png" alt="image-20220916115447924"></p><p>代码实现</p><h3 id="_6-2-案例二-秒杀下单操作" tabindex="-1">6.2 案例二 - 秒杀下单操作 <a class="header-anchor" href="#_6-2-案例二-秒杀下单操作" aria-label="Permalink to &quot;6.2 案例二 -  秒杀下单操作&quot;">​</a></h3><p>需求： 电商平台进行秒杀活动，用户点击下单秒杀商品进行下单，要求用<code>RabbitMQ</code>进行削峰填谷。</p><p><img src="/assets/image-20220916120332624.e397b275.png" alt="image-20220916120332624"></p><p><strong>有了RabbitMQ以后</strong></p><p><img src="/assets/image-20220916120546739.23e71733.png" alt="image-20220916120546739"></p><p>代码实现</p><h2 id="_7、-rabbitmq高频面试题" tabindex="-1">7、 RabbitMQ高频面试题 <a class="header-anchor" href="#_7、-rabbitmq高频面试题" aria-label="Permalink to &quot;7、 RabbitMQ高频面试题&quot;">​</a></h2><h3 id="_7-1-rabbitmq如果出现消息重复消费怎么解决" tabindex="-1">7.1 RabbitMQ如果出现消息重复消费怎么解决 <a class="header-anchor" href="#_7-1-rabbitmq如果出现消息重复消费怎么解决" aria-label="Permalink to &quot;7.1 RabbitMQ如果出现消息重复消费怎么解决&quot;">​</a></h3><p>采用<strong>幂等性</strong>解决：幂等性指一次和多次请求某一个资源，对于资源本身应该具有同样的结果。也就是说，其任意多次执行对资源本身所产生的影响均与一次执行的影响相同。</p><p>在<code>MQ</code>中指，消费多条相同的消息，得到与消费该消息一次相同的结果。</p><h3 id="_7-2-rabbitmq中的死信队列" tabindex="-1">7.2 RabbitMQ中的死信队列 <a class="header-anchor" href="#_7-2-rabbitmq中的死信队列" aria-label="Permalink to &quot;7.2 RabbitMQ中的死信队列&quot;">​</a></h3><p>死信队列，英文缩写：<code>DLX</code> 。<code>Dead Letter Exchange</code>（死信交换机），当消息成为<code>Dead message</code>后，可以被重新发送到另一个交换机，这个交换机就是<code>DLX</code>。</p><p><img src="/assets/image-20220920173716856.1a34c1ef.png" alt="image-20220920173716856"></p><p><strong>消息成为死信的三种情况：</strong></p><ol><li><p>队列消息长度到达限制；</p></li><li><p>消费者拒接消费消息，<code>basicNack/basicReject</code>,并且不把消息重新放入原目标队列,<code>requeue=false</code>；</p></li><li><p>原队列存在消息过期设置，消息到达超时时间未被消费；</p></li></ol><h3 id="_7-3-rabbitmq-怎么实现消息可靠性" tabindex="-1">7.3 RabbitMQ 怎么实现消息可靠性 <a class="header-anchor" href="#_7-3-rabbitmq-怎么实现消息可靠性" aria-label="Permalink to &quot;7.3 RabbitMQ 怎么实现消息可靠性&quot;">​</a></h3><h4 id="_7-3-1-生产者投递可靠性" tabindex="-1"><strong>7.3.1 生产者投递可靠性</strong> <a class="header-anchor" href="#_7-3-1-生产者投递可靠性" aria-label="Permalink to &quot;**7.3.1 生产者投递可靠性**&quot;">​</a></h4><p>在使用 <code>RabbitMQ</code> 的时候，作为消息发送方希望杜绝任何消息丢失或者投递失败场景。<code>RabbitMQ</code> 为我们提供了两种方式用来控制消息的投递可靠性模式。</p><p><code>confirm</code> 确认模式</p><p><code>return</code> 退回模式</p><p><code>rabbitmq</code> 整个消息投递的路径为：</p><p><code>producer</code>---&gt;<code>rabbitmq broker</code>---&gt;<code>exchange</code>---&gt;<code>queue</code>---&gt;<code>consumer</code> 消息从 <code>producer</code> 到 <code>exchange</code> 则会返回一个 <code>confirmCallback</code> 。 消息从 <code>exchange</code>--&gt;<code>queue</code> 投递失败则会返回一个 <code>returnCallback</code> 。</p><p>我们将利用这两个 <code>callback</code> 控制消息的可靠性投递</p><h4 id="_7-3-2-消费者投递可靠性" tabindex="-1"><strong>7.3.2 消费者投递可靠性</strong> <a class="header-anchor" href="#_7-3-2-消费者投递可靠性" aria-label="Permalink to &quot;**7.3.2 消费者投递可靠性**&quot;">​</a></h4><p><code>ack</code>指<code>Acknowledge</code>，确认。 表示消费端收到消息后的确认方式。</p><p><strong>有三种确认方式：</strong></p><p>• 自动确认：<code>acknowledge=&quot;none&quot; </code></p><p>• 手动确认：<code>acknowledge=&quot;manual&quot; </code></p><p>• 根据异常情况确认：<code>acknowledge=&quot;auto&quot;</code>，（这种方式使用麻烦，不作讲解）</p><p>其中自动确认是指，当消息一旦被<code>Consumer</code>接收到，则自动确认收到，并将相应<code> message</code> 从 <code>RabbitMQ</code> 的消息缓存中移除。但是在实际业务处理中，很可能消息接收到，业务处理出现异常，那么该消息就会丢失。如果设置了手动确认方式，则需要在业务处理成功后，调用<code>channel.basicAck()</code>，手动签收，如果出现异常，则调用<code>channel.basicNack()</code>方法，让其自动重新发送消息。</p><h3 id="_7-4-rabbitmq-如何实现延迟队列" tabindex="-1">7.4 RabbitMQ 如何实现延迟队列 <a class="header-anchor" href="#_7-4-rabbitmq-如何实现延迟队列" aria-label="Permalink to &quot;7.4  RabbitMQ 如何实现延迟队列&quot;">​</a></h3><p>延迟队列，即消息进入队列后不会立即被消费，只有到达指定时间后，才会被消费</p><p>需求：</p><ol><li><p>下单后，<code>30</code>分钟未支付，取消订单，回滚库存。</p></li><li><p>新用户注册成功<code>7</code>天后，发送短信问候。</p></li></ol><p>实现方式：</p><ol><li><p>定时器</p></li><li><p>延迟队列</p></li></ol><p><strong>使用延时队列实现</strong></p><p><img src="/assets/image-20220920174004476.a58c33a2.png" alt="image-20220920174004476"></p><ol><li><p>延迟队列 指消息进入队列后，可以被延迟一定时间，再进行消费。</p></li><li><p><code>RabbitMQ</code>没有提供延迟队列功能，但是可以使用 ： <code>TTL + DLX</code> 来实现延迟队列效果。</p></li></ol></div></div></main><footer class="VPDocFooter" data-v-c4b0d3cf data-v-face870a><!--[--><!--]--><div class="edit-info" data-v-face870a><!----><div class="last-updated" data-v-face870a><p class="VPLastUpdated" data-v-face870a data-v-7b3ebfe1>Last updated: <time datetime="2024-01-25T12:30:59.000Z" data-v-7b3ebfe1></time></p></div></div><div class="prev-next" data-v-face870a><div class="pager" data-v-face870a><a class="pager-link prev" href="/java/springboot/OpenFeign.html" data-v-face870a><span class="desc" data-v-face870a>上一页</span><span class="title" data-v-face870a>OpenFeign</span></a></div><div class="has-prev pager" data-v-face870a><a class="pager-link next" href="/java/springboot/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6RocketMQ.html" data-v-face870a><span class="desc" data-v-face870a>下一页</span><span class="title" data-v-face870a>消息中间件RocketMQ</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-b2cf3e0b data-v-2f86ebd2><div class="container" data-v-2f86ebd2><p class="message" data-v-2f86ebd2>Released under the MIT License.</p><p class="copyright" data-v-2f86ebd2>Copyright© 2021-2023 zhug</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"@pages_tagspage.md\":\"ef64b173\",\"css和less_css和css3_bfc.md\":\"f76b091f\",\"css和less_css和css3_rem和em的区别.md\":\"85bf2e21\",\"http协议_post提交数据四种常见数据格式.md\":\"f51eaf7c\",\"css和less_less_混合.md\":\"8b6b9d4d\",\"js和ts_es5_js事件循环机制.md\":\"79542735\",\"css和less_css和css3_重绘和回流.md\":\"33e10e11\",\"css和less_less_变量.md\":\"4b7fad65\",\"js和ts_es5_return_continue_break.md\":\"f3a7e66b\",\"css和less_css和css3_盒模型.md\":\"753b417c\",\"css和less_less_转义.md\":\"3889111d\",\"js和ts_es5_instanceof的实现.md\":\"5de4b5f8\",\"css和less_css和css3_瀑布流布局.md\":\"7c92e0d7\",\"@pages_categoriespage.md\":\"bcc580bf\",\"css和less_less_映射.md\":\"f4ade592\",\"js和ts_es5_js垃圾回收机制.md\":\"3e8f3f4d\",\"css和less_css和css3_文本超出省略.md\":\"96f75a57\",\"css和less_css和css3_弹幕屏.md\":\"1c8d9de5\",\"css和less_less_导入.md\":\"11bd654c\",\"css和less_css和css3_吸顶.md\":\"f99f04ce\",\"css和less_less_嵌套.md\":\"8a720530\",\"css和less_css和css3_rem弹性布局.md\":\"25f1c23e\",\"http协议_get与post的区别.md\":\"1a8e368d\",\"js和ts_es5_function.md\":\"5e85ab8f\",\"css和less_css和css3_伪类和伪元素.md\":\"551688e2\",\"@pages_archivespage.md\":\"ee12463d\",\"http协议_常见的http状态码.md\":\"e51648b3\",\"js和ts_es5_new.md\":\"6502fabd\",\"js和ts_es5_apply.md\":\"e101c05e\",\"css和less_less_函数.md\":\"0b7fa2fd\",\"js和ts_es5_深拷贝和浅拷贝.md\":\"6ea78a0b\",\"http协议_从输入一个 url 地址到浏览器完成渲染的整个过程.md\":\"08031705\",\"js和ts_es5_bind.md\":\"17260e13\",\"css和less_css和css3_移动端适配.md\":\"d89179d9\",\"css和less_css和css3_按钮效果.md\":\"a9486336\",\"css和less_css和css3_等高布局.md\":\"b7b146ef\",\"js和ts_es5_call.md\":\"75260bc8\",\"css和less_less_运算.md\":\"e10d109a\",\"js和ts_es5_原型和原型链.md\":\"95b4fbe0\",\"js和ts_es6_变量的解构赋值.md\":\"af41bd70\",\"css和less_css和css3_css画一个三角形.md\":\"b3b2d8af\",\"js和ts_es5_异常处理.md\":\"3f16d298\",\"css和less_css和css3_css3动画.md\":\"2cdd22e5\",\"http协议_http与https的区别.md\":\"0e5f7b86\",\"js和ts_es6_generator.md\":\"4bc0ae09\",\"js和ts_es5_偏函数.md\":\"245fe564\",\"js和ts_es5_html本地存储.md\":\"0523be02\",\"js和ts_es6_class继承.md\":\"5f611225\",\"css和less_css和css3_css3过渡.md\":\"5e9c19ba\",\"css和less_css和css3_响应式布局方案.md\":\"0bedb4d9\",\"js和ts_es5_面向对象的程序设计.md\":\"6e3c2b51\",\"js和ts_es6_数组的扩展.md\":\"446e9abd\",\"css和less_css和css3_水平和垂直居中.md\":\"b26bd3fb\",\"http协议_tcp和udp的区别.md\":\"ac75e1cf\",\"js和ts_es6_async和await.md\":\"5cbd5e96\",\"js和ts_es6_iterator.md\":\"cf3ed7d9\",\"java_mysql_数学函数.md\":\"0313967d\",\"java_mysql_sql语言.md\":\"f1ea34fd\",\"css和less_css和css3_圣杯布局和双飞翼布局.md\":\"b93bea29\",\"css和less_css和css3_grid布局.md\":\"7cdf97f9\",\"java_java_集合简介.md\":\"4b75ec55\",\"java_java_门面模式.md\":\"6eb3b618\",\"js和ts_es5_函数柯里化.md\":\"d87bfa7c\",\"js和ts_es6_class基础.md\":\"3a809a54\",\"java_springboot_redis.md\":\"aed37270\",\"js和ts_es5_es5继承.md\":\"1b677eba\",\"js和ts_es5_reduce方法.md\":\"5ffd013a\",\"js和ts_es6_函数的扩展.md\":\"b20fd7c7\",\"js和ts_es6_对象的新增方法.md\":\"ad6d5013\",\"js和ts_typescript_类型推论.md\":\"16e06774\",\"js和ts_es6_promise.md\":\"89def003\",\"css和less_css和css3_flex布局.md\":\"ff683f2d\",\"java_mysql_字符串函数.md\":\"5ddd43a7\",\"css和less_less_作用域.md\":\"0c454b9b\",\"java_java_常用词汇.md\":\"f8349ff9\",\"js和ts_typescript_模块.md\":\"8a6e07dc\",\"js和ts_es5_object.md\":\"9357e3ce\",\"js和ts_es5_函数调用的四种方式.md\":\"c41d41c7\",\"css和less_less_命名空间和访问符.md\":\"022b010c\",\"java_springboot_springboot集成websocket.md\":\"e45b6dac\",\"js和ts_es5_array.md\":\"695cc706\",\"http协议_网络七层协议.md\":\"8dbd168b\",\"js和ts_typescript_基础数据类型.md\":\"ea49ca93\",\"js和ts_es6_运算符的扩展.md\":\"d279811f\",\"java_springboot_openfeign.md\":\"b5f6b25a\",\"java_java_抽象工厂模式.md\":\"db6c5dcc\",\"index.md\":\"190d63c6\",\"java_springboot_spring中常用的知识点.md\":\"feff1aa4\",\"java_springboot_quartz.md\":\"fe999762\",\"js和ts_typescript_类.md\":\"a0cff579\",\"java_mysql_统计函数.md\":\"216e4992\",\"java_java_责任链模式.md\":\"57af4c5f\",\"js和ts_typescript_接口.md\":\"e79f9dac\",\"js和ts_es6_module的加载实现.md\":\"6bd4eefd\",\"js和ts_typescript_枚举.md\":\"26e89f26\",\"java_java_docker部署java开发环境.md\":\"33c02af6\",\"js和ts_es5_闭包.md\":\"6eea1127\",\"java_java_win10配置双jdk.md\":\"6d6c6faa\",\"js和ts_es5_事件.md\":\"3e63e8b7\",\"java_java_模板方法模式.md\":\"3faaca8b\",\"java_java_list.md\":\"c57b9fa0\",\"java_ssm_spring_依赖注入的三种方式.md\":\"d61191a2\",\"js和ts_typescript_三斜线指令.md\":\"627bb82b\",\"js和ts_es6_对象的扩展.md\":\"a0b84e49\",\"java_java_idea断点调试.md\":\"d4e3a171\",\"java_mysql_存储引擎.md\":\"466c1709\",\"java_mysql_权限管理.md\":\"a573c76e\",\"java_java_代理模式.md\":\"ac6b2706\",\"java_mysql_列类型.md\":\"53687833\",\"js和ts_es6_proxy.md\":\"85d22f0c\",\"js和ts_typescript_类型工具.md\":\"be1712a2\",\"css和less_css和css3_flex布局左端对齐.md\":\"ab675b30\",\"java_mysql_流程控制.md\":\"a675644e\",\"java_java_collections.md\":\"0ed61e45\",\"java_springboot_restful.md\":\"e81083d9\",\"java_springboot_项目知识点总结.md\":\"932f9a51\",\"java_springboot_springboot缓存.md\":\"1fcdbc4b\",\"js和ts_es6_reflect.md\":\"f0e80f44\",\"js和ts_es5_作用域和作用域链.md\":\"1944aeaa\",\"java_mysql_时间和日期.md\":\"7c30f578\",\"java_java_适配器模式.md\":\"2b2ab3bb\",\"js和ts_es5_防抖和节流.md\":\"7482d7a6\",\"java_springcloudalibaba_服务治理nacosdiscover.md\":\"a37ab3f3\",\"js和ts_es5_this.md\":\"caf829af\",\"java_mysql_视图.md\":\"d8739cf3\",\"js和ts_es6_module.md\":\"2a592a02\",\"java_springcloudalibaba_远程调用负载均衡loadbalancer.md\":\"a4f78ee1\",\"js和ts_typescript_泛型.md\":\"cb36c9bb\",\"java_java_set.md\":\"c26907e3\",\"java_java_file操作.md\":\"1f2b9453\",\"java_java_stream流高级用法.md\":\"fba04928\",\"java_mysql_多表查询.md\":\"947b025b\",\"java_ssm_spring_factorybean.md\":\"2c2f7df7\",\"java_java_观察者模式.md\":\"8013f405\",\"java_springboot_springboot整合mybatis-plus.md\":\"420d07b9\",\"java_springboot_aop实现自定义注解.md\":\"add17b60\",\"java_springboot_参数校验与全局异常处理.md\":\"9e3c859e\",\"java_springcloudalibaba_远程调用openfeign.md\":\"2f806b86\",\"java_java_工厂方法模式.md\":\"7d1e2bd5\",\"modules_webpack_vue脚手架_开发模式配置.md\":\"1afd1b0c\",\"java_mysql_索引.md\":\"16759e77\",\"java_ssm_mybatis_mybatis的逆向工程.md\":\"f2eb5f5e\",\"java_mysql_内连接.md\":\"4b37d655\",\"java_ssm_spring_beanutils.md\":\"bfd25c2c\",\"java_springboot_自定义异常与全局异常处理.md\":\"c5498e5d\",\"java_mysql_表操作.md\":\"ba632e1f\",\"java_java_io流.md\":\"a48e13c1\",\"java_java_享元模式.md\":\"d92deea3\",\"数据结构和算法_数据结构_数组_练习.md\":\"ce4faa73\",\"框架_react_jsx.md\":\"8614046b\",\"modules_webpack_提升打包构建速度_hotmodulereplacement.md\":\"d08d851c\",\"java_java_方法引用.md\":\"2710952c\",\"java_springboot_springboot整合第三方.md\":\"c2c2d33b\",\"js和ts_typescript_高级类型之类型别名.md\":\"83c45315\",\"java_mysql_crud.md\":\"a7be7101\",\"java_mysql_数据库操作.md\":\"0280b079\",\"java_java_装饰器模式.md\":\"16885883\",\"java_ssm_spring_基于xml的自动装配.md\":\"a1f1379a\",\"java_java_常用知识点.md\":\"e9557949\",\"java_java_map.md\":\"74911462\",\"modules_webpack_plugin原理_调试插件.md\":\"06e01ce0\",\"框架_vuex_action.md\":\"45587c90\",\"java_java_类加载过程.md\":\"a5f2c5fc\",\"js和ts_es6_set数据结构.md\":\"9265638d\",\"java_java_单例设计模式.md\":\"cd235e64\",\"java_ssm_mybatis_mybatis的缓存.md\":\"5abd554e\",\"java_springboot_rabbitmq.md\":\"e8a6fe00\",\"js和ts_es6_map数据结构.md\":\"60b95fb2\",\"java_ssm_springmvc_搭建springmvc环境.md\":\"0a612f14\",\"数据结构和算法_数据结构_树_二叉查找树.md\":\"f221ee47\",\"框架_react_router_简介.md\":\"1b21da60\",\"数据结构和算法_算法_六大常见算法策略_回溯算法_背包问题.md\":\"14872aec\",\"java_ssm_spring_依赖注入的属性赋值.md\":\"426c20b3\",\"js和ts_typescript_函数.md\":\"5066ea06\",\"java_java_stream流.md\":\"bd3bef56\",\"java_java_equals方法.md\":\"e4d1cbaf\",\"框架_vuex_module.md\":\"4da0763f\",\"java_springboot_springboot三大器.md\":\"fec15ae7\",\"java_mysql_事务.md\":\"ae56b014\",\"数据结构和算法_算法_六大常见算法策略_分治算法_分治算法分析.md\":\"b8401f17\",\"java_ssm_mybatis_自定义映射resultmap.md\":\"1c4c610d\",\"框架_vue_scriptsetup用法.md\":\"1b3d1d5d\",\"数据结构和算法_数据结构_栈.md\":\"7b98564c\",\"java_mysql_加密函数.md\":\"e06ba908\",\"java_mysql_用户管理.md\":\"48519570\",\"框架_react_renderprops.md\":\"02d1e7f8\",\"框架_react_组件性能优化.md\":\"f68ca5b7\",\"数据结构和算法_数据结构_队列_队列.md\":\"94b01438\",\"java_ssm_springmvc_requestmapping注解.md\":\"d3d78b7e\",\"数据结构和算法_算法_编程问题_手写数组去重，扁平化.md\":\"13b44485\",\"框架_vuerouter_命名视图.md\":\"82722644\",\"数据结构和算法_算法_编程问题_拆解url问题.md\":\"aa1c6c70\",\"数据结构和算法_算法_六大常见算法策略_动态规划_背包问题.md\":\"af202b86\",\"数据结构和算法_算法_编程问题_模板渲染.md\":\"f0b4c52d\",\"数据结构和算法_数据结构_树_练习.md\":\"cf1fedae\",\"框架_react_router_案例_侧边栏.md\":\"360093cb\",\"框架_vuex_插件.md\":\"885d5f73\",\"框架_vue_provide和inject.md\":\"701392f6\",\"java_ssm_springmvc_springmvc简介.md\":\"4419c27a\",\"数据结构和算法_算法_六大常见算法策略_动态规划_硬币找零.md\":\"c65fc322\",\"java_ssm_大纲.md\":\"69f8d369\",\"框架_react_router_高阶组件withrouter.md\":\"91ae8f75\",\"modules_webpack_plugin原理_cleanwebpackplugin.md\":\"20de534b\",\"数据结构和算法_算法_字符串问题_字符串相加.md\":\"21f95faf\",\"modules_webpack_减少代码体积_babel.md\":\"cbe72c4a\",\"java_mysql_约束.md\":\"6c8ef383\",\"modules_webpack_基础_处理样式资源.md\":\"903f11cd\",\"modules_webpack_开发环境.md\":\"cc06a4c4\",\"数据结构和算法_算法_编程问题_indexof的简单实现.md\":\"79daf033\",\"数据结构和算法_算法_字符串问题_最长公共前缀.md\":\"a0d659b4\",\"框架_vuerouter_路由组件传参.md\":\"bb22ab19\",\"数据结构和算法_数据结构_字典(map).md\":\"919a20b9\",\"数据结构和算法_数据结构_列表.md\":\"dbdca46a\",\"框架_vuerouter_嵌套路由.md\":\"2556c425\",\"框架_react_router_案例_路由参数.md\":\"59362312\",\"modules_webpack_loader原理_loader的api.md\":\"528013aa\",\"框架_vuerouter_导航守卫.md\":\"c2ea2d29\",\"框架_vuex_项目结构.md\":\"69fe3274\",\"框架_react_高阶组件.md\":\"2dbadb9a\",\"框架_react_jsx语法的转化过程.md\":\"4229328e\",\"框架_react_props.md\":\"c44f301a\",\"框架_vuerouter_简介.md\":\"f7d2337d\",\"more_友情链接.md\":\"78a5ac94\",\"modules_webpack_打包分析.md\":\"50a94c4c\",\"框架_react_router_案例_递归路径.md\":\"a5393924\",\"modules_webpack_基础_处理字体图标资源.md\":\"5f75e5c9\",\"java_java_optional.md\":\"baa2dcf0\",\"java_springboot_fastjson.md\":\"5dffb12c\",\"框架_vuex_严格模式.md\":\"74d520cd\",\"框架_vuex_简介.md\":\"b81f0a42\",\"框架_vuex_mutation.md\":\"01e025ea\",\"数据结构和算法_算法_编程问题_深浅拷贝问题.md\":\"7a8cbbc9\",\"数据结构和算法_算法_排序算法_选择排序.md\":\"8c698d7a\",\"数据结构和算法_算法_查找算法_散列表查找.md\":\"40f942f4\",\"数据结构和算法_算法_查找算法_树结构查找.md\":\"8dc0745f\",\"框架_vue_v-model.md\":\"2599db99\",\"java_springcloudalibaba_服务熔断降级sentinel.md\":\"d18f0eec\",\"modules_webpack_提升打包构建速度_cache.md\":\"efaf729b\",\"java_ssm_springmvc_springmvc的视图.md\":\"d6a987c9\",\"框架_vue_antd按需加载.md\":\"d71d9b9e\",\"java_springcloudalibaba_微服务概念.md\":\"c9dfda31\",\"数据结构和算法_算法_排序算法_插入排序.md\":\"6d21005c\",\"java_springcloudalibaba_微服务环境搭建.md\":\"226fa880\",\"java_java_lambda表达式.md\":\"20370129\",\"modules_解决方案_微前端解决方案.md\":\"9a666cbb\",\"框架_vue_setup用法.md\":\"9ab86b55\",\"java_java_字符集.md\":\"9d082457\",\"数据结构和算法_算法_编程问题_闭包问题及优化.md\":\"bae9d0d1\",\"java_springboot_配置启动注解.md\":\"ebab415c\",\"modules_webpack_提升开发体验_sourcemap.md\":\"3b6f1014\",\"框架_vuerouter_路由模式.md\":\"540a456a\",\"数据结构和算法_数据结构_栈_练习.md\":\"54541e94\",\"java_ssm_mybatis_分页插件.md\":\"fc7314e7\",\"java_java_枚举类.md\":\"5bd8df28\",\"java_java_原型模式.md\":\"58f5f091\",\"java_ssm_spring_bean的作用域.md\":\"2eb3d96a\",\"数据结构和算法_数据结构_栈_栈.md\":\"40eb5c33\",\"数据结构和算法_算法_lru算法.md\":\"90ecf0ca\",\"数据结构和算法_算法_字符串问题_最长子串.md\":\"9495466a\",\"modules_webpack_资源管理之加载数据.md\":\"b2683ac2\",\"java_springcloudalibaba_服务网关gateway.md\":\"c8d7a5f4\",\"modules_webpack_基础_简介.md\":\"05943257\",\"数据结构和算法_数据结构_栈_浏览器种js运行机制.md\":\"a7ad5ecb\",\"java_ssm_spring_bean的生命周期.md\":\"04710d90\",\"modules_webpack_提升打包构建速度_oneof.md\":\"be68c7fd\",\"数据结构和算法_算法_六大常见算法策略_回溯算法_全排列问题.md\":\"88a0503e\",\"数据结构和算法_数据结构_集合(set).md\":\"f77f1bdc\",\"数据结构和算法_算法_字符串问题_翻转单词.md\":\"e3b68cb6\",\"框架_react_router_导航.md\":\"79853a3c\",\"java_ssm_spring_ioc容器.md\":\"28b22fd3\",\"框架_react_context.md\":\"ce3a1375\",\"modules_webpack_plugin原理_bannerwebpackplugin.md\":\"d1bd1ca4\",\"java_ssm_mybatis_特殊sql的执行.md\":\"a6cee00a\",\"modules_webpack_多页面.md\":\"449d12e3\",\"框架_react_react基础.md\":\"90c6c10e\",\"java_java_函数式接口.md\":\"128b59a7\",\"框架_react_router_案例_路由跳转确认.md\":\"89231e45\",\"数据结构和算法_数据结构_栈_js内存机制.md\":\"3d5aec70\",\"modules_解决方案_大屏适配方案.md\":\"46c81017\",\"数据结构和算法_算法_六大常见算法策略_分治算法_练习.md\":\"9f2cd388\",\"框架_react_组件通信.md\":\"1676b2d1\",\"数据结构和算法_算法_六大常见算法策略_动态规划_图的全源最短路劲.md\":\"6c8aa7ca\",\"java_ssm_mybatis_mybatis的各种查询功能.md\":\"6f8a70bb\",\"java_springcloudalibaba_链路追踪sleuth和zipkin.md\":\"a32cc12f\",\"框架_vuerouter_命名路由.md\":\"9377a1ec\",\"java_springboot_任务处理.md\":\"8aa3c8c3\",\"modules_webpack_基础_开启服务器.md\":\"5b904807\",\"数据结构和算法_算法_六大常见算法策略_动态规划_最小花费爬楼梯问题.md\":\"3128a842\",\"知识碎片_文件上传.md\":\"fcfef460\",\"java_springboot_常用注解.md\":\"e6920582\",\"数据结构和算法_算法_六大常见算法策略_动态规划_最长公共子序列.md\":\"52938203\",\"java_ssm_springmvc_restful.md\":\"92919af0\",\"modules_node_node搭建web服务器.md\":\"b342e8af\",\"数据结构和算法_算法_六大常见算法策略_回溯算法_八皇后问题.md\":\"be5bcb43\",\"modules_webpack_plugin原理_tapable.md\":\"8e05eecc\",\"modules_webpack_基础_处理htlm资源.md\":\"cae33b29\",\"java_ssm_springmvc_springmvc处理静态资源.md\":\"89cd0c9f\",\"modules_webpack_loader原理_手写banner-loader.md\":\"4c086b17\",\"数据结构和算法_算法_六大常见算法策略_贪心算法_练习.md\":\"231dd7c0\",\"modules_解决方案_多页面.md\":\"b43f2515\",\"java_mysql_外连接.md\":\"14307ce8\",\"modules_webpack_优化代码运行性能_network_cache.md\":\"c3fb6160\",\"框架_react_虚拟dom和diff算法.md\":\"0a69107c\",\"modules_webpack_基础_基本配置.md\":\"63c72172\",\"java_springboot_定义统一返回结果.md\":\"3e38c5eb\",\"数据结构和算法_算法_六大常见算法策略_回溯算法_深度优先遍历.md\":\"559ac399\",\"modules_解决方案_git的使用.md\":\"86826455\",\"框架_vuex_组合式api.md\":\"80056826\",\"数据结构和算法_数据结构_数组_数组基础.md\":\"86d72667\",\"java_ssm_mybatis_mybatis获取参数值的两种方式.md\":\"7eeb2bd5\",\"modules_webpack_vue脚手架_合并开发和生产环境配置.md\":\"afb6fd7c\",\"java_springboot_事务.md\":\"f0f90fe0\",\"modules_webpack_plugin原理_analyzewebpackplugin.md\":\"35ec79d1\",\"modules_webpack_loader原理_手写style-loader.md\":\"dc93151e\",\"java_springboot_springboot项目启动时预加载.md\":\"eaff6c2a\",\"数据结构和算法_算法_六大常见算法策略_动态规划_编程距离.md\":\"92ee4d98\",\"java_ssm_springmvc_异常处理器.md\":\"87de84cb\",\"java_ssm_ssm整合.md\":\"5094e139\",\"modules_webpack_plugin原理_plugin构建对象.md\":\"4f055519\",\"数据结构和算法_数据结构_树_b_树.md\":\"b84b4515\",\"modules_webpack_loader原理_手写file-loader.md\":\"37c341e4\",\"框架_react_router_案例_嵌套路由.md\":\"b73a9555\",\"modules_webpack_loader原理_手写babel-loader.md\":\"439de4fa\",\"more_面试.md\":\"6922b4f1\",\"数据结构和算法_算法_查找算法_线性表查找.md\":\"1223305d\",\"java_ssm_springmvc_文件上传和下载.md\":\"dba25f78\",\"数据结构和算法_算法_排序算法_冒泡排序.md\":\"72104e9b\",\"js和ts_typescript_高级类型.md\":\"75014390\",\"知识碎片_总结1.md\":\"f05741c9\",\"数据结构和算法_算法_广度优先搜索算法.md\":\"52f7d29a\",\"知识碎片_手写promise.md\":\"207468be\",\"数据结构和算法_算法_六大常见算法策略_回溯算法_正则匹配.md\":\"112b8783\",\"modules_node_使用nvm管理node版本.md\":\"86b27794\",\"框架_vuerouter_重定向和别名.md\":\"8a384994\",\"知识碎片_长列表渲染优化.md\":\"11c5cac6\",\"modules_webpack_减少代码体积_image_minimizer.md\":\"47acafb3\",\"数据结构和算法_算法_编程问题_手写async_await.md\":\"31c81b73\",\"数据结构和算法_数据结构_链表_练习.md\":\"e8e52193\",\"框架_react_router_案例_基础使用.md\":\"e23f36d8\",\"数据结构和算法_数据结构_树_trie树.md\":\"6a8ef37b\",\"设计模式_单例模式.md\":\"dee94111\",\"设计模式_工厂模式.md\":\"5f25d8ab\",\"数据结构和算法_数据结构_树_平衡二叉查找树.md\":\"919fc4a7\",\"数据结构和算法_数据结构_树_树.md\":\"7fe3cdea\",\"框架_vue_props.md\":\"94f27910\",\"数据结构和算法_数据结构_栈_调用栈.md\":\"a1e54354\",\"数据结构和算法_数据结构_树_红⿊树.md\":\"7fd59445\",\"modules_webpack_loader原理_手写clean-log-loader.md\":\"c8030ee6\",\"知识碎片_项目中登陆功能是怎么实现的.md\":\"5509fd1c\",\"more_学习方法.md\":\"be8718dd\",\"java_ssm_mybatis_动态sql.md\":\"e4a5e3c4\",\"框架_react_生命周期.md\":\"ec601680\",\"知识碎片_生成树形结构数据.md\":\"47238f6a\",\"知识碎片_正整数字符串相加.md\":\"92893162\",\"modules_webpack_loader原理_loader原理.md\":\"029fde3d\",\"框架_vuex_state.md\":\"fe844486\",\"数据结构和算法_数据结构_链表_循环单链表.md\":\"970aab3b\",\"modules_webpack_优化代码运行性能_preload和prefetch.md\":\"f77afd03\",\"modules_webpack_vue脚手架_其它配置.md\":\"d9ba691c\",\"modules_webpack_plugin原理_inlinechunkwebpackplugin.md\":\"3eac753c\",\"数据结构和算法_算法_六大常见算法策略_递归算法_递归.md\":\"d5b95d48\",\"数据结构和算法_算法_排序算法_计数排序.md\":\"4ffcdbf4\",\"框架_vuerouter_动态路由匹配.md\":\"1559617d\",\"java_springboot_jwt.md\":\"2e52b936\",\"modules_webpack_基础_处理js资源.md\":\"dc51d742\",\"modules_webpack_plugin原理_plugin原理.md\":\"eadbfc6b\",\"java_springboot_yaml.md\":\"b153b745\",\"java_java_注解.md\":\"8afa6a2b\",\"modules_webpack_减少代码体积_treeshaing.md\":\"ffb7ce1f\",\"modules_webpack_代码分离.md\":\"5983ebeb\",\"数据结构和算法_数据结构_树_二叉树的遍历.md\":\"16599b90\",\"知识碎片_跨域的解决方法有哪些.md\":\"1c023561\",\"java_springcloudalibaba_配置中心nacosconfig.md\":\"2e0f88ab\",\"数据结构和算法_算法_字符串问题_回文字符串.md\":\"856dcc37\",\"框架_react_router_案例_路由权限.md\":\"ada3a941\",\"数据结构和算法_数据结构_队列_滑动窗口.md\":\"7b78d59a\",\"java_ssm_spring_获取bean.md\":\"54fa55bc\",\"modules_webpack_优化代码运行性能_corejs.md\":\"d9c53b18\",\"框架_vuex_表单处理.md\":\"171a17bf\",\"modules_webpack_优化代码运行性能_code_split.md\":\"20e85943\",\"数据结构和算法_数据结构_队列_双端队列.md\":\"1543423b\",\"java_ssm_springmvc_springmvc执行流程.md\":\"770f4a2d\",\"框架_react_router_路由器.md\":\"afd01172\",\"modules_webpack_学习loader.md\":\"414a41aa\",\"java_ssm_springmvc_域对象共享数据.md\":\"ee86c6b9\",\"modules_webpack_基础_css处理.md\":\"a742df8b\",\"框架_vuerouter_路由匹配的语法.md\":\"6c8f5f0d\",\"知识碎片_数组拍平.md\":\"27597c19\",\"数据结构和算法_算法_排序算法_桶排序.md\":\"bdb66915\",\"框架_vuerouter_编程式导航.md\":\"481f4803\",\"知识碎片_promise_递归.md\":\"f9b40ec2\",\"框架_react_router_案例_无匹配404.md\":\"dcd11cdd\",\"modules_webpack_优化代码运行性能_pwa.md\":\"186fc14e\",\"框架_react_组件更新机制.md\":\"aa9a12ff\",\"框架_react_setstate.md\":\"a7b97fef\",\"框架_react_router_路由信息对象.md\":\"9e5e1dd4\",\"数据结构和算法_算法_六大常见算法策略_贪心算法_贪心算法分析.md\":\"1cb9eb36\",\"modules_webpack_loader原理_loader分类.md\":\"62dca925\",\"数据结构和算法_算法_六大常见算法策略_递归算法_练习.md\":\"581a9bc3\",\"数据结构和算法_数据结构_链表.md\":\"d2033a67\",\"java_java_策略模式.md\":\"f11e57c0\",\"modules_webpack_vue脚手架_生产模式配置.md\":\"d2826d1a\",\"框架_vue_computed.md\":\"6897b6a9\",\"框架_vue_vue插件.md\":\"97a64e8b\",\"知识碎片_js为什么是单线程.md\":\"e89a4a65\",\"数据结构和算法_算法_排序算法_快速排序.md\":\"99807ab7\",\"知识碎片_四种模块化方案.md\":\"3b8055ae\",\"java_ssm_spring_aop.md\":\"ee4ef247\",\"数据结构和算法_数据结构_树_b树.md\":\"a9f2e387\",\"java_java_建造者模式.md\":\"b41e6967\",\"数据结构和算法_数据结构_队列_练习.md\":\"21d2c5ab\",\"知识碎片_为什么说js的数组不是真正的数组，和数据结构的数组相比有什么不同.md\":\"193fa74d\",\"知识碎片_前端性能优化.md\":\"927de0f5\",\"框架_vue_teleport.md\":\"cdeb2356\",\"java_springboot_消息中间件rocketmq.md\":\"25f2a288\",\"知识碎片_值类型和引用类型赋值.md\":\"75f1ea95\",\"java_ssm_springmvc_springmvc获取请求参数.md\":\"07d0a2f5\",\"modules_webpack_管理输出.md\":\"31f5d10d\",\"框架_react_router_案例_自定义导航.md\":\"04a68b69\",\"java_ssm_spring_基于注解管理bean.md\":\"189a33b8\",\"知识碎片_如何解决异步回调地狱.md\":\"7a61736c\",\"modules_webpack_提升打包构建速度_include和exclue.md\":\"1a5e0c7b\",\"数据结构和算法_数据结构_链表_双链表.md\":\"5e1d5f43\",\"java_ssm_mybatis_mybatis核心配置文件.md\":\"71922c19\",\"框架_react_router_hooks.md\":\"b8563ccd\",\"设计模式_发布_订阅模式.md\":\"cc64685b\",\"modules_webpack_基础_处理图片和音视频资源.md\":\"9ac61635\",\"java_ssm_springmvc_springmvc处理ajax请求.md\":\"cd392ee1\",\"框架_react_router_路由匹配器.md\":\"9cdc40fb\",\"modules_webpack_提升打包构建速度_thread.md\":\"a45b662a\",\"框架_vuex_getter.md\":\"0911d97f\",\"框架_vue_生命周期钩子.md\":\"21c141ea\",\"modules_webpack_plugin原理_开发一个插件.md\":\"35221898\",\"知识碎片_es5和es6的类.md\":\"23573f91\",\"框架_vue_渲染函数.md\":\"37fcd113\",\"数据结构和算法_算法_六大常见算法策略_动态规划_爬楼梯问题.md\":\"d0336549\",\"知识碎片_vue3响应式实现.md\":\"2138e21b\",\"知识碎片_异步编程之事件循环机制.md\":\"de755510\",\"框架_vue_slot.md\":\"ff42bca2\",\"数据结构和算法_数据结构_树_二叉树.md\":\"e1587ab4\",\"数据结构和算法_算法_洗牌算法.md\":\"878b535b\",\"知识碎片_js和json的区别.md\":\"70e7d741\",\"modules_webpack_plugin原理_webpack内部的钩子.md\":\"5d5f7bae\",\"modules_node_模块.md\":\"9eff375f\",\"框架_vue_工具准备.md\":\"32c8e749\",\"框架_vue_watch和watcheffect.md\":\"3d829d04\",\"框架_vue_请求封装.md\":\"da3515f6\",\"数据结构和算法_数据结构_链表_单链表.md\":\"7770eba4\",\"知识碎片_js特性有哪些.md\":\"1e591f60\",\"java_ssm_springmvc_拦截器.md\":\"01ae6ea9\",\"java_ssm_mybatis_搭建mybatis环境.md\":\"7cd0a432\",\"java_ssm_springmvc_注解配置springmvc.md\":\"5293c362\",\"知识碎片_vue3为什么使用proxy.md\":\"5235ac24\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"zhugのブログ\",\"description\":\"zhug的博客\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"outline\":[2,4],\"outlineTitle\":\"大纲\",\"lastUpdated\":\"上次更新\",\"editLinks\":true,\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"主页\",\"link\":\"/\"},{\"text\":\"CSS和LESS\",\"items\":[{\"text\":\"CSS和CSS3\",\"link\":\"/CSS和LESS/CSS和CSS3/BFC.md\"},{\"text\":\"LESS\",\"link\":\"/CSS和LESS/LESS/变量\"}]},{\"text\":\"JS和TS\",\"items\":[{\"text\":\"ES5\",\"link\":\"/JS和TS/ES5/array.md\"},{\"text\":\"ES6\",\"link\":\"/JS和TS/ES6/变量的解构赋值.md\"},{\"text\":\"TypeScript\",\"link\":\"/JS和TS/TypeScript/基础数据类型.md\"}]},{\"text\":\"知识碎片\",\"link\":\"/知识碎片/promise&递归.md\"},{\"text\":\"前端框架\",\"items\":[{\"text\":\"Vue学习\",\"link\":\"/框架/vue/Antd按需加载\"},{\"text\":\"VueRouter学习\",\"link\":\"/框架/VueRouter/简介\"},{\"text\":\"Vuex学习\",\"link\":\"/框架/Vuex/简介\"},{\"text\":\"React学习\",\"link\":\"/框架/react/jsx.md\"},{\"text\":\"React路由\",\"link\":\"/框架/react_router/简介.md\"}]},{\"text\":\"数据结构和算法\",\"items\":[{\"text\":\"数据结构\",\"link\":\"/数据结构和算法/数据结构/数组/数组基础\"},{\"text\":\"算法\",\"link\":\"/数据结构和算法/算法/排序算法/冒泡排序\"}]},{\"text\":\"HTTP协议\",\"link\":\"/HTTP协议/get与post的区别.md\"},{\"text\":\"设计模式\",\"link\":\"/设计模式/单例模式.md\"},{\"text\":\"前端工程化\",\"items\":[{\"text\":\"webpack\",\"link\":\"/modules/webpack/基础/简介\"},{\"text\":\"node\",\"link\":\"/modules/node/node搭建web服务器\"},{\"text\":\"解决方案\",\"link\":\"/modules/解决方案/多页面\"}]},{\"text\":\"java\",\"items\":[{\"text\":\"java\",\"link\":\"/java/java/注解\"},{\"text\":\"Mysql\",\"link\":\"/java/mysql/数据库操作\"},{\"text\":\"SSM\",\"link\":\"/java/ssm/大纲\"},{\"text\":\"springboot\",\"link\":\"/java/springboot/yaml\"},{\"text\":\"springCloudAlibaba\",\"link\":\"/java/springcloudAlibaba/微服务概念\"}]},{\"text\":\"更多\",\"items\":[{\"text\":\"学习方法\",\"link\":\"/more/学习方法\"},{\"text\":\"友情链接\",\"link\":\"/more/友情链接\"},{\"text\":\"八股文\",\"link\":\"/more/面试\"}]}],\"sidebar\":{\"/CSS和LESS/CSS和CSS3\":[{\"text\":\"CSS和CSS3\",\"collapsed\":true,\"items\":[{\"text\":\"盒模型\",\"link\":\"/CSS和LESS/CSS和CSS3/盒模型.md\"},{\"text\":\"BFC\",\"link\":\"/CSS和LESS/CSS和CSS3/BFC.md\"},{\"text\":\"Flex布局\",\"link\":\"/CSS和LESS/CSS和CSS3/Flex布局.md\"},{\"text\":\"Flex布局左端对齐\",\"link\":\"/CSS和LESS/CSS和CSS3/Flex布局左端对齐.md\"},{\"text\":\"Grid布局\",\"link\":\"/CSS和LESS/CSS和CSS3/Grid布局.md\"},{\"text\":\"CSS3动画\",\"link\":\"/CSS和LESS/CSS和CSS3/CSS3动画.md\"},{\"text\":\"CSS3过渡\",\"link\":\"/CSS和LESS/CSS和CSS3/CSS3过渡.md\"},{\"text\":\"按钮效果\",\"link\":\"/CSS和LESS/CSS和CSS3/按钮效果.md\"},{\"text\":\"重绘和回流\",\"link\":\"/CSS和LESS/CSS和CSS3/重绘和回流.md\"},{\"text\":\"CSS画一个三角形\",\"link\":\"/CSS和LESS/CSS和CSS3/CSS画一个三角形.md\"},{\"text\":\"伪类和伪元素\",\"link\":\"/CSS和LESS/CSS和CSS3/伪类和伪元素.md\"},{\"text\":\"文本超出省略\",\"link\":\"/CSS和LESS/CSS和CSS3/文本超出省略.md\"},{\"text\":\"弹幕屏\",\"link\":\"/CSS和LESS/CSS和CSS3/弹幕屏.md\"},{\"text\":\"水平和垂直居中\",\"link\":\"/CSS和LESS/CSS和CSS3/水平和垂直居中.md\"},{\"text\":\"等高布局\",\"link\":\"/CSS和LESS/CSS和CSS3/等高布局.md\"},{\"text\":\"圣杯布局和双飞翼布局\",\"link\":\"/CSS和LESS/CSS和CSS3/圣杯布局和双飞翼布局.md\"},{\"text\":\"瀑布流布局\",\"link\":\"/CSS和LESS/CSS和CSS3/瀑布流布局.md\"},{\"text\":\"响应式布局方案\",\"link\":\"/CSS和LESS/CSS和CSS3/响应式布局方案.md\"},{\"text\":\"移动端适配\",\"link\":\"/CSS和LESS/CSS和CSS3/移动端适配.md\"},{\"text\":\"rem和em的区别\",\"link\":\"/CSS和LESS/CSS和CSS3/rem和em的区别.md\"},{\"text\":\"吸顶\",\"link\":\"/CSS和LESS/CSS和CSS3/吸顶.md\"}]}],\"/CSS和LESS/LESS\":[{\"text\":\"LESS\",\"collapsed\":true,\"items\":[{\"text\":\"变量（Variables）\",\"link\":\"/CSS和LESS/LESS/变量\"},{\"text\":\"混合（Mixins）\",\"link\":\"/CSS和LESS/LESS/混合\"},{\"text\":\"嵌套（Nesting）\",\"link\":\"/CSS和LESS/LESS/嵌套\"},{\"text\":\"运算（Operations）\",\"link\":\"/CSS和LESS/LESS/运算\"},{\"text\":\"转义（Escaping）\",\"link\":\"/CSS和LESS/LESS/转义\"},{\"text\":\"函数（Functions）\",\"link\":\"/CSS和LESS/LESS/函数\"},{\"text\":\"命名空间和访问符\",\"link\":\"/CSS和LESS/LESS/命名空间和访问符\"},{\"text\":\"映射（Maps）\",\"link\":\"/CSS和LESS/LESS/映射\"},{\"text\":\"作用域（Scope）\",\"link\":\"/CSS和LESS/LESS/作用域\"},{\"text\":\"导入（Importing）\",\"link\":\"/CSS和LESS/LESS/导入\"}]}],\"/JS和TS/ES5\":[{\"text\":\"ES5\",\"collapsed\":true,\"items\":[{\"text\":\"1.Array\",\"link\":\"/JS和TS/ES5/array\"},{\"text\":\"1.Object\",\"link\":\"/JS和TS/ES5/Object.md\"},{\"text\":\"1.Function\",\"link\":\"/JS和TS/ES5/Function.md\"},{\"text\":\"2.作用域和作用域链\",\"link\":\"/JS和TS/ES5/作用域和作用域链.md\"},{\"text\":\"2.闭包\",\"link\":\"/JS和TS/ES5/闭包.md\"},{\"text\":\"2.this指向\",\"link\":\"/JS和TS/ES5/this.md\"},{\"text\":\"2.new 操作符\",\"link\":\"/JS和TS/ES5/new.md\"},{\"text\":\"3.函数柯里化\",\"link\":\"/JS和TS/ES5/函数柯里化.md\"},{\"text\":\"4.原型和原型链\",\"link\":\"/JS和TS/ES5/原型和原型链.md\"},{\"text\":\"5.防抖和节流\",\"link\":\"/JS和TS/ES5/防抖和节流.md\"},{\"text\":\"6.ES5继承\",\"link\":\"/JS和TS/ES5/ES5继承.md\"},{\"text\":\"7.面向对象的程序设计\",\"link\":\"/JS和TS/ES5/面向对象的程序设计.md\"},{\"text\":\"8.return&continue&break\",\"link\":\"/JS和TS/ES5/return&continue&break.md\"},{\"text\":\"9.HTML本地存储\",\"link\":\"/JS和TS/ES5/HTML本地存储.md\"},{\"text\":\"10.异常处理\",\"link\":\"/JS和TS/ES5/异常处理.md\"},{\"text\":\"11.函数调用的四种方式\",\"link\":\"/JS和TS/ES5/函数调用的四种方式.md\"},{\"text\":\"12.reduce方法\",\"link\":\"/JS和TS/ES5/reduce方法.md\"},{\"text\":\"13.instanceof的实现\",\"link\":\"/JS和TS/ES5/instanceof的实现.md\"},{\"text\":\"14.call\",\"link\":\"/JS和TS/ES5/call.md\"},{\"text\":\"15.apply\",\"link\":\"/JS和TS/ES5/apply.md\"},{\"text\":\"16.bind\",\"link\":\"/JS和TS/ES5/bind.md\"},{\"text\":\"17.偏函数\",\"link\":\"/JS和TS/ES5/偏函数.md\"},{\"text\":\"18.事件\",\"link\":\"/JS和TS/ES5/事件.md\"},{\"text\":\"19.深拷贝和浅拷贝\",\"link\":\"/JS和TS/ES5/深拷贝和浅拷贝.md\"},{\"text\":\"20.js事件循环机制\",\"link\":\"/JS和TS/ES5/js事件循环机制.md\"},{\"text\":\"21.JS垃圾回收机制\",\"link\":\"/JS和TS/ES5/JS垃圾回收机制.md\"}]}],\"/JS和TS/ES6\":[{\"text\":\"ES6\",\"collapsed\":true,\"items\":[{\"text\":\"变量的解构赋值\",\"link\":\"/JS和TS/ES6/变量的解构赋值.md\"},{\"text\":\"函数的扩展\",\"link\":\"/JS和TS/ES6/函数的扩展.md\"},{\"text\":\"数组的扩展\",\"link\":\"/JS和TS/ES6/数组的扩展.md\"},{\"text\":\"对象的扩展\",\"link\":\"/JS和TS/ES6/对象的扩展.md\"},{\"text\":\"对象的新增方法\",\"link\":\"/JS和TS/ES6/对象的新增方法.md\"},{\"text\":\"运算符的扩展\",\"link\":\"/JS和TS/ES6/运算符的扩展.md\"},{\"text\":\"Set数据结构\",\"link\":\"/JS和TS/ES6/Set数据结构.md\"},{\"text\":\"Map数据结构\",\"link\":\"/JS和TS/ES6/Map数据结构.md\"},{\"text\":\"Proxy\",\"link\":\"/JS和TS/ES6/Proxy.md\"},{\"text\":\"Reflect\",\"link\":\"/JS和TS/ES6/Reflect.md\"},{\"text\":\"Iterator\",\"link\":\"/JS和TS/ES6/Iterator.md\"},{\"text\":\"Generator\",\"link\":\"/JS和TS/ES6/Generator.md\"},{\"text\":\"Promise\",\"link\":\"/JS和TS/ES6/Promise.md\"},{\"text\":\"async和await\",\"link\":\"/JS和TS/ES6/async和await.md\"},{\"text\":\"Class基础\",\"link\":\"/JS和TS/ES6/Class基础.md\"},{\"text\":\"Class继承\",\"link\":\"/JS和TS/ES6/Class继承.md\"},{\"text\":\"module(模块)\",\"link\":\"/JS和TS/ES6/module.md\"},{\"text\":\"module(模块)的加载实现\",\"link\":\"/JS和TS/ES6/module的加载实现.md\"}]}],\"/JS和TS/TypeScript\":[{\"text\":\"TypeScript世界\",\"collapsed\":true,\"items\":[{\"text\":\"基础数据类型\",\"link\":\"/JS和TS/TypeScript/基础数据类型.md\"},{\"text\":\"接口\",\"link\":\"/JS和TS/TypeScript/接口.md\"},{\"text\":\"类\",\"link\":\"/JS和TS/TypeScript/类.md\"},{\"text\":\"函数\",\"link\":\"/JS和TS/TypeScript/函数.md\"},{\"text\":\"泛型\",\"link\":\"/JS和TS/TypeScript/泛型.md\"},{\"text\":\"枚举\",\"link\":\"/JS和TS/TypeScript/枚举.md\"},{\"text\":\"类型推论\",\"link\":\"/JS和TS/TypeScript/类型推论.md\"},{\"text\":\"高级类型\",\"link\":\"/JS和TS/TypeScript/高级类型.md\"},{\"text\":\"高级类型之类型别名(type)\",\"link\":\"/JS和TS/TypeScript/高级类型之类型别名.md\"},{\"text\":\"模块\",\"link\":\"/JS和TS/TypeScript/模块.md\"},{\"text\":\"三斜线指令\",\"link\":\"/JS和TS/TypeScript/三斜线指令.md\"},{\"text\":\"类型工具\",\"link\":\"/JS和TS/TypeScript/类型工具.md\"}]}],\"/知识碎片\":[{\"text\":\"知识碎片\",\"collapsed\":true,\"items\":[{\"text\":\"1.promise&递归\",\"link\":\"/知识碎片/promise&递归.md\"},{\"text\":\"2.正整数字符串相加\",\"link\":\"/知识碎片/正整数字符串相加.md\"},{\"text\":\"3.ES5和ES6的类\",\"link\":\"/知识碎片/ES5和ES6的类.md\"},{\"text\":\"5.生成树形结构数据\",\"link\":\"/知识碎片/生成树形结构数据.md\"},{\"text\":\"6.为什么js的数组不是真正的数组\",\"link\":\"/知识碎片/为什么说js的数组不是真正的数组，和数据结构的数组相比有什么不同.md\"},{\"text\":\"7.项目中登陆功能是怎么实现的\",\"link\":\"/知识碎片/项目中登陆功能是怎么实现的.md\"},{\"text\":\"8.js特性有哪些\",\"link\":\"/知识碎片/js特性有哪些.md\"},{\"text\":\"9.js为什么是单线程\",\"link\":\"/知识碎片/js为什么是单线程.md\"},{\"text\":\"11.异步编程之事件循环机制\",\"link\":\"/知识碎片/异步编程之事件循环机制.md\"},{\"text\":\"12.如何解决异步回调地狱\",\"link\":\"/知识碎片/如何解决异步回调地狱.md\"},{\"text\":\"13.跨域的解决方法有哪些\",\"link\":\"/知识碎片/跨域的解决方法有哪些.md\"},{\"text\":\"14.值类型和引用类型赋值\",\"link\":\"/知识碎片/值类型和引用类型赋值.md\"},{\"text\":\"16.JS和JSON的区别\",\"link\":\"/知识碎片/JS和JSON的区别.md\"},{\"text\":\"17.四种模块化方案\",\"link\":\"/知识碎片/四种模块化方案.md\"},{\"text\":\"18.总结1\",\"link\":\"/知识碎片/总结1.md\"},{\"text\":\"19.数组拍平\",\"link\":\"/知识碎片/数组拍平.md\"},{\"text\":\"20.前端性能优化\",\"link\":\"/知识碎片/前端性能优化.md\"},{\"text\":\"21.文件上传的方案\",\"link\":\"/知识碎片/文件上传.md\"},{\"text\":\"22.长列表渲染优化\",\"link\":\"/知识碎片/长列表渲染优化.md\"},{\"text\":\"23.手写Promise\",\"link\":\"/知识碎片/手写Promise.md\"},{\"text\":\"24.vue3为什么使用Proxy\",\"link\":\"/知识碎片/vue3为什么使用Proxy.md\"},{\"text\":\"25.Vue3响应式实现\",\"link\":\"/知识碎片/Vue3响应式实现.md\"}]}],\"/框架/vue\":[{\"text\":\"vue知识点\",\"collapsed\":true,\"items\":[{\"text\":\"Antd按需加载\",\"link\":\"/框架/vue/Antd按需加载.md\"},{\"text\":\"生命周期\",\"link\":\"/框架/vue/生命周期钩子.md\"},{\"text\":\"v-model\",\"link\":\"/框架/vue/v-model.md\"},{\"text\":\"computed\",\"link\":\"/框架/vue/computed.md\"},{\"text\":\"props\",\"link\":\"/框架/vue/props.md\"},{\"text\":\"provide和inject\",\"link\":\"/框架/vue/provide和inject.md\"},{\"text\":\"slot\",\"link\":\"/框架/vue/slot.md\"},{\"text\":\"watch和watchEffect\",\"link\":\"/框架/vue/watch和watchEffect.md\"},{\"text\":\"teleport\",\"link\":\"/框架/vue/teleport.md\"},{\"text\":\"vue插件\",\"link\":\"/框架/vue/vue插件.md\"},{\"text\":\"渲染函数\",\"link\":\"/框架/vue/渲染函数.md\"},{\"text\":\"请求封装\",\"link\":\"/框架/vue/请求封装.md\"},{\"text\":\"setup用法\",\"link\":\"/框架/vue/setup用法.md\"},{\"text\":\"scriptsetup用法\",\"link\":\"/框架/vue/scriptsetup用法.md\"}]}],\"/框架/Vuex\":[{\"text\":\"VueX(4.X)\",\"collapsed\":true,\"items\":[{\"text\":\"简介\",\"link\":\"/框架/Vuex/简介\"},{\"text\":\"State对象\",\"link\":\"/框架/Vuex/State\"},{\"text\":\"Getter对象\",\"link\":\"/框架/Vuex/Getter\"},{\"text\":\"Mutation对象\",\"link\":\"/框架/Vuex/Mutation\"},{\"text\":\"Action对象\",\"link\":\"/框架/Vuex/Action\"},{\"text\":\"Module对象\",\"link\":\"/框架/Vuex/Module\"},{\"text\":\"项目结构\",\"link\":\"/框架/Vuex/项目结构\"},{\"text\":\"组合式API\",\"link\":\"/框架/Vuex/组合式API\"},{\"text\":\"插件\",\"link\":\"/框架/Vuex/插件\"},{\"text\":\"严格模式\",\"link\":\"/框架/Vuex/严格模式\"},{\"text\":\"表单处理\",\"link\":\"/框架/Vuex/表单处理\"}]}],\"/框架/VueRouter\":[{\"text\":\"VueRouter(4.X)\",\"collapsed\":true,\"items\":[{\"text\":\"简介\",\"link\":\"/框架/VueRouter/简介\"},{\"text\":\"动态路由匹配\",\"link\":\"/框架/VueRouter/动态路由匹配\"},{\"text\":\"路由匹配的语法\",\"link\":\"/框架/VueRouter/路由匹配的语法\"},{\"text\":\"嵌套路由\",\"link\":\"/框架/VueRouter/嵌套路由\"},{\"text\":\"编程式导航\",\"link\":\"/框架/VueRouter/编程式导航\"},{\"text\":\"命名路由\",\"link\":\"/框架/VueRouter/命名路由\"},{\"text\":\"命名视图\",\"link\":\"/框架/VueRouter/命名视图\"},{\"text\":\"重定向和别名\",\"link\":\"/框架/VueRouter/重定向和别名\"},{\"text\":\"路由组件传参\",\"link\":\"/框架/VueRouter/路由组件传参\"},{\"text\":\"路由模式\",\"link\":\"/框架/VueRouter/路由模式\"},{\"text\":\"导航守卫\",\"link\":\"/框架/VueRouter/导航守卫\"}]}],\"/框架/react_router\":[{\"text\":\"react路由学习笔记\",\"collapsed\":true,\"items\":[{\"text\":\"简介\",\"link\":\"/框架/react_router/简介.md\"},{\"text\":\"Hooks\",\"link\":\"/框架/react_router/Hooks.md\"},{\"text\":\"路由器\",\"link\":\"/框架/react_router/路由器.md\"},{\"text\":\"路由匹配器\",\"link\":\"/框架/react_router/路由匹配器.md\"},{\"text\":\"导航\",\"link\":\"/框架/react_router/导航.md\"},{\"text\":\"路由信息对象\",\"link\":\"/框架/react_router/路由信息对象.md\"},{\"text\":\"高阶组件withRouter\",\"link\":\"/框架/react_router/高阶组件withRouter.md\"},{\"text\":\"案例_基础使用\",\"link\":\"/框架/react_router/案例_基础使用.md\"},{\"text\":\"案例_路由参数\",\"link\":\"/框架/react_router/案例_路由参数.md\"},{\"text\":\"案例_嵌套路由\",\"link\":\"/框架/react_router/案例_嵌套路由.md\"},{\"text\":\"案例_路由权限\",\"link\":\"/框架/react_router/案例_路由权限.md\"},{\"text\":\"案例_自定义导航\",\"link\":\"/框架/react_router/案例_自定义导航.md\"},{\"text\":\"案例_路由跳转确认\",\"link\":\"/框架/react_router/案例_路由跳转确认.md\"}]}],\"/框架/react\":[{\"text\":\"react学习笔记\",\"collapsed\":true,\"items\":[{\"text\":\"jsx\",\"link\":\"/框架/react/jsx.md\"},{\"text\":\"react基础\",\"link\":\"/框架/react/react基础.md\"},{\"text\":\"props\",\"link\":\"/框架/react/props.md\"},{\"text\":\"组件间通信\",\"link\":\"/框架/react/组件通信.md\"},{\"text\":\"Context\",\"link\":\"/框架/react/Context.md\"},{\"text\":\"生命周期钩子函数\",\"link\":\"/框架/react/生命周期.md\"},{\"text\":\"render-props\",\"link\":\"/框架/react/renderProps.md\"},{\"text\":\"高阶组件\",\"link\":\"/框架/react/高阶组件.md\"},{\"text\":\"setState\",\"link\":\"/框架/react/setState.md\"},{\"text\":\"JSX语法的转化过程\",\"link\":\"/框架/react/JSX语法的转化过程\"},{\"text\":\"组件更新机制\",\"link\":\"/框架/react/组件更新机制\"},{\"text\":\"组件性能优化\",\"link\":\"/框架/react/组件性能优化\"},{\"text\":\"虚拟DOM和Diff算法\",\"link\":\"/框架/react/虚拟DOM和Diff算法\"}]}],\"/数据结构和算法/数据结构\":[{\"text\":\"数据结构学习\",\"collapsed\":true,\"items\":[{\"text\":\"数组(Array)\",\"collapsed\":true,\"items\":[{\"text\":\"数组基础\",\"link\":\"/数据结构和算法/数据结构/数组/数组基础\"},{\"text\":\"数组练习\",\"link\":\"/数据结构和算法/数据结构/数组/练习\"}]},{\"text\":\"链表(Linked List)\",\"collapsed\":true,\"items\":[{\"text\":\"单链表\",\"link\":\"/数据结构和算法/数据结构/链表/单链表\"},{\"text\":\"双链表\",\"link\":\"/数据结构和算法/数据结构/链表/双链表\"},{\"text\":\"循环单链表\",\"link\":\"/数据结构和算法/数据结构/链表/循环单链表\"},{\"text\":\"链表练习\",\"link\":\"/数据结构和算法/数据结构/链表/练习\"}]},{\"text\":\"栈(Stack)\",\"collapsed\":true,\"items\":[{\"text\":\"栈\",\"link\":\"/数据结构和算法/数据结构/栈/栈\"},{\"text\":\"浏览器种JS运行机制\",\"link\":\"/数据结构和算法/数据结构/栈/浏览器种JS运行机制\"},{\"text\":\"调用栈\",\"link\":\"/数据结构和算法/数据结构/栈/调用栈\"},{\"text\":\"JS内存机制\",\"link\":\"/数据结构和算法/数据结构/栈/JS内存机制\"},{\"text\":\"练习\",\"link\":\"/数据结构和算法/数据结构/栈/练习\"}]},{\"text\":\"队列(Queue)\",\"collapsed\":true,\"items\":[{\"text\":\"队列\",\"link\":\"/数据结构和算法/数据结构/队列/队列\"},{\"text\":\"双端队列\",\"link\":\"/数据结构和算法/数据结构/队列/双端队列\"},{\"text\":\"滑动窗口\",\"link\":\"/数据结构和算法/数据结构/队列/滑动窗口\"},{\"text\":\"练习\",\"link\":\"/数据结构和算法/数据结构/队列/练习\"}]},{\"text\":\"树(Tree)\",\"collapsed\":true,\"items\":[{\"text\":\"树\",\"link\":\"/数据结构和算法/数据结构/树/树\"},{\"text\":\"二叉树\",\"link\":\"/数据结构和算法/数据结构/树/二叉树\"},{\"text\":\"二叉树的遍历\",\"link\":\"/数据结构和算法/数据结构/树/二叉树的遍历\"},{\"text\":\"二叉查找树（BST树）\",\"link\":\"/数据结构和算法/数据结构/树/二叉查找树\"},{\"text\":\"平衡二叉查找树（AVL树）\",\"link\":\"/数据结构和算法/数据结构/树/平衡二叉查找树\"},{\"text\":\"红黑树\",\"link\":\"/数据结构和算法/数据结构/树/红⿊树\"},{\"text\":\"Trie树\",\"link\":\"/数据结构和算法/数据结构/树/Trie树\"},{\"text\":\"B树\",\"link\":\"/数据结构和算法/数据结构/树/B树\"},{\"text\":\"B+树\",\"link\":\"/数据结构和算法/数据结构/树/B+树\"},{\"text\":\"练习\",\"link\":\"/数据结构和算法/数据结构/树/练习\"}]},{\"text\":\"图(Graph)\",\"collapsed\":true,\"items\":[]},{\"text\":\"列表\",\"link\":\"/数据结构和算法/数据结构/列表\"},{\"text\":\"栈(Stack)\",\"link\":\"/数据结构和算法/数据结构/栈\"},{\"text\":\"链表(Linked List)\",\"link\":\"/数据结构和算法/数据结构/链表\"},{\"text\":\"集合(Set)\",\"link\":\"/数据结构和算法/数据结构/集合(Set)\"},{\"text\":\"字典(Map)\",\"link\":\"/数据结构和算法/数据结构/字典(Map)\"}]}],\"/数据结构和算法/算法\":[{\"text\":\"算法学习\",\"collapsed\":true,\"items\":[{\"text\":\"广度优先搜索算法\",\"link\":\"/数据结构和算法/算法/广度优先搜索算法\"},{\"text\":\"洗牌算法\",\"link\":\"/数据结构和算法/算法/洗牌算法\"},{\"text\":\"LRU算法\",\"link\":\"/数据结构和算法/算法/LRU算法\"},{\"text\":\"排序算法\",\"collapsed\":true,\"items\":[{\"text\":\"桶排序\",\"link\":\"/数据结构和算法/算法/排序算法/桶排序\"},{\"text\":\"计数排序\",\"link\":\"/数据结构和算法/算法/排序算法/计数排序\"},{\"text\":\"冒泡排序\",\"link\":\"/数据结构和算法/算法/排序算法/冒泡排序\"},{\"text\":\"插入排序\",\"link\":\"/数据结构和算法/算法/排序算法/插入排序\"},{\"text\":\"选择排序\",\"link\":\"/数据结构和算法/算法/排序算法/选择排序\"},{\"text\":\"快速排序\",\"link\":\"/数据结构和算法/算法/排序算法/快速排序\"}]},{\"text\":\"查找算法\",\"collapsed\":true,\"items\":[{\"text\":\"线性表查找\",\"link\":\"/数据结构和算法/算法/查找算法/线性表查找\"},{\"text\":\"树结构查找\",\"link\":\"/数据结构和算法/算法/查找算法/树结构查找\"},{\"text\":\"散列表查找\",\"link\":\"/数据结构和算法/算法/查找算法/散列表查找\"}]},{\"text\":\"字符串问题\",\"collapsed\":true,\"items\":[{\"text\":\"翻转单词\",\"link\":\"/数据结构和算法/算法/字符串问题/翻转单词\"},{\"text\":\"最长公共前缀（LCP）\",\"link\":\"/数据结构和算法/算法/字符串问题/最长公共前缀\"},{\"text\":\"回文字符串\",\"link\":\"/数据结构和算法/算法/字符串问题/回文字符串\"},{\"text\":\"最长子串\",\"link\":\"/数据结构和算法/算法/字符串问题/最长子串\"},{\"text\":\"字符串相加\",\"link\":\"/数据结构和算法/算法/字符串问题/字符串相加\"}]},{\"text\":\"编程问题\",\"collapsed\":true,\"items\":[{\"text\":\"手写数组去重，扁平化\",\"link\":\"/数据结构和算法/算法/编程问题/手写数组去重，扁平化\"},{\"text\":\"模板渲染\",\"link\":\"/数据结构和算法/算法/编程问题/模板渲染\"},{\"text\":\"深浅拷贝问题\",\"link\":\"/数据结构和算法/算法/编程问题/深浅拷贝问题\"},{\"text\":\"手写async,await\",\"link\":\"/数据结构和算法/算法/编程问题/手写async,await\"},{\"text\":\"indexOf的简单实现\",\"link\":\"/数据结构和算法/算法/编程问题/indexOf的简单实现\"},{\"text\":\"拆解URL问题\",\"link\":\"/数据结构和算法/算法/编程问题/拆解URL问题\"},{\"text\":\"闭包问题及优化\",\"link\":\"/数据结构和算法/算法/编程问题/闭包问题及优化\"}]},{\"text\":\"六大常见算法策略\",\"collapsed\":true,\"items\":[{\"text\":\"递归算法\",\"collapsed\":true,\"items\":[{\"text\":\"递归\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/递归算法/递归\"},{\"text\":\"练习\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/递归算法/练习\"}]},{\"text\":\"分治算法\",\"collapsed\":true,\"items\":[{\"text\":\"分治算法分析\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/分治算法/分治算法分析\"},{\"text\":\"练习\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/分治算法/练习\"}]},{\"text\":\"贪心算法\",\"collapsed\":true,\"items\":[{\"text\":\"贪心算法分析\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/贪心算法/贪心算法分析\"},{\"text\":\"练习\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/贪心算法/练习\"}]},{\"text\":\"回溯算法\",\"collapsed\":true,\"items\":[{\"text\":\"深度优先遍历\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/回溯算法/深度优先遍历\"},{\"text\":\"背包问题\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/回溯算法/背包问题\"},{\"text\":\"正则匹配\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/回溯算法/正则匹配\"},{\"text\":\"八皇后问题\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/回溯算法/八皇后问题\"},{\"text\":\"全排列问题\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/回溯算法/全排列问题\"}]},{\"text\":\"动态规划\",\"collapsed\":true,\"items\":[{\"text\":\"背包问题\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/动态规划/背包问题\"},{\"text\":\"硬币找零\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/动态规划/硬币找零\"},{\"text\":\"图的全源最短路劲\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/动态规划/图的全源最短路劲\"},{\"text\":\"最长公共子序列\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/动态规划/最长公共子序列\"},{\"text\":\"爬楼梯问题\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/动态规划/爬楼梯问题\"},{\"text\":\"最小花费爬楼梯问题\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/动态规划/最小花费爬楼梯问题\"},{\"text\":\"编程距离\",\"link\":\"/数据结构和算法/算法/六大常见算法策略/动态规划/编程距离\"}]},{\"text\":\"枚举算法\",\"collapsed\":true,\"items\":[]}]}]}],\"/设计模式\":[{\"text\":\"设计模式\",\"collapsed\":true,\"items\":[{\"text\":\"单例模式\",\"link\":\"/设计模式/单例模式.md\"},{\"text\":\"工厂模式\",\"link\":\"/设计模式/工厂模式.md\"},{\"text\":\"发布订阅模式\",\"link\":\"/设计模式/发布_订阅模式.md\"}]}],\"/HTTP协议\":[{\"text\":\"HTTP协议\",\"collapsed\":true,\"items\":[{\"text\":\"get与post的区别\",\"link\":\"/HTTP协议/get与post的区别.md\"},{\"text\":\"常见的HTTP状态码\",\"link\":\"/HTTP协议/常见的HTTP状态码.md\"},{\"text\":\"POST提交数据四种常见数据格式\",\"link\":\"/HTTP协议/POST提交数据四种常见数据格式.md\"},{\"text\":\"http与https的区别\",\"link\":\"/HTTP协议/http与https的区别.md\"},{\"text\":\"tcp和udp的区别\",\"link\":\"/HTTP协议/tcp和udp的区别.md\"},{\"text\":\"网络七层协议\",\"link\":\"/HTTP协议/网络七层协议.md\"},{\"text\":\"从输入一个 URL 地址到浏览器完成渲染的整个过程\",\"link\":\"/HTTP协议/从输入一个 URL 地址到浏览器完成渲染的整个过程.md\"}]}],\"/modules/webpack\":[{\"text\":\"webpack5.0\",\"collapsed\":true,\"items\":[{\"text\":\"基础\",\"collapsed\":true,\"items\":[{\"text\":\"简介\",\"link\":\"/modules/webpack/基础/简介\"},{\"text\":\"基本配置\",\"link\":\"/modules/webpack/基础/基本配置\"},{\"text\":\"处理样式资源\",\"link\":\"/modules/webpack/基础/处理样式资源\"},{\"text\":\"处理图片和音视频资源\",\"link\":\"/modules/webpack/基础/处理图片和音视频资源\"},{\"text\":\"处理字体图标资源\",\"link\":\"/modules/webpack/基础/处理字体图标资源\"},{\"text\":\"处理JS资源\",\"link\":\"/modules/webpack/基础/处理JS资源\"},{\"text\":\"处理htlm资源\",\"link\":\"/modules/webpack/基础/处理htlm资源\"},{\"text\":\"开启服务器\",\"link\":\"/modules/webpack/基础/开启服务器\"},{\"text\":\"css处理\",\"link\":\"/modules/webpack/基础/css处理\"}]},{\"text\":\"提升开发体验\",\"collapsed\":true,\"items\":[{\"text\":\"SourceMap\",\"link\":\"/modules/webpack/提升开发体验/SourceMap\"}]},{\"text\":\"提升打包构建速度\",\"collapsed\":true,\"items\":[{\"text\":\"HotModuleReplacement\",\"link\":\"/modules/webpack/提升打包构建速度/HotModuleReplacement\"},{\"text\":\"OneOf\",\"link\":\"/modules/webpack/提升打包构建速度/OneOf\"},{\"text\":\"Include和Exclue\",\"link\":\"/modules/webpack/提升打包构建速度/Include和Exclue\"},{\"text\":\"Cache\",\"link\":\"/modules/webpack/提升打包构建速度/Cache\"},{\"text\":\"Thread\",\"link\":\"/modules/webpack/提升打包构建速度/Thread\"}]},{\"text\":\"减少代码体积\",\"collapsed\":true,\"items\":[{\"text\":\"TreeShaing\",\"link\":\"/modules/webpack/减少代码体积/TreeShaing\"},{\"text\":\"Babel\",\"link\":\"/modules/webpack/减少代码体积/Babel\"},{\"text\":\"Image_Minimizer\",\"link\":\"/modules/webpack/减少代码体积/Image_Minimizer\"}]},{\"text\":\"优化代码运行性能\",\"collapsed\":true,\"items\":[{\"text\":\"Code_split\",\"link\":\"/modules/webpack/优化代码运行性能/Code_split\"},{\"text\":\"Preload和Prefetch\",\"link\":\"/modules/webpack/优化代码运行性能/Preload和Prefetch\"},{\"text\":\"Network_Cache\",\"link\":\"/modules/webpack/优化代码运行性能/Network_Cache\"},{\"text\":\"Corejs\",\"link\":\"/modules/webpack/优化代码运行性能/Corejs\"},{\"text\":\"PWA\",\"link\":\"/modules/webpack/优化代码运行性能/PWA\"}]},{\"text\":\"Vue脚手架\",\"collapsed\":true,\"items\":[{\"text\":\"开发模式配置\",\"link\":\"/modules/webpack/Vue脚手架/开发模式配置\"},{\"text\":\"生产模式配置\",\"link\":\"/modules/webpack/Vue脚手架/生产模式配置\"},{\"text\":\"其它配置\",\"link\":\"/modules/webpack/Vue脚手架/其它配置\"},{\"text\":\"合并开发和生产环境配置\",\"link\":\"/modules/webpack/Vue脚手架/合并开发和生产环境配置\"}]},{\"text\":\"loader原理\",\"collapsed\":true,\"items\":[{\"text\":\"loader原理\",\"link\":\"/modules/webpack/loader原理/loader原理\"},{\"text\":\"loader分类\",\"link\":\"/modules/webpack/loader原理/loader分类\"},{\"text\":\"loader的API\",\"link\":\"/modules/webpack/loader原理/loader的API\"},{\"text\":\"手写clean-log-loader\",\"link\":\"/modules/webpack/loader原理/手写clean-log-loader\"},{\"text\":\"手写banner-loader\",\"link\":\"/modules/webpack/loader原理/手写banner-loader.md\"},{\"text\":\"手写babel-loader\",\"link\":\"/modules/webpack/loader原理/手写babel-loader\"},{\"text\":\"手写file-loader\",\"link\":\"/modules/webpack/loader原理/手写file-loader\"},{\"text\":\"手写style-loader\",\"link\":\"/modules/webpack/loader原理/手写style-loader\"}]},{\"text\":\"plugin原理\",\"collapsed\":true,\"items\":[{\"text\":\"plugin原理\",\"link\":\"/modules/webpack/plugin原理/plugin原理\"},{\"text\":\"webpack内部的钩子\",\"link\":\"/modules/webpack/plugin原理/webpack内部的钩子\"},{\"text\":\"Tapable\",\"link\":\"/modules/webpack/plugin原理/Tapable\"},{\"text\":\"plugin构建对象\",\"link\":\"/modules/webpack/plugin原理/plugin构建对象\"},{\"text\":\"开发一个插件\",\"link\":\"/modules/webpack/plugin原理/开发一个插件\"},{\"text\":\"调试插件\",\"link\":\"/modules/webpack/plugin原理/调试插件\"},{\"text\":\"BannerWebpackPlugin\",\"link\":\"/modules/webpack/plugin原理/BannerWebpackPlugin\"},{\"text\":\"CleanWebpackPlugin\",\"link\":\"/modules/webpack/plugin原理/CleanWebpackPlugin\"},{\"text\":\"AnalyzeWebpackPlugin\",\"link\":\"/modules/webpack/plugin原理/AnalyzeWebpackPlugin\"},{\"text\":\"InlineChunkWebpackPlugin\",\"link\":\"/modules/webpack/plugin原理/InlineChunkWebpackPlugin\"}]},{\"text\":\"资源管理之加载数据\",\"link\":\"/modules/webpack/资源管理之加载数据\"},{\"text\":\"管理输出\",\"link\":\"/modules/webpack/管理输出\"},{\"text\":\"开发环境\",\"link\":\"/modules/webpack/开发环境\"},{\"text\":\"代码分离\",\"link\":\"/modules/webpack/代码分离\"},{\"text\":\"多页面\",\"link\":\"/modules/webpack/多页面\"},{\"text\":\"学习loader\",\"link\":\"/modules/webpack/学习loader\"},{\"text\":\"打包分析\",\"link\":\"/modules/webpack/打包分析\"}]}],\"/modules/node\":[{\"text\":\"node学习\",\"collapsed\":true,\"items\":[{\"text\":\"node搭建web服务器\",\"link\":\"/modules/node/node搭建web服务器\"},{\"text\":\"使用nvm管理node版本\",\"link\":\"/modules/node/使用nvm管理node版本\"},{\"text\":\"模块\",\"link\":\"/modules/node/模块\"}]}],\"/modules/解决方案\":[{\"text\":\"前端解决方案\",\"collapsed\":true,\"items\":[{\"text\":\"多页面\",\"link\":\"/modules/解决方案/多页面\"},{\"text\":\"微前端解决方案\",\"link\":\"/modules/解决方案/微前端解决方案\"},{\"text\":\"大屏适配方案\",\"link\":\"/modules/解决方案/大屏适配方案\"},{\"text\":\"git的使用\",\"link\":\"/modules/解决方案/git的使用\"}]}],\"/java/java\":[{\"text\":\"java\",\"collapsed\":true,\"items\":[{\"text\":\"常用单词\",\"link\":\"/java/java/常用词汇\"},{\"text\":\"idea断点调试\",\"link\":\"/java/java/idea断点调试\"},{\"text\":\"equals方法\",\"link\":\"/java/java/equals方法\"},{\"text\":\"常用知识点\",\"link\":\"/java/java/常用知识点\"},{\"text\":\"win10配置双jdk\",\"link\":\"/java/java/win10配置双jdk\"},{\"text\":\"Docker部署java开发环境\",\"link\":\"/java/java/Docker部署java开发环境\"},{\"text\":\"File和IO\",\"collapsed\":true,\"items\":[{\"text\":\"File操作\",\"link\":\"/java/java/File操作\"},{\"text\":\"字符集\",\"link\":\"/java/java/字符集\"},{\"text\":\"IO流\",\"link\":\"/java/java/IO流\"}]},{\"text\":\"枚举类\",\"link\":\"/java/java/枚举类\"},{\"text\":\"注解\",\"link\":\"/java/java/注解\"},{\"text\":\"类加载过程\",\"link\":\"/java/java/类加载过程\"},{\"text\":\"设计模式\",\"collapsed\":true,\"items\":[{\"text\":\"单例设计模式\",\"link\":\"/java/java/单例设计模式\"},{\"text\":\"工厂方法模式\",\"link\":\"/java/java/工厂方法模式\"},{\"text\":\"抽象工厂模式\",\"link\":\"/java/java/抽象工厂模式\"},{\"text\":\"建造者模式\",\"link\":\"/java/java/建造者模式\"},{\"text\":\"原型模式\",\"link\":\"/java/java/原型模式\"},{\"text\":\"享元模式\",\"link\":\"/java/java/享元模式\"},{\"text\":\"门面模式\",\"link\":\"/java/java/门面模式\"},{\"text\":\"适配器模式\",\"link\":\"/java/java/适配器模式\"},{\"text\":\"装饰器模式\",\"link\":\"/java/java/装饰器模式\"},{\"text\":\"策略模式\",\"link\":\"/java/java/策略模式\"},{\"text\":\"模板方法模式\",\"link\":\"/java/java/模板方法模式\"},{\"text\":\"观察者模式\",\"link\":\"/java/java/观察者模式\"},{\"text\":\"责任链模式\",\"link\":\"/java/java/责任链模式\"},{\"text\":\"代理模式\",\"link\":\"/java/java/代理模式\"}]},{\"text\":\"并发编程编程\",\"collapsed\":true,\"items\":[]},{\"text\":\"函数式编程\",\"collapsed\":true,\"items\":[{\"text\":\"Lambda表达式\",\"link\":\"/java/java/Lambda表达式\"},{\"text\":\"Stream流\",\"link\":\"/java/java/Stream流\"},{\"text\":\"Optional\",\"link\":\"/java/java/Optional\"},{\"text\":\"函数式接口\",\"link\":\"/java/java/函数式接口\"},{\"text\":\"方法引用\",\"link\":\"/java/java/方法引用\"},{\"text\":\"Stream流高级用法\",\"link\":\"/java/java/Stream流高级用法\"}]},{\"text\":\"集合\",\"collapsed\":true,\"items\":[{\"text\":\"集合简介\",\"link\":\"/java/java/集合简介\"},{\"text\":\"List\",\"link\":\"/java/java/List\"},{\"text\":\"Set\",\"link\":\"/java/java/Set\"},{\"text\":\"Map\",\"link\":\"/java/java/Map\"},{\"text\":\"Collections\",\"link\":\"/java/java/Collections\"}]}]}],\"/java/springboot\":[{\"text\":\"SpringBoot\",\"collapsed\":true,\"items\":[{\"text\":\"yaml\",\"link\":\"/java/springboot/yaml\"},{\"text\":\"SpringBoot整合第三方\",\"link\":\"/java/springboot/SpringBoot整合第三方\"},{\"text\":\"SpringBoot整合Mybatis-Plus\",\"link\":\"/java/springboot/SpringBoot整合Mybatis-Plus\"},{\"text\":\"RestFul服务\",\"link\":\"/java/springboot/RestFul\"},{\"text\":\"JWT跨域认证\",\"link\":\"/java/springboot/jwt\"},{\"text\":\"使用AOP实现自定义注解\",\"link\":\"/java/springboot/AOP实现自定义注解\"},{\"text\":\"SpringBoot缓存\",\"link\":\"/java/springboot/SpringBoot缓存\"},{\"text\":\"SpringBoot项目启动时预加载\",\"link\":\"/java/springboot/SpringBoot项目启动时预加载\"},{\"text\":\"fastjson\",\"link\":\"/java/springboot/fastjson\"},{\"text\":\"SpringBoot集成WebSocket\",\"link\":\"/java/springboot/SpringBoot集成WebSocket\"},{\"text\":\"任务处理\",\"link\":\"/java/springboot/任务处理\"},{\"text\":\"Quartz\",\"link\":\"/java/springboot/Quartz\"},{\"text\":\"OpenFeign\",\"link\":\"/java/springboot/OpenFeign\"},{\"text\":\"消息中间件RabbitMQ\",\"link\":\"/java/springboot/RabbitMQ\"},{\"text\":\"消息中间件RocketMQ\",\"link\":\"/java/springboot/消息中间件RocketMQ\"},{\"text\":\"Redis\",\"link\":\"/java/springboot/Redis\"},{\"text\":\"事务\",\"link\":\"/java/springboot/事务\"},{\"text\":\"SpringBoot常用注解\",\"link\":\"/java/springboot/常用注解\"},{\"text\":\"配置启动相关注解\",\"link\":\"/java/springboot/配置启动注解\"},{\"text\":\"Spring中常用的知识点\",\"link\":\"/java/springboot/Spring中常用的知识点\"},{\"text\":\"SpringBoot三大器\",\"link\":\"/java/springboot/SpringBoot三大器\"},{\"text\":\"定义统一返回结果\",\"link\":\"/java/springboot/定义统一返回结果\"},{\"text\":\"自定义异常与全局异常处理\",\"link\":\"/java/springboot/自定义异常与全局异常处理\"},{\"text\":\"参数校验与全局异常处理\",\"link\":\"/java/springboot/参数校验与全局异常处理\"},{\"text\":\"项目知识点总结\",\"link\":\"/java/springboot/项目知识点总结\"}]}],\"/java/springcloudAlibaba\":[{\"text\":\"springCloudAlibaba\",\"collapsed\":true,\"items\":[{\"text\":\"微服务概念\",\"link\":\"/java/springcloudAlibaba/微服务概念\"},{\"text\":\"微服务环境搭建\",\"link\":\"/java/springcloudAlibaba/微服务环境搭建\"},{\"text\":\"服务治理NacosDiscover\",\"link\":\"/java/springcloudAlibaba/服务治理NacosDiscover\"},{\"text\":\"远程调用负载均衡LoadBalancer\",\"link\":\"/java/springcloudAlibaba/远程调用负载均衡LoadBalancer\"},{\"text\":\"远程调用OpenFeign\",\"link\":\"/java/springcloudAlibaba/远程调用OpenFeign\"},{\"text\":\"服务熔断降级Sentinel\",\"link\":\"/java/springcloudAlibaba/服务熔断降级Sentinel\"},{\"text\":\"服务网关Gateway\",\"link\":\"/java/springcloudAlibaba/服务网关Gateway\"},{\"text\":\"链路追踪 Sleuth和Zipkin\",\"link\":\"/java/springcloudAlibaba/链路追踪Sleuth和Zipkin\"},{\"text\":\"配置中心NacosConfig\",\"link\":\"/java/springcloudAlibaba/配置中心NacosConfig\"}]}],\"/java/mysql\":[{\"text\":\"Mysql\",\"collapsed\":true,\"items\":[{\"text\":\"SQL语言\",\"link\":\"/java/mysql/SQL语言\"},{\"text\":\"数据库操作\",\"link\":\"/java/mysql/数据库操作\"},{\"text\":\"表操作\",\"link\":\"/java/mysql/表操作\"},{\"text\":\"mysql数据类型\",\"link\":\"/java/mysql/列类型\"},{\"text\":\"CRUD\",\"link\":\"/java/mysql/CRUD\"},{\"text\":\"函数\",\"collapsed\":true,\"items\":[{\"text\":\"统计函数\",\"link\":\"/java/mysql/统计函数\"},{\"text\":\"时间和日期\",\"link\":\"/java/mysql/时间和日期\"},{\"text\":\"字符串函数\",\"link\":\"/java/mysql/字符串函数\"},{\"text\":\"数学函数\",\"link\":\"/java/mysql/数学函数\"},{\"text\":\"流程控制\",\"link\":\"/java/mysql/流程控制\"},{\"text\":\"加密函数\",\"link\":\"/java/mysql/加密函数\"}]},{\"text\":\"多表查询\",\"link\":\"/java/mysql/多表查询\"},{\"text\":\"内连接\",\"link\":\"/java/mysql/内连接\"},{\"text\":\"外连接\",\"link\":\"/java/mysql/外连接\"},{\"text\":\"视图\",\"link\":\"/java/mysql/视图\"},{\"text\":\"索引\",\"link\":\"/java/mysql/索引\"},{\"text\":\"约束\",\"link\":\"/java/mysql/约束\"},{\"text\":\"事务\",\"link\":\"/java/mysql/事务\"},{\"text\":\"存储引擎\",\"link\":\"/java/mysql/存储引擎\"},{\"text\":\"用户管理\",\"link\":\"/java/mysql/用户管理\"},{\"text\":\"权限管理\",\"link\":\"/java/mysql/权限管理\"}]}],\"/java/ssm\":[{\"text\":\"ssm\",\"collapsed\":true,\"items\":[{\"text\":\"ssm简介\",\"link\":\"/java/ssm/大纲\"},{\"text\":\"ssm整合\",\"link\":\"/java/ssm/ssm整合\"},{\"text\":\"Spring\",\"collapsed\":true,\"items\":[{\"text\":\" IOC容器\",\"link\":\"/java/ssm/spring/IOC容器\"},{\"text\":\"基于XML管理bean\",\"collapsed\":true,\"items\":[{\"text\":\" 获取bean\",\"link\":\"/java/ssm/spring/获取bean\"},{\"text\":\" 依赖注入的三种方式\",\"link\":\"/java/ssm/spring/依赖注入的三种方式\"},{\"text\":\" 依赖注入的属性赋值\",\"link\":\"/java/ssm/spring/依赖注入的属性赋值\"}]},{\"text\":\" bean的作用域\",\"link\":\"/java/ssm/spring/bean的作用域\"},{\"text\":\" bean的生命周期\",\"link\":\"/java/ssm/spring/bean的生命周期\"},{\"text\":\" FactoryBean\",\"link\":\"/java/ssm/spring/FactoryBean\"},{\"text\":\" 基于XML的自动装配\",\"link\":\"/java/ssm/spring/基于XML的自动装配\"},{\"text\":\" 基于注解管理bean\",\"link\":\"/java/ssm/spring/基于注解管理bean\"},{\"text\":\" AOP\",\"link\":\"/java/ssm/spring/aop\"},{\"text\":\" BeanUtils\",\"link\":\"/java/ssm/spring/BeanUtils\"}]},{\"text\":\"SpringMvc\",\"collapsed\":true,\"items\":[{\"text\":\" SpringMvc简介\",\"link\":\"/java/ssm/springmvc/SpringMvc简介\"},{\"text\":\" 搭建springmvc环境\",\"link\":\"/java/ssm/springmvc/搭建springmvc环境\"},{\"text\":\"requestMapping注解\",\"link\":\"/java/ssm/springmvc/requestMapping注解\"},{\"text\":\"SpringMvc获取请求参数\",\"link\":\"/java/ssm/springmvc/SpringMvc获取请求参数\"},{\"text\":\"域对象共享数据\",\"link\":\"/java/ssm/springmvc/域对象共享数据\"},{\"text\":\"SpringMvc的视图\",\"link\":\"/java/ssm/springmvc/SpringMvc的视图\"},{\"text\":\"RESTful\",\"link\":\"/java/ssm/springmvc/RESTful\"},{\"text\":\"SpringMvc处理静态资源\",\"link\":\"/java/ssm/springmvc/SpringMvc处理静态资源\"},{\"text\":\"springmvc处理Ajax请求\",\"link\":\"/java/ssm/springmvc/springmvc处理Ajax请求\"},{\"text\":\"文件上传和下载\",\"link\":\"/java/ssm/springmvc/文件上传和下载\"},{\"text\":\"拦截器\",\"link\":\"/java/ssm/springmvc/拦截器\"},{\"text\":\"异常处理器\",\"link\":\"/java/ssm/springmvc/异常处理器\"},{\"text\":\"注解配置SpringMvc\",\"link\":\"/java/ssm/springmvc/注解配置SpringMvc\"},{\"text\":\"SpringMVC执行流程\",\"link\":\"/java/ssm/springmvc/SpringMVC执行流程\"}]},{\"text\":\"MyBatis\",\"collapsed\":false,\"items\":[{\"text\":\"搭建mybatis环境\",\"link\":\"/java/ssm/mybatis/搭建mybatis环境\"},{\"text\":\"mybatis核心配置文件\",\"link\":\"/java/ssm/mybatis/mybatis核心配置文件\"},{\"text\":\"mybatis获取参数值的两种方式\",\"link\":\"/java/ssm/mybatis/mybatis获取参数值的两种方式\"},{\"text\":\"mybatis的各种查询功能\",\"link\":\"/java/ssm/mybatis/mybatis的各种查询功能\"},{\"text\":\"特殊sql的执行\",\"link\":\"/java/ssm/mybatis/特殊sql的执行\"},{\"text\":\"自定义映射resultMap\",\"link\":\"/java/ssm/mybatis/自定义映射resultMap\"},{\"text\":\"动态sql\",\"link\":\"/java/ssm/mybatis/动态sql\"},{\"text\":\"mybatis的缓存\",\"link\":\"/java/ssm/mybatis/mybatis的缓存\"},{\"text\":\"mybatis的逆向工程\",\"link\":\"/java/ssm/mybatis/mybatis的逆向工程\"},{\"text\":\"分页插件\",\"link\":\"/java/ssm/mybatis/分页插件\"}]}]}]},\"sidebarDepth\":8,\"smoothScroll\":true,\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com\"},{\"icon\":{\"svg\":\"<svg width=\\\"18\\\" height=\\\"18\\\" viewBox=\\\"0 0 18 18\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"zhuzhan-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M3.73252 2.67094C3.33229 2.28484 3.33229 1.64373 3.73252 1.25764C4.11291 0.890684 4.71552 0.890684 5.09591 1.25764L7.21723 3.30403C7.27749 3.36218 7.32869 3.4261 7.37081 3.49407H10.5789C10.6211 3.4261 10.6723 3.36218 10.7325 3.30403L12.8538 1.25764C13.2342 0.890684 13.8368 0.890684 14.2172 1.25764C14.6175 1.64373 14.6175 2.28484 14.2172 2.67094L13.364 3.49407H14C16.2091 3.49407 18 5.28493 18 7.49407V12.9996C18 15.2087 16.2091 16.9996 14 16.9996H4C1.79086 16.9996 0 15.2087 0 12.9996V7.49406C0 5.28492 1.79086 3.49407 4 3.49407H4.58579L3.73252 2.67094ZM4 5.42343C2.89543 5.42343 2 6.31886 2 7.42343V13.0702C2 14.1748 2.89543 15.0702 4 15.0702H14C15.1046 15.0702 16 14.1748 16 13.0702V7.42343C16 6.31886 15.1046 5.42343 14 5.42343H4ZM5 9.31747C5 8.76519 5.44772 8.31747 6 8.31747C6.55228 8.31747 7 8.76519 7 9.31747V10.2115C7 10.7638 6.55228 11.2115 6 11.2115C5.44772 11.2115 5 10.7638 5 10.2115V9.31747ZM12 8.31747C11.4477 8.31747 11 8.76519 11 9.31747V10.2115C11 10.7638 11.4477 11.2115 12 11.2115C12.5523 11.2115 13 10.7638 13 10.2115V9.31747C13 8.76519 12.5523 8.31747 12 8.31747Z\\\" fill=\\\"currentColor\\\"></path></svg>\"},\"link\":\"https://www.bilibili.com/\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright© 2021-2023 zhug\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"}},\"locales\":{\"/\":{\"lang\":\"zh-CN\"}},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>