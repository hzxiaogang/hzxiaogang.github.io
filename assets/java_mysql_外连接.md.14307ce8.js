import{_ as s,o as a,c as n,V as l}from"./chunks/framework.364d6ed5.js";const e="/outer.jpg",m=JSON.parse('{"title":"外连接","description":"","frontmatter":{"title":"外连接","date":"2022-09-20T23:10:35.000Z","permalink":"/pages/407f76/","categories":["java","mysql"],"tags":[null]},"headers":[],"relativePath":"java/mysql/外连接.md","filePath":"java/mysql/外连接.md","lastUpdated":1685806707000}'),p={name:"java/mysql/外连接.md"},o=l(`<h1 id="外连接" tabindex="-1">外连接 <a class="header-anchor" href="#外连接" aria-label="Permalink to &quot;外连接&quot;">​</a></h1><h2 id="_1-外连接需求" tabindex="-1">1. 外连接需求 <a class="header-anchor" href="#_1-外连接需求" aria-label="Permalink to &quot;1. 外连接需求&quot;">​</a></h2><h4 id="_1-引出外连接" tabindex="-1">1. 引出外连接 <a class="header-anchor" href="#_1-引出外连接" aria-label="Permalink to &quot;1. 引出外连接&quot;">​</a></h4><p>前面我们学习的查询，是利用<code>where</code>字句对两张表或者多张表，形成的<strong>笛卡尔积</strong>进行筛选，根据<strong>关联条件</strong>，显示所有匹配的记录，匹配不上的，不显示。</p><p>比如：列出部门名称和这些部门的员工名称和工作，同时要求<strong>显示出那些没有员工的部门</strong>，如果我们使用以前的多表查询，实现如下：</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> dname , ename ,job</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> emp ,dept</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dept.deptno</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">ORDER BY</span><span style="color:#A6ACCD;"> dname</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><img src="`+e+`"><p>我们会发现，没有员工的部门<code>40</code>没有查出来。这时我们就可以使用外连接解决这个问题。外连接分为<strong>左外连接</strong>和<strong>右外连接</strong>。</p><h4 id="_2-准备工作" tabindex="-1">2. 准备工作 <a class="header-anchor" href="#_2-准备工作" aria-label="Permalink to &quot;2. 准备工作&quot;">​</a></h4><p>创建学生表<code>stu</code>，并插入数据</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">stu</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;"> id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">CHARACTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> stu </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tom</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">kity</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">nono</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>创建成绩表<code>exam</code>并插入数据</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">exam</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;"> id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  grade </span><span style="color:#C792EA;">INT</span></span>
<span class="line"><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">CHARACTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> exam </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">56</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">76</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_2-左外连接" tabindex="-1">2. 左外连接 <a class="header-anchor" href="#_2-左外连接" aria-label="Permalink to &quot;2. 左外连接&quot;">​</a></h2><h3 id="_2-1-概念" tabindex="-1">2.1 概念 <a class="header-anchor" href="#_2-1-概念" aria-label="Permalink to &quot;2.1 概念&quot;">​</a></h3><p>如果左侧的表完全显示我们就说是左外连接（左侧的表跟右边的表没有完全匹配的记录，它也会把左边的表全部显示出来）</p><h3 id="_2-2-语法" tabindex="-1">2.2 语法 <a class="header-anchor" href="#_2-2-语法" aria-label="Permalink to &quot;2.2 语法&quot;">​</a></h3><p><code>SELECT ... from 表一 left join 表二 on condition</code></p><h3 id="_2-3-案例" tabindex="-1">2.3 案例 <a class="header-anchor" href="#_2-3-案例" aria-label="Permalink to &quot;2.3 案例&quot;">​</a></h3><p>显示所有人的成绩，如果没有成绩，也要显示改人的姓名和 id 号，成绩为空</p><h4 id="_2-2-1-使用多表查询" tabindex="-1">2.2.1 使用多表查询 <a class="header-anchor" href="#_2-2-1-使用多表查询" aria-label="Permalink to &quot;2.2.1 使用多表查询&quot;">​</a></h4><p>只能查出<code>jack</code>和<code>tom</code>两条结果，还要两条结果没有查出来。所以不满足需求，我们可以使用左外连接查询</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, stu.id ,grade</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> stu,exam</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> stu.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> exam.id;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-2-2-使用左外连接查询" tabindex="-1">2.2.2 使用左外连接查询 <a class="header-anchor" href="#_2-2-2-使用左外连接查询" aria-label="Permalink to &quot;2.2.2 使用左外连接查询&quot;">​</a></h4><p>执行<code>sql</code>语句会查询出所有学生的成绩，没有成绩的显示为<code>null</code></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, stu.id ,grade</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> stu </span><span style="color:#F78C6C;">left JOIN</span><span style="color:#A6ACCD;"> exam</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> stu.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> exam.id;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3-右外连接" tabindex="-1">3. 右外连接 <a class="header-anchor" href="#_3-右外连接" aria-label="Permalink to &quot;3. 右外连接&quot;">​</a></h2><h3 id="_3-1-概念" tabindex="-1">3.1 概念 <a class="header-anchor" href="#_3-1-概念" aria-label="Permalink to &quot;3.1 概念&quot;">​</a></h3><p>如果右侧的表完全显示我们就说是右外连接 （右侧的表跟左边的表没有完全匹配的记录，它也会把右边的表全部显示出来）</p><h3 id="_3-2-语法" tabindex="-1">3.2 语法 <a class="header-anchor" href="#_3-2-语法" aria-label="Permalink to &quot;3.2 语法&quot;">​</a></h3><p><code>SELECT ... from 表一 right join 表二 on condition</code></p><h3 id="_3-3-案例" tabindex="-1">3.3 案例 <a class="header-anchor" href="#_3-3-案例" aria-label="Permalink to &quot;3.3 案例&quot;">​</a></h3><p>显示所有成绩，如果没有名字匹配，显示空</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, stu.id ,grade</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> stu </span><span style="color:#F78C6C;">RIGHT JOIN</span><span style="color:#A6ACCD;"> exam</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> stu.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> exam.id;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,34),r=[o];function t(c,C,i,A,d,y){return a(),n("div",null,r)}const b=s(p,[["render",t]]);export{m as __pageData,b as default};
