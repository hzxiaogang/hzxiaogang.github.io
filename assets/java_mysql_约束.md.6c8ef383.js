import{_ as s,o as a,c as n,V as l}from"./chunks/framework.364d6ed5.js";const e="/foreign_key.jpg",D=JSON.parse('{"title":"表约束","description":"","frontmatter":{"title":"表约束","date":"2022-09-20T23:11:24.000Z","permalink":"/pages/eebff8/","categories":["java","mysql"],"tags":[null]},"headers":[],"relativePath":"java/mysql/约束.md","filePath":"java/mysql/约束.md","lastUpdated":1685806707000}'),o={name:"java/mysql/约束.md"},p=l(`<h1 id="表约束" tabindex="-1">表约束 <a class="header-anchor" href="#表约束" aria-label="Permalink to &quot;表约束&quot;">​</a></h1><p>约束用于确保数据库的数据满足特定的商业规则</p><h2 id="_1-primary-key" tabindex="-1">1. primary key <a class="header-anchor" href="#_1-primary-key" aria-label="Permalink to &quot;1. primary key&quot;">​</a></h2><h3 id="_1-1-概念" tabindex="-1">1.1 概念 <a class="header-anchor" href="#_1-1-概念" aria-label="Permalink to &quot;1.1 概念&quot;">​</a></h3><p><strong>主键约束</strong>。<code>not null</code>和<code>unique</code>的结合。确保某列（或两个列多个列的结合）有唯一标识，有助于更容易更快的找到表中的一个特定的记录。</p><h3 id="_1-2-语法" tabindex="-1">1.2 语法 <a class="header-anchor" href="#_1-2-语法" aria-label="Permalink to &quot;1.2 语法&quot;">​</a></h3><p><code>字段名 字段类型 primary key</code></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">my_stu</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;"> 设置id 为主键</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_1-3-细节说明" tabindex="-1">1.3 细节说明 <a class="header-anchor" href="#_1-3-细节说明" aria-label="Permalink to &quot;1.3 细节说明&quot;">​</a></h3><ul><li><ol><li><code>primary key</code> 不能重复，且不能为<code>null</code></li></ol></li><li><ol start="2"><li>一张表最多只能有一个主键，但可以是<strong>复合主键</strong>（复合主键主键是指将多列和起来看作主键，如<code>列id</code>+ <code>列name</code>）</li></ol><p>复合主键（<code>id</code>和<code>name</code>做成复合主键）</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mt_test</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> ,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  email </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">(id,</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">)  </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;"> 这里就是符合组件</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><ol start="3"><li>主键的使用方式有两种</li></ol><ul><li>直接在字段名后指定 ： 字段名 字段类型 <code>primary key</code></li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">t_18</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  email </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>在表定义最后写 <code>primary key(列名)</code></li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">t_18</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> ,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  email </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">(id)</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><ol start="4"><li>使用<code>desc 表名</code>，可以看到<code>primary key 的情况</code></li></ol></li><li><ol start="5"><li>在实际开发中，每一个表都会有一个主键约束</li></ol></li></ul><h2 id="_2-not-null" tabindex="-1">2. not null <a class="header-anchor" href="#_2-not-null" aria-label="Permalink to &quot;2. not null&quot;">​</a></h2><h3 id="_2-1-概念" tabindex="-1">2.1 概念 <a class="header-anchor" href="#_2-1-概念" aria-label="Permalink to &quot;2.1 概念&quot;">​</a></h3><p><strong>非空约束</strong>。指示某列不能存储<code>NULL</code>值</p><h3 id="_2-2-语法" tabindex="-1">2.2 语法 <a class="header-anchor" href="#_2-2-语法" aria-label="Permalink to &quot;2.2 语法&quot;">​</a></h3><p><code>字段名 字段类型 not null</code></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">t_18</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;"> 定义非空约束</span></span>
<span class="line"><span style="color:#A6ACCD;">  email </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;"> )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_3-unique" tabindex="-1">3. unique <a class="header-anchor" href="#_3-unique" aria-label="Permalink to &quot;3. unique&quot;">​</a></h2><h3 id="_3-1-概念" tabindex="-1">3.1 概念 <a class="header-anchor" href="#_3-1-概念" aria-label="Permalink to &quot;3.1 概念&quot;">​</a></h3><p><strong>唯一约束</strong>。当定义了唯一约束后，该列值是不能重复的。</p><h3 id="_3-2-语法" tabindex="-1">3.2 语法 <a class="header-anchor" href="#_3-2-语法" aria-label="Permalink to &quot;3.2 语法&quot;">​</a></h3><p><code>字段名 字段类型 unique</code></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">t_18</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;"> 定义唯一约束</span></span>
<span class="line"><span style="color:#A6ACCD;">  email </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;"> 定义唯一约束</span></span>
<span class="line"><span style="color:#A6ACCD;"> )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-3-细节说明" tabindex="-1">3.3 细节说明 <a class="header-anchor" href="#_3-3-细节说明" aria-label="Permalink to &quot;3.3 细节说明&quot;">​</a></h3><ul><li><ol><li>如果没有指定<code>not null</code>,则<code>unique</code>字段可以有多个<code>null</code></li></ol></li><li><ol start="2"><li>一张表可以有多个<code>unique</code>字段</li></ol></li></ul><h2 id="_4-foreign-key" tabindex="-1">4. foreign key <a class="header-anchor" href="#_4-foreign-key" aria-label="Permalink to &quot;4. foreign key&quot;">​</a></h2><h3 id="_4-1-概念" tabindex="-1">4.1 概念 <a class="header-anchor" href="#_4-1-概念" aria-label="Permalink to &quot;4.1 概念&quot;">​</a></h3><p><strong>外键约束</strong>。用于定义主表和从表之间的关系。有以下特点</p><ul><li><ol><li><strong>外键约束</strong>要定义在<strong>从表上</strong></li></ol></li><li><ol start="2"><li><strong>主表</strong>必须具有<strong>主键约束</strong>或是<code>unique</code>约束</li></ol></li><li><ol start="3"><li>当定义外键约束后，要求<strong>外键列数据</strong>必须在<strong>主表的主键列存在</strong>或是<code>null</code></li></ol></li></ul><img src="`+e+`"><p>如上图： 班级表<code>my_class</code>是主表，其<code>id</code>是主键。学生表<code>my_stu</code>是从表，其<code>class_id</code>是外键</p><ul><li><ol><li>由于外键<code>300</code>不存在于<strong>组件列</strong>，所以<code>sn_003</code>所在行数据插入<code>my_stu</code>表会失败。</li></ol></li><li><ol start="2"><li>如果直接删除主表<code>my_class</code>中<code>id</code>为<code>200</code>的数据，也会删除失败，因为从表<code>my_stu</code>中外键<code>class_id</code>有等于<code>200</code>的记录。 如果想删除成功，除非先删除从表<code>my_stu</code>中外键<code>class_id</code>等于<code>200</code>的数据，在删除主表<code>my_class</code>中<code>id</code>为<code>200</code>的数据。</li></ol><p>即：</p><ul><li>从表添加数据 ：从表外键必须在主表的主件列中</li><li>主表删除数据 ：如果主表主键存在于从表外键所在列，则删除失败。</li></ul></li></ul><h3 id="_4-2-语法" tabindex="-1">4.2 语法 <a class="header-anchor" href="#_4-2-语法" aria-label="Permalink to &quot;4.2 语法&quot;">​</a></h3><p><code>FOREIGN KEY (从表字段名) REFERENCES 主表名(主键名或unique字段名)</code></p><h4 id="_4-2-1-创建主表-my-class-并添加数据" tabindex="-1">4.2.1 创建主表 my_class 并添加数据 <a class="header-anchor" href="#_4-2-1-创建主表-my-class-并添加数据" aria-label="Permalink to &quot;4.2.1 创建主表 my_class 并添加数据&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">my_class</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;"> 添加主键</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"> )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> my_class </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">java</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">web</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_4-2-2-创建从表-my-stu" tabindex="-1">4.2.2 创建从表 my_stu <a class="header-anchor" href="#_4-2-2-创建从表-my-stu" aria-label="Permalink to &quot;4.2.2 创建从表 my_stu&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">my_stu</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">NOT NULL</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  class_id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">FOREIGN KEY</span><span style="color:#A6ACCD;">(class_id) </span><span style="color:#C792EA;">REFERENCES</span><span style="color:#A6ACCD;"> my_class(id) </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;"> 添加外键</span></span>
<span class="line"><span style="color:#A6ACCD;"> )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INSERT INTO</span><span style="color:#A6ACCD;"> my_stu </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tom</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_4-2-3-测试上面两个表" tabindex="-1">4.2.3 测试上面两个表 <a class="header-anchor" href="#_4-2-3-测试上面两个表" aria-label="Permalink to &quot;4.2.3 测试上面两个表&quot;">​</a></h4><ul><li><ol><li>下面的向<code>my_stu</code>表插入数据失败，因为外键<code>300</code>在主表的主键列中不存在。</li></ol></li></ul><p><code>INSERT INTO my_stu VALUES(3,&#39;zhug&#39;,300)</code></p><ul><li><ol start="2"><li>下面把主表<code>id</code>为<code>200</code>的记录删除失败，因为从表中 外键值存在<code>200</code>这个值</li></ol><p><code>DELETE from my_class WHERE id=200</code></p></li></ul><h3 id="_4-3-注意事项" tabindex="-1">4.3 注意事项 <a class="header-anchor" href="#_4-3-注意事项" aria-label="Permalink to &quot;4.3 注意事项&quot;">​</a></h3><ul><li><ol><li>外键指向的表的字段，要求是<code>primary key</code> 或者是<code>unique</code></li></ol></li><li><ol start="2"><li>表的类型是 <code>innodb</code>,这样的表才支持外键</li></ol></li><li><ol start="3"><li>外键字段的类型要和主键字段的类型一直（长度可以不同）</li></ol></li><li><ol start="4"><li>外键字段的值，必须在主键字段中出现过，或者为<code>null</code>(前提是外键字段允许为<code>null</code>)</li></ol></li><li><ol start="5"><li>一旦建立主外键的关系，数据就不能随意删除了</li></ol></li></ul><h2 id="_5-check" tabindex="-1">5. check <a class="header-anchor" href="#_5-check" aria-label="Permalink to &quot;5. check&quot;">​</a></h2><h3 id="_5-1-概念" tabindex="-1">5.1 概念 <a class="header-anchor" href="#_5-1-概念" aria-label="Permalink to &quot;5.1 概念&quot;">​</a></h3><p><strong>检查约束</strong>。用于强制行数据满足的条件。假定在<code>sal</code>列上定义了<code>check</code>约束，并要求<code>sal</code>的值在<code>1000-2000</code>之间。如果不在<code>1000-2000</code>之间就会提示错误。</p><p><code>oracle</code>和<code>sql server</code> 都支持<code>check</code>，但是<code>mysql5.7</code>目前还不支持<code>check</code>，只做语法校验，但是不会生效。</p><p>在<code>mysql</code>中实现<code>check</code>的功能，一般是在程序中控制，或者通过<strong>触发器</strong>完成</p><h3 id="_5-2-语法" tabindex="-1">5.2 语法 <a class="header-anchor" href="#_5-2-语法" aria-label="Permalink to &quot;5.2 语法&quot;">​</a></h3><p><code>列名 类型 check (check 条件)</code></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tb_emp</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;"> id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;"> sex </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">CHECK</span><span style="color:#A6ACCD;"> (sex </span><span style="color:#F78C6C;">IN</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">man</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">woman</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)),</span></span>
<span class="line"><span style="color:#A6ACCD;"> sal DOUBLE </span><span style="color:#C792EA;">CHECK</span><span style="color:#A6ACCD;"> (sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AND</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_6-auto-increment" tabindex="-1">6. auto_increment <a class="header-anchor" href="#_6-auto-increment" aria-label="Permalink to &quot;6. auto_increment&quot;">​</a></h2><h3 id="_6-1-概念" tabindex="-1">6.1 概念 <a class="header-anchor" href="#_6-1-概念" aria-label="Permalink to &quot;6.1 概念&quot;">​</a></h3><p><strong>自增约束</strong>。插入可忽略此字段，此字段会自己增加存储数字。默认从<code>1</code>开始，每次递增<code>1</code></p><h3 id="_6-2-语法" tabindex="-1">6.2 语法 <a class="header-anchor" href="#_6-2-语法" aria-label="Permalink to &quot;6.2 语法&quot;">​</a></h3><p><code>字段名 整形 primary key auto_increment</code></p><p>添加自增长字段的方式</p><p><code>insert into tab_name (字段1,字段2...) values(null,&#39;值&#39;)</code></p><p><code>insert into tab_name (字段2...) values(&#39;值1&#39;,&#39;值2&#39;)</code></p><p><code>insert into tab_name values(null,&#39;值1&#39;....)</code></p><p>注意 ：设置为<code>auto_increment</code>的字段，在插入记录时，该字段可以省略。如果加上，可以使用<code>null</code>代替</p><h3 id="_6-3-案例" tabindex="-1">6.3 案例 <a class="header-anchor" href="#_6-3-案例" aria-label="Permalink to &quot;6.3 案例&quot;">​</a></h3><h4 id="添加自增长约束" tabindex="-1">添加自增长约束 <a class="header-anchor" href="#添加自增长约束" aria-label="Permalink to &quot;添加自增长约束&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tb_user</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  id </span><span style="color:#C792EA;">INT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">PRIMARY KEY</span><span style="color:#A6ACCD;"> auto_increment, </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;"> 添加自增长约束</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  sex </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  age </span><span style="color:#C792EA;">INT</span></span>
<span class="line"><span style="color:#A6ACCD;"> )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="添加自增长字段" tabindex="-1">添加自增长字段 <a class="header-anchor" href="#添加自增长字段" aria-label="Permalink to &quot;添加自增长字段&quot;">​</a></h4><p><code>INSERT INTO tb_user (id,name,sex,age) VALUES(null,&#39;tom&#39;,&#39;man&#39;,20)</code></p><p><code>INSERT INTO tb_user (name,sex,age) VALUES(&#39;jake&#39;,&#39;man&#39;,20)</code></p><p><code>INSERT INTO tb_user VALUES(null,&#39;rose&#39;,&#39;man&#39;,20)</code></p><h3 id="_6-4-注意细节" tabindex="-1">6.4 注意细节 <a class="header-anchor" href="#_6-4-注意细节" aria-label="Permalink to &quot;6.4 注意细节&quot;">​</a></h3><ul><li><ol><li>一般来说<strong>自增长</strong>是和<code>primary key</code> 配合使用的</li></ol></li><li><ol start="2"><li>自增长也可以单独使用，但是需要配合一个 <code>unique</code></li></ol></li><li><ol start="3"><li>自增长修饰的字段为<strong>整数型</strong>的（虽然小数也可以，但是非常少这样使用）</li></ol></li><li><ol start="4"><li>自增长默认从<code>1</code>开始，你也可以通过下面命令修改</li></ol></li></ul><p><code>ALTER TABLE tab_name auto_increment = 新的开始值</code></p><ul><li><ol start="5"><li>如果你添加数据时，给自增长字段（列）指定的有值，则以指定的值为准</li></ol></li></ul><p>添加的数据<code>id</code>是<code>100</code>,如果后续再添加记录，<code>id</code>从<code>100</code>开始自增长</p><p><code>INSERT INTO tb_user (id,name,sex,age) VALUES(100,&#39;tom&#39;,&#39;man&#39;,20)</code></p><ul><li><ol start="6"><li>如果指定了自增长，一般来说，就按照自增长的规则来添加数据</li></ol></li></ul><h2 id="_7-default" tabindex="-1">7. default <a class="header-anchor" href="#_7-default" aria-label="Permalink to &quot;7. default&quot;">​</a></h2><p><strong>默认值约束</strong>。规定没有给列赋值时的默认值</p>`,77),c=[p];function r(t,C,i,A,d,y){return a(),n("div",null,c)}const m=s(o,[["render",r]]);export{D as __pageData,m as default};
