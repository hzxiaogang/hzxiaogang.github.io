import{_ as s,o as a,c as n,V as l}from"./chunks/framework.364d6ed5.js";const D=JSON.parse('{"title":"Docker部署java开发环境","description":"","frontmatter":{},"headers":[],"relativePath":"java/java/Docker部署java开发环境.md","filePath":"java/java/Docker部署java开发环境.md","lastUpdated":1704716480000}'),e={name:"java/java/Docker部署java开发环境.md"},p=l(`<h1 id="docker部署java开发环境" tabindex="-1">Docker部署java开发环境 <a class="header-anchor" href="#docker部署java开发环境" aria-label="Permalink to &quot;Docker部署java开发环境&quot;">​</a></h1><h2 id="_1-docker学习" tabindex="-1">1. Docker学习 <a class="header-anchor" href="#_1-docker学习" aria-label="Permalink to &quot;1. Docker学习&quot;">​</a></h2><h3 id="_1-docker的版本发展" tabindex="-1">1. Docker的版本发展 <a class="header-anchor" href="#_1-docker的版本发展" aria-label="Permalink to &quot;1. Docker的版本发展&quot;">​</a></h3><p>刚开始学习<code>Docker</code>的时候，被<code>docker.io</code>，<code>docker-io</code>，<code>docker-engine</code>，<code>docker-ce</code>，<code>docker-ee</code>，这些名称搞晕了，到底应该安装那个呢？<code>Docker</code>之所以有那么多名称，是由于它的发展历史决定的。</p><h4 id="_1-为什么会有docker-io、docker-io这种命名方式" tabindex="-1">1. 为什么会有docker.io、docker-io这种命名方式 <a class="header-anchor" href="#_1-为什么会有docker-io、docker-io这种命名方式" aria-label="Permalink to &quot;1. 为什么会有docker.io、docker-io这种命名方式&quot;">​</a></h4><ul><li><ol><li>在 <code>Docker</code> 技术出现之前，<code>Linux</code>中已经有一个叫 <code>docker</code> 的工具，它是一个窗口停靠栏程序。</li></ol></li><li><ol start="2"><li><code>Docker</code>技术出来以后，由于在<code>Linux</code>系统中软件名不能与 <code>docker</code> 重名，而且那个时候 <code>Docker</code> 的官网是 <code>http://docker.io</code>，所以，就在软件名称上加了 <code>io</code> 的后缀。 于是，在 <code>Ubuntu</code> 中就是<code>docker.io</code>，在 <code>CentOS</code> 中就是<code>docker-io</code>。在这个时期，<code>Linux</code>系统如果要安装 <code>Docker</code>，就要用 <code>docke</code>r 加 <code>io</code> 后缀的方式来安装。</li></ol></li></ul><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Ubuntu</span></span>
<span class="line"><span style="color:#FFCB6B;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker.io</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># CentOS</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-io</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_2-从docker-io到docker-engine" tabindex="-1">2.从docker.io到docker-engine <a class="header-anchor" href="#_2-从docker-io到docker-engine" aria-label="Permalink to &quot;2.从docker.io到docker-engine&quot;">​</a></h4><p>后来随着 <code>Docker</code> 的发展，软件包名改成了 <code>docker-engine</code>，名称达到了统一。</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Ubuntu</span></span>
<span class="line"><span style="color:#FFCB6B;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-engine</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># CentOS</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-engine</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3-从docker-engine到docker" tabindex="-1">3. 从docker-engine到docker <a class="header-anchor" href="#_3-从docker-engine到docker" aria-label="Permalink to &quot;3. 从docker-engine到docker&quot;">​</a></h4><p>再后来，随着 <code>Docker</code> 技术的火爆，在征得 <code>docker</code> 停靠栏程序作者同意下，给他的软件名称改了，改成了<code>wmdocker</code>，<code>Docker</code> 容器技术的软件包名才正式成了 <code>docker</code> 这个名称，<code>Docker</code>软件包的名称又得到了一次统一。</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Ubuntu</span></span>
<span class="line"><span style="color:#FFCB6B;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># CentOS</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_4-docker-ce-与-docker-ee" tabindex="-1">4. docker-ce 与 docker-ee <a class="header-anchor" href="#_4-docker-ce-与-docker-ee" aria-label="Permalink to &quot;4. docker-ce 与 docker-ee&quot;">​</a></h4><p><code>Docker</code> 发展到 <code>1.13.1</code> 版本后，<code>Docker</code> 公司把<code> Docker</code> 分成了两种形式 :</p><ul><li><ol><li><code>docker-ce</code> 社区版，免费</li></ol></li><li><ol start="2"><li><code>docker-ee</code> 商业版，收费 并且版本号的命名方式也改了，以前都是那种常用的版本号命名方式，比如<code>0.1</code>、<code>0.2</code>、<code>1.0</code>之类的，现在分社区版和商业版后，版本号是<code>『YY.MM-xx』</code>的形式命名的，比如<code>2019年10</code>月发布的，版本号就是<code>19.10</code>。所以在 <code>Docker 1.13.1</code> 之后，直接是 <code>Docker-ce 17.03.0</code> 版本了。</li></ol></li></ul><p>现在要安装最新版的<code>Docker</code>软件包，就是使用 <code>docker-ce</code> 这个名称了，如果是商业版的就是 <code>docker-ee</code></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Ubuntu</span></span>
<span class="line"><span style="color:#FFCB6B;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># CentOS</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果现在想学习<code>Docker</code>，一定要用最新的软件包，也就是 <code>docker-ce</code>。像 <code>docker.io</code>、<code>docker-io</code>、<code>docker-engine</code>、<code>docker</code> 这些都是旧版本，已经不适合使用了。</p><h4 id="_5-ubuntu维护的docker-io" tabindex="-1">5. Ubuntu维护的docker.io <a class="header-anchor" href="#_5-ubuntu维护的docker-io" aria-label="Permalink to &quot;5. Ubuntu维护的docker.io&quot;">​</a></h4><p>在<code>Ubuntu</code>系统中，除了可以使用<code>apt-get install docker-ce</code> 命令安装<code>docker</code>外，还可以使用下面这个命令安装： <code>apt-get install docker.io</code>。</p><p><code>docker.io</code>不是老古董版本吗?怎么还用这个命令安装？这是因为，随着<code>docker</code>的发展，<code>docker</code>的名称虽然发生了三番五次的变化，但<code>Ubuntu</code>上的<code>docker.io</code>却一直在维护。所以，如果你的是<code>Ubuntu</code>系统，也可以用这种方法安装。</p><h3 id="_2-linux系统准备" tabindex="-1">2.linux系统准备 <a class="header-anchor" href="#_2-linux系统准备" aria-label="Permalink to &quot;2.linux系统准备&quot;">​</a></h3><p>建议安装<code>centos7.5</code>及以上版本的<code>linux</code>系统。使用<code>x86_64</code>指令集的<code>CPU</code>。</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 查看系统版本</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/system-release</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># CentOS Linux release 7.9.2009 (Core)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看CPU指令集</span></span>
<span class="line"><span style="color:#FFCB6B;">uname</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># x86_64</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>linux</code>系统有很多版本如<code>centos</code>，<code>ubuntu</code>等。我们能这里使用<code>centos 7.9</code>。</p><p><code>CPU</code>指令集分为 ：</p><ul><li><ol><li><code>X86_64</code> : 我们常用的台式机的体系架构，<code>intel</code>、<code>AMD</code> 等厂商使用</li></ol></li><li><ol start="2"><li><code>aarch64</code> : <code>aarch64</code> 是一种 <code>ARMv8</code> 架构。华为、高通、苹果等厂商使用</li></ol></li></ul><h3 id="_2-安装docker" tabindex="-1">2. 安装Docker <a class="header-anchor" href="#_2-安装docker" aria-label="Permalink to &quot;2. 安装Docker&quot;">​</a></h3><h4 id="_1-卸载旧版本的docker" tabindex="-1">1. 卸载旧版本的Docker <a class="header-anchor" href="#_1-卸载旧版本的docker" aria-label="Permalink to &quot;1. 卸载旧版本的Docker&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remove</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-client</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-client-latest</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-common</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-latest</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-latest-logrotate</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-logrotate</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-selinux</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-engine-selinux</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-engine</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-ce</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_2-安装yum工具" tabindex="-1">2. 安装yum工具 <a class="header-anchor" href="#_2-安装yum工具" aria-label="Permalink to &quot;2. 安装yum工具&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yum-utils</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">device-mapper-persistent-data</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">lvm2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--skip-broken</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_3-更新本地镜像源" tabindex="-1">3.更新本地镜像源 <a class="header-anchor" href="#_3-更新本地镜像源" aria-label="Permalink to &quot;3.更新本地镜像源&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 设置docker镜像源</span></span>
<span class="line"><span style="color:#FFCB6B;">yum-config-manager</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">--add-repo</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#FFCB6B;">sed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/download.docker.com/mirrors.aliyun.com\\/docker-ce/g</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">makecache</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">fast</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_4-安装docker" tabindex="-1">4. 安装docker <a class="header-anchor" href="#_4-安装docker" aria-label="Permalink to &quot;4. 安装docker&quot;">​</a></h4><p><code>docker-ce</code>为社区免费版本。稍等片刻，<code>docker</code>即可安装成功</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>安装完毕后使用下面命令查看<code>docker</code>是否安装成功</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 检查docker版本</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_5-启动docker服务" tabindex="-1">5. 启动docker服务 <a class="header-anchor" href="#_5-启动docker服务" aria-label="Permalink to &quot;5. 启动docker服务&quot;">​</a></h4><p><code>Docker</code>应用需要用到各种端口，逐一去修改防火墙设置。非常麻烦，因此建议大家启动<code>docker</code>前直接关闭防火墙</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 关闭</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewalld</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 禁止开机启动防火墙</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">disable</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewalld</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看防火墙状态是否被关闭</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewalld</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动docker服务</span></span>
<span class="line highlighted"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 停止docker服务</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 重启docker服务</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_3-镜像和容器操作-✔" tabindex="-1">3. 镜像和容器操作 ✔ <a class="header-anchor" href="#_3-镜像和容器操作-✔" aria-label="Permalink to &quot;3. 镜像和容器操作 ✔&quot;">​</a></h3><p>容器是镜像的运行实例。镜像运行后就是容器，类似于<code>java</code>类和实例的关系。</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 搜索镜像，支持模糊搜索</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 拉取镜像，冒号后是版本号，不加冒号和版本则默认拉取最新版本</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像名:版本号</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 列出本地镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">images</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 删除镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像名:版本号</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 运行镜像 使用镜像以交互模式在后台启动一个容器,在容器内执行/bin/bash命令</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">镜像名:版本号</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看所有容器，包括停止的容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 停止容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器id/容器名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器id/容器名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 删除容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">容器id</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_4-卸载docker" tabindex="-1">4. 卸载Docker <a class="header-anchor" href="#_4-卸载docker" aria-label="Permalink to &quot;4. 卸载Docker&quot;">​</a></h3><p>卸载<code>Docker</code>需要先删除容器，再删除镜像。最后再卸载<code>Docker</code></p><h4 id="_1-停止所有运行的容器" tabindex="-1">1. 停止所有运行的容器 <a class="header-anchor" href="#_1-停止所有运行的容器" aria-label="Permalink to &quot;1. 停止所有运行的容器&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> ps -aq</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_2-删除所有容器" tabindex="-1">2. 删除所有容器 <a class="header-anchor" href="#_2-删除所有容器" aria-label="Permalink to &quot;2. 删除所有容器&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> ps -aq</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_3-删除所有镜像" tabindex="-1">3. 删除所有镜像 <a class="header-anchor" href="#_3-删除所有镜像" aria-label="Permalink to &quot;3. 删除所有镜像&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmi</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">docker</span><span style="color:#C3E88D;"> images -q</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_4-卸载-docker" tabindex="-1">4. 卸载 Docker <a class="header-anchor" href="#_4-卸载-docker" aria-label="Permalink to &quot;4. 卸载 Docker&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remove</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-client</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-client-latest</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-common</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-latest</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-latest-logrotate</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-logrotate</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-selinux</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-engine-selinux</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-engine</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#C3E88D;">docker-ce</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_5-删除-docker-数据目录" tabindex="-1">5. 删除 Docker 数据目录 <a class="header-anchor" href="#_5-删除-docker-数据目录" aria-label="Permalink to &quot;5. 删除 Docker 数据目录&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/lib/docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这个命令会删除 <code>Docker</code> 数据目录，包括所有容器、镜像和数据卷</p><h4 id="_6-查看是否有漏掉的docker依赖" tabindex="-1">6. 查看是否有漏掉的docker依赖 <a class="header-anchor" href="#_6-查看是否有漏掉的docker依赖" aria-label="Permalink to &quot;6. 查看是否有漏掉的docker依赖&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#676E95;font-style:italic;">#查看是否有漏掉的docker依赖</span></span>
<span class="line highlighted"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">list</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">installed</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 卸载漏掉的依赖</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remove</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-buildx-plugin.x86_64</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose-plugin.x86_64</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_3-安装jdk" tabindex="-1">3. 安装jDK <a class="header-anchor" href="#_3-安装jdk" aria-label="Permalink to &quot;3. 安装jDK&quot;">​</a></h2><p>下面是基于<code>centos</code>使用<code>docker</code>通过<code>Dockerfile</code>安装<code>jdk8</code>的过程。</p><h3 id="_1-准备jdk8包和dockerfile文件" tabindex="-1">1.准备jdk8包和Dockerfile文件 <a class="header-anchor" href="#_1-准备jdk8包和dockerfile文件" aria-label="Permalink to &quot;1.准备jdk8包和Dockerfile文件&quot;">​</a></h3><p>在<code>Linux</code>主机系统上新建<code>java8</code>目录，将<code>jdk8</code>的<code>tar</code>包上传到新建的目中，然后在同目录下创建<code>Dockerfile</code>文件，并在<code>Dockerfile</code>文件中加入相应的内容。</p><p>我么这里在<code>/usr/</code>目录下创建<code>java8</code>目录。<code>jdk</code>包的名字叫<code>jdk-8u371-linux-x64.tar.gz</code></p><h3 id="_2-配置dockerfile文件" tabindex="-1">2.配置Dockerfile文件 <a class="header-anchor" href="#_2-配置dockerfile文件" aria-label="Permalink to &quot;2.配置Dockerfile文件&quot;">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#1.指定基础镜像(cat /etc/system-release 命令查看centos版本)</span></span>
<span class="line"><span style="color:#FFCB6B;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">centos:7.9.2009</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#2.指明该镜像的作者和其电子邮件</span></span>
<span class="line"><span style="color:#FFCB6B;">MAINTAINER</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zhug</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1941226202@qq.com</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#3.在构建镜像时，指定镜像的工作目录，之后的命令都是基于此目录，如果不存在，则会创建</span></span>
<span class="line"><span style="color:#FFCB6B;">WORKDIR</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/user/java8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#4.一个复制命令，把jdk安装文件复制到镜像中，</span></span>
<span class="line"><span style="color:#FFCB6B;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jdk-8u371-linux-x64.tar.gz</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/user/java8/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#5.配置环境变量</span></span>
<span class="line"><span style="color:#FFCB6B;">ENV</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">JAVA_HOME=/user/java8/jdk1.8.0_371</span></span>
<span class="line"><span style="color:#FFCB6B;">ENV</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CLASSPATH=.:</span><span style="color:#A6ACCD;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib/dt.jar:</span><span style="color:#A6ACCD;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib/tools.jar</span></span>
<span class="line"><span style="color:#FFCB6B;">ENV</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PATH=</span><span style="color:#A6ACCD;">$JAVA_HOME</span><span style="color:#C3E88D;">/bin:</span><span style="color:#A6ACCD;">$PATH</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#容器启动时需要执行的命令</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#CMD [&quot;java&quot;,&quot;-version&quot;]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_3-构建镜像" tabindex="-1">3. 构建镜像 <a class="header-anchor" href="#_3-构建镜像" aria-label="Permalink to &quot;3. 构建镜像&quot;">​</a></h3><p>在<code>Dockerfile</code>所在目录下运行命令。注意后面的<code>.</code>是指当前目录，不能少。</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 构建镜像 名称为jdk8 版本为v1.0</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jdk8:v1.0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看镜像  可以查看到上一步骤构建的镜像 jdk8:v1.0</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">images</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-运行镜像生成容器" tabindex="-1">4. 运行镜像生成容器 <a class="header-anchor" href="#_4-运行镜像生成容器" aria-label="Permalink to &quot;4. 运行镜像生成容器&quot;">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># jdk_8 : 容器名称  jdk8:v1.0 镜像名称</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jdk_8</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jdk8:v1.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-进入容器并检查java版本" tabindex="-1">5. 进入容器并检查java版本 <a class="header-anchor" href="#_5-进入容器并检查java版本" aria-label="Permalink to &quot;5. 进入容器并检查java版本&quot;">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 进入容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jdk_8</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 检查java版本， 输出版本号，则jdk安装成功</span></span>
<span class="line"><span style="color:#FFCB6B;">java</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-version</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 退出容器</span></span>
<span class="line"><span style="color:#82AAFF;">exit</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_4-安装tomcat" tabindex="-1">4.安装tomcat <a class="header-anchor" href="#_4-安装tomcat" aria-label="Permalink to &quot;4.安装tomcat&quot;">​</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 拉取tomcat8镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tomcat:8</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 运行镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8080</span><span style="color:#C3E88D;">:8080</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name=tomcat_8</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tomcat:8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 访问tomcat </span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#C3E88D;">.0.0:8080</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>访问<code>tomcat</code>会发现报<code>404</code></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 进入tomcat容器</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mytomcat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看目录， 会发现有一个webapps目录和webapps.dist目录</span></span>
<span class="line"><span style="color:#FFCB6B;">ls</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 进入webapps目录并查看webapps目录</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">webapps</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看webapps目录发现该目录是一个空目录，所以访问是404</span></span>
<span class="line"><span style="color:#FFCB6B;">ls</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 进入到 webapps.dist目录并将webapps.dist目录复制到webapps目录下</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">webapps.dist</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 复制文件。-r表示递归复制</span></span>
<span class="line"><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">../webapps/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>再次通过<code>curl 0.0.0.0:8080</code>检测，发现<code>tomcat</code>已经可以正常访问了。</p><p>也可以使用<code>虚拟机ip:8080</code>在浏览器访问。如<code>192.168.13.130:8080</code></p><h2 id="_5-安装mysql" tabindex="-1">5. 安装mysql <a class="header-anchor" href="#_5-安装mysql" aria-label="Permalink to &quot;5. 安装mysql&quot;">​</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 安装mysql 5.7版本</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pull</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql:5.7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#运行镜像</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql5.7</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3306</span><span style="color:#C3E88D;">:3306</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MYSQL_ROOT_PASSWORD=</span><span style="color:#F78C6C;">123456</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">端口映射，格式为：主机</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">宿主</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">端口:容器端口</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">–name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">命名容器名称</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">后台运行容器，并返回容器ID</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">设置环境变量</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 进入容器mysql5.7</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql5.7</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 验证</span></span>
<span class="line"><span style="color:#FFCB6B;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p123456</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#数据库账号的远程登录权限 </span></span>
<span class="line"><span style="color:#FFCB6B;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.</span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 授权</span></span>
<span class="line"><span style="color:#FFCB6B;">flush</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">privileges</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 刷新权限</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div>`,83),o=[p];function c(r,t,i,d,C,y){return a(),n("div",null,o)}const u=s(e,[["render",c]]);export{D as __pageData,u as default};
