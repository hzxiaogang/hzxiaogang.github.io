import{_ as s,o as a,c as e,V as n}from"./chunks/framework.364d6ed5.js";const o="/view.png",u=JSON.parse('{"title":"视图","description":"","frontmatter":{"title":"视图","date":"2022-09-28T18:41:25.000Z","permalink":"/pages/ab4087/","categories":["java","mysql"],"tags":[null]},"headers":[],"relativePath":"java/mysql/视图.md","filePath":"java/mysql/视图.md","lastUpdated":1685806707000}'),l={name:"java/mysql/视图.md"},p=n('<h1 id="视图" tabindex="-1">视图 <a class="header-anchor" href="#视图" aria-label="Permalink to &quot;视图&quot;">​</a></h1><h2 id="_1-需求" tabindex="-1">1. 需求 <a class="header-anchor" href="#_1-需求" aria-label="Permalink to &quot;1. 需求&quot;">​</a></h2><p><strong>不同的用户查询同一个表的内容不同（权限不同）</strong>。例入：</p><p>雇员表<code>emp</code>列信息很多，如（<code>empno</code>,<code>ename</code>,<code>job</code>,<code>mgr</code>,<code>hiredate</code>,<code>sal</code>,<code>comm</code>,<code>deptno</code>）。如果我们希望<strong>某个用户</strong>只能查询<code>emp</code>表的<strong>部分信息</strong>，如（<code>empno</code>,<code>ename</code>,<code>job</code>，<code>deptno</code>），有什么办法呢？</p><p>根据<code>emp</code>表创建视图表，用户<strong>查询视图表</strong>就可以了。</p><h2 id="_2-基本概念" tabindex="-1">2. 基本概念 <a class="header-anchor" href="#_2-基本概念" aria-label="Permalink to &quot;2. 基本概念&quot;">​</a></h2><p><strong>视图</strong>是一个<strong>虚拟表</strong>，其内容由查询定义。同真实的表一样，视图包含列，起<strong>数据来源</strong>自对应的<strong>真实表（基表）</strong></p><h2 id="_3-视图和基表的关系示意图" tabindex="-1">3. 视图和基表的关系示意图 <a class="header-anchor" href="#_3-视图和基表的关系示意图" aria-label="Permalink to &quot;3. 视图和基表的关系示意图&quot;">​</a></h2><img src="'+o+`"><h2 id="_4-视图的基本使用" tabindex="-1">4. 视图的基本使用 <a class="header-anchor" href="#_4-视图的基本使用" aria-label="Permalink to &quot;4. 视图的基本使用&quot;">​</a></h2><h3 id="_4-1-创建视图" tabindex="-1">4.1 创建视图 <a class="header-anchor" href="#_4-1-创建视图" aria-label="Permalink to &quot;4.1 创建视图&quot;">​</a></h3><p><code>create view 视图名 as select语句</code>、</p><p>创建单表视图</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">VIEW</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emp_view01</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">AS</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> empno,ename,job,deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>创建<strong>多表联合视图</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">VIEW</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">view_category_goods</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">AS</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> category.t_category, goods.t_name, goods.t_price</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> t_goods_category category, t_goods goods</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> category.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> goods.t_category_id;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-2-修改视图" tabindex="-1">4.2 修改视图 <a class="header-anchor" href="#_4-2-修改视图" aria-label="Permalink to &quot;4.2 修改视图&quot;">​</a></h3><p><code>alter view 试图名 as select语句</code></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">VIEW</span><span style="color:#A6ACCD;"> emp_view01</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">as</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> ename </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-3-查看视图信息" tabindex="-1">4.3 查看视图信息 <a class="header-anchor" href="#_4-3-查看视图信息" aria-label="Permalink to &quot;4.3 查看视图信息&quot;">​</a></h3><p><code>SHOW CREATE VIEW 视图名</code></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> VIEW emp_view01</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_4-4-删除视图" tabindex="-1">4.4 删除视图 <a class="header-anchor" href="#_4-4-删除视图" aria-label="Permalink to &quot;4.4 删除视图&quot;">​</a></h3><p><code>drop view 视图名1，视图名2 ...</code></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> emp_view01</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_5-视图的细节" tabindex="-1">5. 视图的细节 <a class="header-anchor" href="#_5-视图的细节" aria-label="Permalink to &quot;5. 视图的细节&quot;">​</a></h2><h3 id="_5-1-细节" tabindex="-1">5.1 细节 <a class="header-anchor" href="#_5-1-细节" aria-label="Permalink to &quot;5.1 细节&quot;">​</a></h3><ul><li><ol><li>视图创建后，到<strong>数据库</strong>去看，对应视图只有一个<strong>视图结构文件</strong>（形式：<strong>视图名.frm</strong>）</li></ol></li><li><ol start="2"><li>视图的数据变化会影响到基表，基表的数据变化也会影响到视图（<code>DML</code> 操作（<code>insert</code>,<code>delete</code>,<code>update</code>））</li></ol></li><li><ol start="3"><li>除了根据基表创建视图外，还可以根据视图创建视图。</li></ol></li></ul><h3 id="_5-2-根据视图创建视图" tabindex="-1">5.2 根据视图创建视图 <a class="header-anchor" href="#_5-2-根据视图创建视图" aria-label="Permalink to &quot;5.2 根据视图创建视图&quot;">​</a></h3><p>跟据基表创建视图</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">VIEW</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emp_view01</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">AS</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> empno,ename,job,deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>根据视图<code>emp_view01</code>创建视图<code>emp_view02</code>。语法和根据基表创建视图一样。基表的数据变化，也会影响到<code>emp_view02</code></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">VIEW</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emp_view02</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">AS</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> empno,ename </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp_view01;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_6-视图的优点" tabindex="-1">6. 视图的优点 <a class="header-anchor" href="#_6-视图的优点" aria-label="Permalink to &quot;6. 视图的优点&quot;">​</a></h2><h3 id="_6-1-安全" tabindex="-1">6.1 安全 <a class="header-anchor" href="#_6-1-安全" aria-label="Permalink to &quot;6.1 安全&quot;">​</a></h3><p>一些数据表有重要的信息。有些字段是保密的，不能让用户直接看到。这时就可以创建一个视图，在这张视图只保留一部分字段。这样，用户就可以查询自己需要的字段，不能查看保密的字段。</p><h3 id="_6-2-性能" tabindex="-1">6.2 性能 <a class="header-anchor" href="#_6-2-性能" aria-label="Permalink to &quot;6.2 性能&quot;">​</a></h3><p>关系数据库的数据常常会<strong>分表存储</strong>，使用<strong>外键</strong>建立这些<strong>表</strong>的<strong>之间关系</strong>。这时，数据库查询通常会用到<strong>连接</strong>（<code>JOIN</code>）。这样做不但麻烦，效率相对也比较低。如果建立一个视图（<strong>多表联合视图</strong>），将相关字段组合在一起，就可以避免使用<code>JOIN</code>查询数据。</p><h3 id="_6-3-灵活" tabindex="-1">6.3 灵活 <a class="header-anchor" href="#_6-3-灵活" aria-label="Permalink to &quot;6.3 灵活&quot;">​</a></h3><p>如果系统中有一张旧的表，这张表由于设计问题，即将被废弃。然而很多应用都是基于这张表，不宜修改。这时就可以建立一张视图表，视图中的数据直接映射到新建的表。这样，就可以少做很多改动，也达到升级数据表的目的。</p>`,40),r=[p];function t(c,i,d,C,m,h){return a(),e("div",null,r)}const A=s(l,[["render",t]]);export{u as __pageData,A as default};
