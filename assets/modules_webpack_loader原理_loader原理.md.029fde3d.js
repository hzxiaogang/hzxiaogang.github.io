import{_ as s,o as a,c as l,V as n}from"./chunks/framework.364d6ed5.js";const u=JSON.parse('{"title":"loader原理","description":"","frontmatter":{"title":"loader原理","date":"2022-07-12T14:52:31.000Z","permalink":"/pages/e73a26/","categories":["modules","webpack","原理","loader原理"],"tags":[null]},"headers":[],"relativePath":"modules/webpack/loader原理/loader原理.md","filePath":"modules/webpack/loader原理/loader原理.md","lastUpdated":1685623283000}'),e={name:"modules/webpack/loader原理/loader原理.md"},o=n(`<p><a href="https://gitee.com/zg_code/webpack_loader.git" target="_blank" rel="noreferrer">loader 原理项目实战</a></p><h2 id="_1-loader-概念" tabindex="-1">1. loader 概念 <a class="header-anchor" href="#_1-loader-概念" aria-label="Permalink to &quot;1. loader 概念&quot;">​</a></h2><p>帮助 <code>webpack</code> 将不同类型的文件转换为 <code>webpack</code>可识别的模块。</p><h2 id="_2-loader-分类" tabindex="-1">2. loader 分类 <a class="header-anchor" href="#_2-loader-分类" aria-label="Permalink to &quot;2. loader 分类&quot;">​</a></h2><ul><li><ol><li><code>pre</code>： 前置 loader</li></ol></li><li><ol start="2"><li><code>normal</code>： 普通 loader</li></ol></li><li><ol start="3"><li><code>inline</code>： 内联 loader</li></ol></li><li><ol start="4"><li><code>post</code>： 后置 loader</li></ol></li></ul><h2 id="_3-loader-执行顺序" tabindex="-1">3. loader 执行顺序 <a class="header-anchor" href="#_3-loader-执行顺序" aria-label="Permalink to &quot;3. loader 执行顺序&quot;">​</a></h2><ul><li><ol><li><code>4</code> 类 <code>loader</code> 的执行优级为：<code>pre</code> &gt; <code>normal</code> &gt; <code>inline</code> &gt; <code>post</code> 。</li></ol></li><li><ol start="2"><li>相同优先级的 <code>loader</code> 执行顺序为：<strong>从右到左</strong>，<strong>从下到上</strong>。</li></ol></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 此时loader执行顺序：loader3 - loader2 - loader1</span></span>
<span class="line"><span style="color:#FFCB6B;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      loader</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">loader1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      loader</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">loader2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      loader</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">loader3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">},</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 此时loader执行顺序：loader1 - loader2 - loader3</span></span>
<span class="line"><span style="color:#FFCB6B;">module</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      enforce</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">pre</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      loader</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">loader1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 没有enforce就是normal</span></span>
<span class="line"><span style="color:#F07178;">      test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      loader</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">loader2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      enforce</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\.</span><span style="color:#C3E88D;">js</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      loader</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">loader3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">},</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_4-loader-使用方式" tabindex="-1">4. loader 使用方式 <a class="header-anchor" href="#_4-loader-使用方式" aria-label="Permalink to &quot;4. loader 使用方式&quot;">​</a></h2><ul><li><ol><li>配置方式：在 <code>webpack.config.js</code> 文件中指定 <code>loader</code>。（<code>pre loader</code>、<code>normal loader</code>、<code>post loader</code>）</li></ol></li><li><ol start="2"><li>内联方式：在每个 <code>import</code> 语句中显式指定 <code>loader</code>。（<code>inline loader</code>）</li></ol></li></ul><h2 id="_5-inline-loader" tabindex="-1">5. inline loader <a class="header-anchor" href="#_5-inline-loader" aria-label="Permalink to &quot;5. inline loader&quot;">​</a></h2><h3 id="_5-1-用法" tabindex="-1">5.1 用法 <a class="header-anchor" href="#_5-1-用法" aria-label="Permalink to &quot;5.1 用法&quot;">​</a></h3><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Styles </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">style-loader!css-loader?modules!./styles.css</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>含义：</p><ul><li><ol><li>使用 <code>css-loader</code> 和 <code>style-loader</code> 处理 <code>styles.css</code> 文件</li></ol></li><li><ol start="2"><li>通过 <code>!</code> 将资源中的 <code>loader</code>分开</li></ol></li></ul><h3 id="_5-2-跳过-loader" tabindex="-1">5.2 跳过 loader <a class="header-anchor" href="#_5-2-跳过-loader" aria-label="Permalink to &quot;5.2 跳过 loader&quot;">​</a></h3><p><code>inline loader</code> 可以通过添加不同前缀，跳过其他类型 <code>loader</code>。</p><ul><li><ol><li><code>!</code> 跳过 <code>normal loader</code></li></ol></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">jsimport Styles from </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">!style-loader!css-loader?modules!./styles.css</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li><code>-!</code> 跳过 <code>pre</code> 和 <code>normal loader</code></li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">import Styles from &#39;-!style-loader!css-loader?modules!./styles.css&#39;;</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><ol start="3"><li><code>!!</code> 跳过 <code>pre loader</code>、 <code>normal loader</code> 和 <code>post loader</code></li></ol></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">import Styles from &#39;!!style-loader!css-loader?modules!./styles.css&#39;</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_6-开发一个-loader" tabindex="-1">6. 开发一个 loader <a class="header-anchor" href="#_6-开发一个-loader" aria-label="Permalink to &quot;6. 开发一个 loader&quot;">​</a></h2><h3 id="_6-1-最简单的-loader" tabindex="-1">6.1 最简单的 loader <a class="header-anchor" href="#_6-1-最简单的-loader" aria-label="Permalink to &quot;6.1 最简单的 loader&quot;">​</a></h3><p>它接受要处理的源码作为参数，输出转换后的 <code>js</code> 代码。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// loaders/loader1.js</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">loader1</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">content</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello loader</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">content</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-2-loader-接受参数" tabindex="-1">3.2 loader 接受参数 <a class="header-anchor" href="#_3-2-loader-接受参数" aria-label="Permalink to &quot;3.2 loader 接受参数&quot;">​</a></h3><ul><li><ol><li>content 源文件的内容</li></ol></li><li><ol start="2"><li>map SourceMap 数据</li></ol></li><li><ol start="3"><li>meta 数据，可以是任何内容</li></ol></li></ul>`,30),p=[o];function r(c,t,i,d,F,D){return a(),l("div",null,p)}const b=s(e,[["render",r]]);export{u as __pageData,b as default};
