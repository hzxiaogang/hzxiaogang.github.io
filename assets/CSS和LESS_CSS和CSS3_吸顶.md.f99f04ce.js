import{_ as s,o,c as a,V as n}from"./chunks/framework.364d6ed5.js";const C=JSON.parse('{"title":"吸顶","description":"","frontmatter":{"title":"吸顶","date":"2021-12-31T10:31:17.000Z","permalink":"/pages/b6a985/","categories":["CSS和LESS","CSS和CSS3"],"tags":[null]},"headers":[],"relativePath":"CSS和LESS/CSS和CSS3/吸顶.md","filePath":"CSS和LESS/CSS和CSS3/吸顶.md","lastUpdated":1685623283000}'),l={name:"CSS和LESS/CSS和CSS3/吸顶.md"},e=n(`<h2 id="_1-利用粘性布局实现吸顶" tabindex="-1">1. 利用粘性布局实现吸顶 <a class="header-anchor" href="#_1-利用粘性布局实现吸顶" aria-label="Permalink to &quot;1. 利用粘性布局实现吸顶&quot;">​</a></h2><p><code>position:sticky</code>又称为<strong>黏性布局</strong>。 我们可以使用<code>position:sticky</code>来实现吸顶效果（设置相应的<code>top</code>，<code>left</code>值）。设置了<code>position:sticky</code>的元素，在屏幕范围内(<code>viewport</code>)时，该元素的位置并不受到影响（设置<code>top</code>，<code>left</code>等属性无效），当该元素的位置将要移除偏移范围时，定位又会变成<code>fixed</code>，根据设置的<code>left</code>，<code>top</code>等属性成固定位置的效果。</p><p><code>sticky</code>属性有以下几个特点：</p><ul><li><ol><li>该元素并不脱离文档流，仍然保留元素原本在文档流中的位置</li></ol></li><li><ol start="2"><li>当元素在容器中被滚动超过指定的偏移值时，元素在容器内固定在指定位置。亦即如果你设置了 top: 50px，那么在 sticky 元素到达距离相对定位的元素顶部 50px 的位置时固定，不再向上移动</li></ol></li><li><ol start="3"><li>元素固定的相对偏移是相对于离它<code>最近</code>的具<code>有滚动框的祖先元素</code>，如果祖先元素都不可以滚动，那么是相对于 viewport 来计算元素的偏移量</li></ol></li></ul><p>如果一个文档中有多个<code>sticky</code>元素时，如果发生了<strong>重叠</strong>，我们可以利用<code>z-index</code>属性设置重叠顺序。</p><h2 id="_2-监听-scroll-事件-实现吸顶功能" tabindex="-1">2.监听 scroll 事件，实现吸顶功能 <a class="header-anchor" href="#_2-监听-scroll-事件-实现吸顶功能" aria-label="Permalink to &quot;2.监听 scroll 事件，实现吸顶功能&quot;">​</a></h2><p>我们利用 js 的滚动事件也可以实现吸顶效果。</p><p>获取页面元素距离浏览器工作区顶端的距离:</p><p>页面元素距离浏览器工作区顶端的距离 = 元素距离文档顶端偏移值 - 网页被卷起来的高度</p><p>即 ：</p><p>页面元素距离浏览器工作区顶端的距离 = DOM 元素对象.offsetTop - document.documentElement.scrollTop</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scroll</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scrollTop</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">documentElement</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scrollTop</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scrollTop</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">offsetTop</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#searchBar</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">offsetTop</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">scrollTop</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">offsetTop</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#searchBar</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">position</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fixed</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#searchBar</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">top</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#searchBar</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">position</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#searchBar</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">top</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-了解-position-属性" tabindex="-1">3.了解 position 属性 <a class="header-anchor" href="#_3-了解-position-属性" aria-label="Permalink to &quot;3.了解 position 属性&quot;">​</a></h3><p>CSS 的<code>position</code>属性用于指定一个元素在文档中的定位方式。<code>top</code>，<code>right</code>，<code>botton</code>，<code>left</code>属性则决定了该元素的最终位置。</p><h4 id="_3-1-static" tabindex="-1">3.1 static <a class="header-anchor" href="#_3-1-static" aria-label="Permalink to &quot;3.1 static&quot;">​</a></h4><p>该关键字指定元素使用正常的布局行为，即元素在文档常规流中当前的布局位置。此时 <code>top</code>, <code>right</code>, <code>bottom</code>, <code>left</code> 和 <code>z-index</code> 属性<code>无效</code>。</p><h4 id="_3-2-relative" tabindex="-1">3.2 relative <a class="header-anchor" href="#_3-2-relative" aria-label="Permalink to &quot;3.2 relative&quot;">​</a></h4><p>该关键字下，元素先放置在未添加定位时的位置，再在不改变页面布局的前提下调整元素位置（因此会在此元素未添加定位时所在位置留下空白）。position:relative 对 table-*-group, table-row, table-column, table-cell, table-caption 元素无效。</p><h4 id="_3-3-absolute" tabindex="-1">3.3 absolute <a class="header-anchor" href="#_3-3-absolute" aria-label="Permalink to &quot;3.3 absolute&quot;">​</a></h4><p>元素会被移出正常文档流，并不为元素预留空间，通过指定元素相对于<code>最近</code>的<code>非 static</code> 定位<code>祖先</code>元素的偏移，来确定元素位置。绝对定位的元素可以设置外边距（margins），且不会与其他边距合并。</p><h4 id="_3-4-fixed" tabindex="-1">3.4 fixed <a class="header-anchor" href="#_3-4-fixed" aria-label="Permalink to &quot;3.4 fixed&quot;">​</a></h4><p>元素会被移出正常文档流，并不为元素预留空间，而是通过指定元素相对于屏幕视口（viewport）的位置来指定元素位置。元素的位置在屏幕滚动时不会改变。打印时，元素会出现在的每页的固定位置。fixed 属性会创建新的层叠上下文。当元素祖先的 transform, perspective 或 filter 属性非 none 时，容器由视口改为该祖先。</p><h4 id="_3-5-sticky" tabindex="-1">3.5 sticky <a class="header-anchor" href="#_3-5-sticky" aria-label="Permalink to &quot;3.5 sticky&quot;">​</a></h4><p>元素根据正常文档流进行定位，然后相对它的最近滚动祖先，基于 top, right, bottom, 和 left 的值进行偏移。偏移值不会影响任何其他元素的位置。注意，一个 sticky 元素会<strong>固</strong>在离它最近的一个拥<strong>滚动机制</strong>的祖先上（当该祖先的 overflow 是 <code>hidden</code>, <code>scroll</code>, <code>auto</code>, 或 <code>overlay</code> 时），即便这个祖先不是最近的真实可滚动祖先。这有效地抑制了任何<strong>sticky</strong>行为</p>`,24),p=[e];function t(c,r,y,F,i,D){return o(),a("div",null,p)}const u=s(l,[["render",t]]);export{C as __pageData,u as default};
